(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var im={exports:{}},pu={};var FE;function ZR(){if(FE)return pu;FE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var GE;function eC(){return GE||(GE=1,im.exports=ZR()),im.exports}var oe=eC(),sm={exports:{}},Ce={};var KE;function tC(){if(KE)return Ce;KE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),b=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function H(M,Z,ae){this.props=M,this.context=Z,this.refs=P,this.updater=ae||N}H.prototype.isReactComponent={},H.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},H.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=H.prototype;function G(M,Z,ae){this.props=M,this.context=Z,this.refs=P,this.updater=ae||N}var ie=G.prototype=new $;ie.constructor=G,k(ie,H.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray;function le(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function O(M,Z,ae){var fe=ae.ref;return{$$typeof:n,type:M,key:Z,ref:fe!==void 0?fe:null,props:ae}}function V(M,Z){return O(M.type,Z,M.props)}function U(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function j(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return Z[ae]})}var R=/\/+/g;function ve(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):Z.toString(36)}function Ke(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(le,le):(M.status="pending",M.then(function(Z){M.status==="pending"&&(M.status="fulfilled",M.value=Z)},function(Z){M.status==="pending"&&(M.status="rejected",M.reason=Z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,Z,ae,fe,Ae){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var qe=!1;if(M===null)qe=!0;else switch(De){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(M.$$typeof){case n:case e:qe=!0;break;case _:return qe=M._init,Q(qe(M._payload),Z,ae,fe,Ae)}}if(qe)return Ae=Ae(M),qe=fe===""?"."+ve(M,0):fe,pe(Ae)?(ae="",qe!=null&&(ae=qe.replace(R,"$&/")+"/"),Q(Ae,Z,ae,"",function(Ds){return Ds})):Ae!=null&&(U(Ae)&&(Ae=V(Ae,ae+(Ae.key==null||M&&M.key===Ae.key?"":(""+Ae.key).replace(R,"$&/")+"/")+qe)),Z.push(Ae)),1;qe=0;var Vt=fe===""?".":fe+":";if(pe(M))for(var ct=0;ct<M.length;ct++)fe=M[ct],De=Vt+ve(fe,ct),qe+=Q(fe,Z,ae,De,Ae);else if(ct=A(M),typeof ct=="function")for(M=ct.call(M),ct=0;!(fe=M.next()).done;)fe=fe.value,De=Vt+ve(fe,ct++),qe+=Q(fe,Z,ae,De,Ae);else if(De==="object"){if(typeof M.then=="function")return Q(Ke(M),Z,ae,fe,Ae);throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return qe}function re(M,Z,ae){if(M==null)return M;var fe=[],Ae=0;return Q(M,fe,"","",function(De){return Z.call(ae,De,Ae++)}),fe}function he(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var Pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},He={map:re,forEach:function(M,Z,ae){re(M,function(){Z.apply(this,arguments)},ae)},count:function(M){var Z=0;return re(M,function(){Z++}),Z},toArray:function(M){return re(M,function(Z){return Z})||[]},only:function(M){if(!U(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=w,Ce.Children=He,Ce.Component=H,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=G,Ce.StrictMode=i,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,Z,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var fe=k({},M.props),Ae=M.key;if(Z!=null)for(De in Z.key!==void 0&&(Ae=""+Z.key),Z)!C.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(fe[De]=Z[De]);var De=arguments.length-2;if(De===1)fe.children=ae;else if(1<De){for(var qe=Array(De),Vt=0;Vt<De;Vt++)qe[Vt]=arguments[Vt+2];fe.children=qe}return O(M.type,Ae,fe)},Ce.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ce.createElement=function(M,Z,ae){var fe,Ae={},De=null;if(Z!=null)for(fe in Z.key!==void 0&&(De=""+Z.key),Z)C.call(Z,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ae[fe]=Z[fe]);var qe=arguments.length-2;if(qe===1)Ae.children=ae;else if(1<qe){for(var Vt=Array(qe),ct=0;ct<qe;ct++)Vt[ct]=arguments[ct+2];Ae.children=Vt}if(M&&M.defaultProps)for(fe in qe=M.defaultProps,qe)Ae[fe]===void 0&&(Ae[fe]=qe[fe]);return O(M,De,Ae)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:d,render:M}},Ce.isValidElement=U,Ce.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:he}},Ce.memo=function(M,Z){return{$$typeof:g,type:M,compare:Z===void 0?null:Z}},Ce.startTransition=function(M){var Z=I.T,ae={};I.T=ae;try{var fe=M(),Ae=I.S;Ae!==null&&Ae(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(le,Pe)}catch(De){Pe(De)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),I.T=Z}},Ce.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ce.use=function(M){return I.H.use(M)},Ce.useActionState=function(M,Z,ae){return I.H.useActionState(M,Z,ae)},Ce.useCallback=function(M,Z){return I.H.useCallback(M,Z)},Ce.useContext=function(M){return I.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,Z){return I.H.useDeferredValue(M,Z)},Ce.useEffect=function(M,Z){return I.H.useEffect(M,Z)},Ce.useEffectEvent=function(M){return I.H.useEffectEvent(M)},Ce.useId=function(){return I.H.useId()},Ce.useImperativeHandle=function(M,Z,ae){return I.H.useImperativeHandle(M,Z,ae)},Ce.useInsertionEffect=function(M,Z){return I.H.useInsertionEffect(M,Z)},Ce.useLayoutEffect=function(M,Z){return I.H.useLayoutEffect(M,Z)},Ce.useMemo=function(M,Z){return I.H.useMemo(M,Z)},Ce.useOptimistic=function(M,Z){return I.H.useOptimistic(M,Z)},Ce.useReducer=function(M,Z,ae){return I.H.useReducer(M,Z,ae)},Ce.useRef=function(M){return I.H.useRef(M)},Ce.useState=function(M){return I.H.useState(M)},Ce.useSyncExternalStore=function(M,Z,ae){return I.H.useSyncExternalStore(M,Z,ae)},Ce.useTransition=function(){return I.H.useTransition()},Ce.version="19.2.3",Ce}var QE;function Eg(){return QE||(QE=1,sm.exports=tC()),sm.exports}var W=Eg(),am={exports:{}},mu={},om={exports:{}},lm={};var YE;function nC(){return YE||(YE=1,(function(n){function e(Q,re){var he=Q.length;Q.push(re);e:for(;0<he;){var Pe=he-1>>>1,He=Q[Pe];if(0<a(He,re))Q[Pe]=re,Q[he]=He,he=Pe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var re=Q[0],he=Q.pop();if(he!==re){Q[0]=he;e:for(var Pe=0,He=Q.length,M=He>>>1;Pe<M;){var Z=2*(Pe+1)-1,ae=Q[Z],fe=Z+1,Ae=Q[fe];if(0>a(ae,he))fe<He&&0>a(Ae,ae)?(Q[Pe]=Ae,Q[fe]=he,Pe=fe):(Q[Pe]=ae,Q[Z]=he,Pe=Z);else if(fe<He&&0>a(Ae,he))Q[Pe]=Ae,Q[fe]=he,Pe=fe;else break e}}return re}function a(Q,re){var he=Q.sortIndex-re.sortIndex;return he!==0?he:Q.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,w=null,b=3,A=!1,N=!1,k=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ie(Q){for(var re=t(g);re!==null;){if(re.callback===null)i(g);else if(re.startTime<=Q)i(g),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(g)}}function pe(Q){if(k=!1,ie(Q),!N)if(t(p)!==null)N=!0,le||(le=!0,j());else{var re=t(g);re!==null&&Ke(pe,re.startTime-Q)}}var le=!1,I=-1,C=5,O=-1;function V(){return P?!0:!(n.unstable_now()-O<C)}function U(){if(P=!1,le){var Q=n.unstable_now();O=Q;var re=!0;try{e:{N=!1,k&&(k=!1,$(I),I=-1),A=!0;var he=b;try{t:{for(ie(Q),w=t(p);w!==null&&!(w.expirationTime>Q&&V());){var Pe=w.callback;if(typeof Pe=="function"){w.callback=null,b=w.priorityLevel;var He=Pe(w.expirationTime<=Q);if(Q=n.unstable_now(),typeof He=="function"){w.callback=He,ie(Q),re=!0;break t}w===t(p)&&i(p),ie(Q)}else i(p);w=t(p)}if(w!==null)re=!0;else{var M=t(g);M!==null&&Ke(pe,M.startTime-Q),re=!1}}break e}finally{w=null,b=he,A=!1}re=void 0}}finally{re?j():le=!1}}}var j;if(typeof G=="function")j=function(){G(U)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ve=R.port2;R.port1.onmessage=U,j=function(){ve.postMessage(null)}}else j=function(){H(U,0)};function Ke(Q,re){I=H(function(){Q(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var he=b;b=re;try{return Q()}finally{b=he}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=b;b=Q;try{return re()}finally{b=he}},n.unstable_scheduleCallback=function(Q,re,he){var Pe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Pe+he:Pe):he=Pe,Q){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=he+He,Q={id:_++,callback:re,priorityLevel:Q,startTime:he,expirationTime:He,sortIndex:-1},he>Pe?(Q.sortIndex=he,e(g,Q),t(p)===null&&Q===t(g)&&(k?($(I),I=-1):k=!0,Ke(pe,he-Pe))):(Q.sortIndex=He,e(p,Q),N||A||(N=!0,le||(le=!0,j()))),Q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Q){var re=b;return function(){var he=b;b=re;try{return Q.apply(this,arguments)}finally{b=he}}}})(lm)),lm}var WE;function rC(){return WE||(WE=1,om.exports=nC()),om.exports}var um={exports:{}},sn={};var XE;function iC(){if(XE)return sn;XE=1;var n=Eg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:p,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},sn.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:b,fetchPriority:A}):_==="script"&&i.d.X(p,{crossOrigin:w,integrity:b,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},sn.requestFormReset=function(p){i.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var JE;function sC(){if(JE)return um.exports;JE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),um.exports=iC(),um.exports}var ZE;function aC(){if(ZE)return mu;ZE=1;var n=rC(),e=Eg(),t=sC();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(i(188))}function g(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,T=f.child;T;){if(T===o){v=!0,o=f,u=m;break}if(T===u){v=!0,u=f,o=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===o){v=!0,o=m,u=f;break}if(T===u){v=!0,u=m,o=f;break}T=T.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function _(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=_(r),s!==null)return s;r=r.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var R=Symbol.for("react.client.reference");function ve(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===R?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case pe:return"Suspense";case le:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case G:return r.displayName||"Context";case $:return(r._context.displayName||"Context")+".Consumer";case ie:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return s=r.displayName||null,s!==null?s:ve(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return ve(r(s))}catch{}}return null}var Ke=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function M(r){return{current:r}}function Z(r){0>He||(r.current=Pe[He],Pe[He]=null,He--)}function ae(r,s){He++,Pe[He]=r.current,r.current=s}var fe=M(null),Ae=M(null),De=M(null),qe=M(null);function Vt(r,s){switch(ae(De,s),ae(Ae,r),ae(fe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?pE(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=pE(s),r=mE(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(fe),ae(fe,r)}function ct(){Z(fe),Z(Ae),Z(De)}function Ds(r){r.memoizedState!==null&&ae(qe,r);var s=fe.current,o=mE(s,r.type);s!==o&&(ae(Ae,r),ae(fe,o))}function Da(r){Ae.current===r&&(Z(fe),Z(Ae)),qe.current===r&&(Z(qe),cu._currentValue=he)}var Na,Pa;function yr(r){if(Na===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Na=s&&s[1]||"",Pa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Na+r+Pa}var cl=!1;function Ns(r,s){if(!r||cl)return"";cl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var F=Y}Reflect.construct(r,[],ee)}else{try{ee.call()}catch(Y){F=Y}r.call(ee.prototype)}}else{try{throw Error()}catch(Y){F=Y}(ee=r())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var D=v.split(`
`),q=T.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===q.length)for(u=D.length-1,f=q.length-1;1<=u&&0<=f&&D[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==q[f]){var X=`
`+D[u].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=u&&0<=f);break}}}finally{cl=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?yr(o):""}function hl(r,s){switch(r.tag){case 26:case 27:case 5:return yr(r.type);case 16:return yr("Lazy");case 13:return r.child!==s&&s!==null?yr("Suspense Fallback"):yr("Suspense");case 19:return yr("SuspenseList");case 0:case 15:return Ns(r.type,!1);case 11:return Ns(r.type.render,!1);case 1:return Ns(r.type,!0);case 31:return yr("Activity");default:return""}}function fl(r){try{var s="",o=null;do s+=hl(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var bt=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,Ii=n.unstable_cancelCallback,ad=n.unstable_shouldYield,cc=n.unstable_requestPaint,cn=n.unstable_now,Ps=n.unstable_getCurrentPriorityLevel,dl=n.unstable_ImmediatePriority,pl=n.unstable_UserBlockingPriority,Oi=n.unstable_NormalPriority,od=n.unstable_LowPriority,hc=n.unstable_IdlePriority,fc=n.log,dc=n.unstable_setDisableYieldValue,Jn=null,Gt=null;function Un(r){if(typeof fc=="function"&&dc(r),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Jn,r)}catch{}}var _t=Math.clz32?Math.clz32:mc,pc=Math.log,xa=Math.LN2;function mc(r){return r>>>=0,r===0?32:31-(pc(r)/xa|0)|0}var _r=256,xs=262144,St=4194304;function vr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Er(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?f=vr(u):(v&=T,v!==0?f=vr(v):o||(o=T&~r,o!==0&&(f=vr(o))))):(T=u&~m,T!==0?f=vr(T):v!==0?f=vr(v):o||(o=u&~r,o!==0&&(f=vr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Zn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ld(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gc(){var r=St;return St<<=1,(St&62914560)===0&&(St=4194304),r}function wr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Us(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ud(r,s,o,u,f,m){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var T=r.entanglements,D=r.expirationTimes,q=r.hiddenUpdates;for(o=v&~o;0<o;){var X=31-_t(o),ee=1<<X;T[X]=0,D[X]=-1;var F=q[X];if(F!==null)for(q[X]=null,X=0;X<F.length;X++){var Y=F[X];Y!==null&&(Y.lane&=-536870913)}o&=~ee}u!==0&&Ms(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(v&~s))}function Ms(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-_t(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function ml(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-_t(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function gl(r,s){var o=s&-s;return o=(o&42)!==0?1:Vs(o),(o&(r.suspendedLanes|s))!==0?0:o}function Vs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function yc(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:LE(r.type))}function er(r,s){var o=re.p;try{return re.p=r,s()}finally{re.p=o}}var tr=Math.random().toString(36).slice(2),At="__reactFiber$"+tr,qt="__reactProps$"+tr,Tr="__reactContainer$"+tr,Ua="__reactEvents$"+tr,cd="__reactListeners$"+tr,_c="__reactHandles$"+tr,vc="__reactResources$"+tr,br="__reactMarker$"+tr;function Ma(r){delete r[At],delete r[qt],delete r[Ua],delete r[cd],delete r[_c]}function Sr(r){var s=r[At];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Tr]||o[At]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=TE(r);r!==null;){if(o=r[At])return o;r=TE(r)}return s}r=o,o=r.parentNode}return null}function Mn(r){if(r=r[At]||r[Tr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function wn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ar(r){var s=r[vc];return s||(s=r[vc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(r){r[br]=!0}var yl=new Set,_l={};function Rr(r,s){Cr(r,s),Cr(r+"Capture",s)}function Cr(r,s){for(_l[r]=s,r=0;r<s.length;r++)yl.add(s[r])}var vl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),El={},wl={};function Ec(r){return bt.call(wl,r)?!0:bt.call(El,r)?!1:vl.test(r)?wl[r]=!0:(El[r]=!0,!1)}function Va(r,s,o){if(Ec(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Tn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ct(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function $t(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ki(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tl(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Xe(r){if(!r._valueTracker){var s=ki(r)?"checked":"value";r._valueTracker=Tl(r,s,""+r[s])}}function Ls(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=ki(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Ir(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var js=/[\n"\\]/g;function dn(r){return r.replace(js,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function La(r,s,o,u,f,m,v,T){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),s!=null?v==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+$t(s)):r.value!==""+$t(s)&&(r.value=""+$t(s)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),s!=null?bl(r,v,$t(s)):o!=null?bl(r,v,$t(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+$t(T):r.removeAttribute("name")}function wc(r,s,o,u,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Xe(r);return}o=o!=null?""+$t(o):"",s=s!=null?""+$t(s):o,T||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),Xe(r)}function bl(r,s,o){s==="number"&&Ir(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Di(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+$t(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Tc(r,s,o){if(s!=null&&(s=""+$t(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+$t(o):""}function Ni(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Ke(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=$t(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Xe(r)}function pn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||bc.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Al(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Sl(r,f,u)}else for(var m in s)s.hasOwnProperty(m)&&Sl(r,m,s[m])}function ja(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(r){return Pi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function nr(){}var Rl=null;function Vn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xi=null,Or=null;function Bs(r){var s=Mn(r);if(s&&(r=s.stateNode)){var o=r[qt]||null;e:switch(r=s.stateNode,s.type){case"input":if(La(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[qt]||null;if(!f)throw Error(i(90));La(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Ls(u)}break e;case"textarea":Tc(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Di(r,!!o.multiple,s,!1)}}}var za=!1;function Ui(r,s,o){if(za)return r(s,o);za=!0;try{var u=r(s);return u}finally{if(za=!1,(xi!==null||Or!==null)&&(yh(),xi&&(s=xi,r=Or,Or=xi=null,Bs(s),r)))for(s=0;s<r.length;s++)Bs(r[s])}}function rr(r,s){var o=r.stateNode;if(o===null)return null;var u=o[qt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(Ln)try{var et={};Object.defineProperty(et,"passive",{get:function(){zs=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{zs=!1}var kr=null,Cl=null,qs=null;function Il(){if(qs)return qs;var r,s=Cl,o=s.length,u,f="value"in kr?kr.value:kr.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&s[o-u]===f[m-u];u++);return qs=f.slice(r,1<u?1-u:void 0)}function $s(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Yr(){return!0}function ir(){return!1}function Kt(r){function s(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(o=r[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Yr:ir,this.isPropagationStopped=ir,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),s}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dr=Kt(Wr),Mi=w({},Wr,{view:0,detail:0}),Ol=Kt(Mi),Vi,qa,Nr,$a=w({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Nr&&(Nr&&r.type==="mousemove"?(Vi=r.screenX-Nr.screenX,qa=r.screenY-Nr.screenY):qa=Vi=0,Nr=r),Vi)},movementY:function(r){return"movementY"in r?r.movementY:qa}}),kl=Kt($a),Hs=w({},$a,{dataTransfer:0}),Ac=Kt(Hs),Rc=w({},Mi,{relatedTarget:0}),Fs=Kt(Rc),Dl=w({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cc=Kt(Dl),Ha=w({},Wr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ic=Kt(Ha),Oc=w({},Wr,{data:0}),Pr=Kt(Oc),kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Nc[r])?!!s[r]:!1}function Li(){return Pc}var hn=w({},Mi,{key:function(r){if(r.key){var s=kc[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=$s(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(r){return r.type==="keypress"?$s(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$s(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),xc=Kt(hn),Uc=w({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=Kt(Uc),h=w({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),y=Kt(h),E=w({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Kt(E),B=w({},$a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Kt(B),se=w({},Wr,{newState:0,oldState:0}),Oe=Kt(se),vt=[9,13,27,32],Qe=Ln&&"CompositionEvent"in window,ht=null;Ln&&"documentMode"in document&&(ht=document.documentMode);var jn=Ln&&"TextEvent"in window&&!ht,xr=Ln&&(!Qe||ht&&8<ht&&11>=ht),sr=" ",ar=!1;function Gs(r,s){switch(r){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ga=!1;function bA(r,s){switch(r){case"compositionend":return Fa(s);case"keypress":return s.which!==32?null:(ar=!0,sr);case"textInput":return r=s.data,r===sr&&ar?null:r;default:return null}}function SA(r,s){if(Ga)return r==="compositionend"||!Qe&&Gs(r,s)?(r=Il(),qs=Cl=kr=null,Ga=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xr&&s.locale!=="ko"?null:s.data;default:return null}}var AA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ay(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!AA[r.type]:s==="textarea"}function Ry(r,s,o,u){xi?Or?Or.push(u):Or=[u]:xi=u,s=Sh(s,"onChange"),0<s.length&&(o=new Dr("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Nl=null,Pl=null;function RA(r){lE(r,0)}function Mc(r){var s=wn(r);if(Ls(s))return r}function Cy(r,s){if(r==="change")return s}var Iy=!1;if(Ln){var hd;if(Ln){var fd="oninput"in document;if(!fd){var Oy=document.createElement("div");Oy.setAttribute("oninput","return;"),fd=typeof Oy.oninput=="function"}hd=fd}else hd=!1;Iy=hd&&(!document.documentMode||9<document.documentMode)}function ky(){Nl&&(Nl.detachEvent("onpropertychange",Dy),Pl=Nl=null)}function Dy(r){if(r.propertyName==="value"&&Mc(Pl)){var s=[];Ry(s,Pl,r,Vn(r)),Ui(RA,s)}}function CA(r,s,o){r==="focusin"?(ky(),Nl=s,Pl=o,Nl.attachEvent("onpropertychange",Dy)):r==="focusout"&&ky()}function IA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Mc(Pl)}function OA(r,s){if(r==="click")return Mc(s)}function kA(r,s){if(r==="input"||r==="change")return Mc(s)}function DA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var bn=typeof Object.is=="function"?Object.is:DA;function xl(r,s){if(bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bt.call(s,f)||!bn(r[f],s[f]))return!1}return!0}function Ny(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Py(r,s){var o=Ny(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ny(o)}}function xy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?xy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Uy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ir(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Ir(r.document)}return s}function dd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var NA=Ln&&"documentMode"in document&&11>=document.documentMode,Ka=null,pd=null,Ul=null,md=!1;function My(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;md||Ka==null||Ka!==Ir(u)||(u=Ka,"selectionStart"in u&&dd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ul&&xl(Ul,u)||(Ul=u,u=Sh(pd,"onSelect"),0<u.length&&(s=new Dr("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Ka)))}function Ks(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Qa={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},gd={},Vy={};Ln&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Qs(r){if(gd[r])return gd[r];if(!Qa[r])return r;var s=Qa[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Vy)return gd[r]=s[o];return r}var Ly=Qs("animationend"),jy=Qs("animationiteration"),By=Qs("animationstart"),PA=Qs("transitionrun"),xA=Qs("transitionstart"),UA=Qs("transitioncancel"),zy=Qs("transitionend"),qy=new Map,yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yd.push("scrollEnd");function or(r,s){qy.set(r,s),Rr(s,[r])}var Vc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Bn=[],Ya=0,_d=0;function Lc(){for(var r=Ya,s=_d=Ya=0;s<r;){var o=Bn[s];Bn[s++]=null;var u=Bn[s];Bn[s++]=null;var f=Bn[s];Bn[s++]=null;var m=Bn[s];if(Bn[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&$y(o,f,m)}}function jc(r,s,o,u){Bn[Ya++]=r,Bn[Ya++]=s,Bn[Ya++]=o,Bn[Ya++]=u,_d|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function vd(r,s,o,u){return jc(r,s,o,u),Bc(r)}function Ys(r,s){return jc(r,null,null,s),Bc(r)}function $y(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-_t(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Bc(r){if(50<ru)throw ru=0,Ip=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Wa={};function MA(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(r,s,o,u){return new MA(r,s,o,u)}function Ed(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jr(r,s){var o=r.alternate;return o===null?(o=Sn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Hy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function zc(r,s,o,u,f,m){var v=0;if(u=r,typeof r=="function")Ed(r)&&(v=1);else if(typeof r=="string")v=zR(r,o,fe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=Sn(31,o,s,f),r.elementType=O,r.lanes=m,r;case k:return Ws(o.children,f,m,s);case P:v=8,f|=24;break;case H:return r=Sn(12,o,s,f|2),r.elementType=H,r.lanes=m,r;case pe:return r=Sn(13,o,s,f),r.elementType=pe,r.lanes=m,r;case le:return r=Sn(19,o,s,f),r.elementType=le,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:v=10;break e;case $:v=9;break e;case ie:v=11;break e;case I:v=14;break e;case C:v=16,u=null;break e}v=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Sn(v,o,s,f),s.elementType=r,s.type=u,s.lanes=m,s}function Ws(r,s,o,u){return r=Sn(7,r,u,s),r.lanes=o,r}function wd(r,s,o){return r=Sn(6,r,null,s),r.lanes=o,r}function Fy(r){var s=Sn(18,null,null,0);return s.stateNode=r,s}function Td(r,s,o){return s=Sn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Gy=new WeakMap;function zn(r,s){if(typeof r=="object"&&r!==null){var o=Gy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:fl(s)},Gy.set(r,s),s)}return{value:r,source:s,stack:fl(s)}}var Xa=[],Ja=0,qc=null,Ml=0,qn=[],$n=0,ji=null,Ur=1,Mr="";function Zr(r,s){Xa[Ja++]=Ml,Xa[Ja++]=qc,qc=r,Ml=s}function Ky(r,s,o){qn[$n++]=Ur,qn[$n++]=Mr,qn[$n++]=ji,ji=r;var u=Ur;r=Mr;var f=32-_t(u)-1;u&=~(1<<f),o+=1;var m=32-_t(s)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Ur=1<<32-_t(s)+f|o<<f|u,Mr=m+r}else Ur=1<<m|o<<f|u,Mr=r}function bd(r){r.return!==null&&(Zr(r,1),Ky(r,1,0))}function Sd(r){for(;r===qc;)qc=Xa[--Ja],Xa[Ja]=null,Ml=Xa[--Ja],Xa[Ja]=null;for(;r===ji;)ji=qn[--$n],qn[$n]=null,Mr=qn[--$n],qn[$n]=null,Ur=qn[--$n],qn[$n]=null}function Qy(r,s){qn[$n++]=Ur,qn[$n++]=Mr,qn[$n++]=ji,Ur=s.id,Mr=s.overflow,ji=r}var Qt=null,ot=null,ze=!1,Bi=null,Hn=!1,Ad=Error(i(519));function zi(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(zn(s,r)),Ad}function Yy(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[At]=r,s[qt]=u,o){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(o=0;o<su.length;o++)Ue(su[o],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),wc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Ni(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||fE(s.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),u.onScroll!=null&&Ue("scroll",s),u.onScrollEnd!=null&&Ue("scrollend",s),u.onClick!=null&&(s.onclick=nr),s=!0):s=!1,s||zi(r,!0)}function Wy(r){for(Qt=r.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Qt=Qt.return}}function Za(r){if(r!==Qt)return!1;if(!ze)return Wy(r),ze=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||$p(r.type,r.memoizedProps)),o=!o),o&&ot&&zi(r),Wy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ot=wE(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ot=wE(r)}else s===27?(s=ot,ts(r.type)?(r=Qp,Qp=null,ot=r):ot=s):ot=Qt?Gn(r.stateNode.nextSibling):null;return!0}function Xs(){ot=Qt=null,ze=!1}function Rd(){var r=Bi;return r!==null&&(_n===null?_n=r:_n.push.apply(_n,r),Bi=null),r}function Vl(r){Bi===null?Bi=[r]:Bi.push(r)}var Cd=M(null),Js=null,ei=null;function qi(r,s,o){ae(Cd,s._currentValue),s._currentValue=o}function ti(r){r._currentValue=Cd.current,Z(Cd)}function Id(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Od(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var D=0;D<s.length;D++)if(T.context===s[D]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Id(m.return,o,r),u||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Id(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function eo(r,s,o,u){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=f.type;bn(f.pendingProps.value,v.value)||(r!==null?r.push(T):r=[T])}}else if(f===qe.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(cu):r=[cu])}f=f.return}r!==null&&Od(s,r,o,u),s.flags|=262144}function $c(r){for(r=r.firstContext;r!==null;){if(!bn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Zs(r){Js=r,ei=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yt(r){return Xy(Js,r)}function Hc(r,s){return Js===null&&Zs(r),Xy(r,s)}function Xy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ei===null){if(r===null)throw Error(i(308));ei=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ei=ei.next=s;return o}var VA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},LA=n.unstable_scheduleCallback,jA=n.unstable_NormalPriority,It={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new VA,data:new Map,refCount:0}}function Ll(r){r.refCount--,r.refCount===0&&LA(jA,function(){r.controller.abort()})}var jl=null,Dd=0,to=0,no=null;function BA(r,s){if(jl===null){var o=jl=[];Dd=0,to=xp(),no={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Dd++,s.then(Jy,Jy),s}function Jy(){if(--Dd===0&&jl!==null){no!==null&&(no.status="fulfilled");var r=jl;jl=null,to=0,no=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function zA(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Zy=Q.S;Q.S=function(r,s){Mv=cn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&BA(r,s),Zy!==null&&Zy(r,s)};var ea=M(null);function Nd(){var r=ea.current;return r!==null?r:it.pooledCache}function Fc(r,s){s===null?ae(ea,ea.current):ae(ea,s.pool)}function e_(){var r=Nd();return r===null?null:{parent:It._currentValue,pool:r}}var ro=Error(i(460)),Pd=Error(i(474)),Gc=Error(i(542)),Kc={then:function(){}};function t_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function n_(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(nr,nr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,i_(r),r;default:if(typeof s.status=="string")s.then(nr,nr);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,i_(r),r}throw na=s,ro}}function ta(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(na=o,ro):o}}var na=null;function r_(){if(na===null)throw Error(i(459));var r=na;return na=null,r}function i_(r){if(r===ro||r===Gc)throw Error(i(483))}var io=null,Bl=0;function Qc(r){var s=Bl;return Bl+=1,io===null&&(io=[]),n_(io,r,s)}function zl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Yc(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function s_(r){function s(L,x){if(r){var z=L.deletions;z===null?(L.deletions=[x],L.flags|=16):z.push(x)}}function o(L,x){if(!r)return null;for(;x!==null;)s(L,x),x=x.sibling;return null}function u(L){for(var x=new Map;L!==null;)L.key!==null?x.set(L.key,L):x.set(L.index,L),L=L.sibling;return x}function f(L,x){return L=Jr(L,x),L.index=0,L.sibling=null,L}function m(L,x,z){return L.index=z,r?(z=L.alternate,z!==null?(z=z.index,z<x?(L.flags|=67108866,x):z):(L.flags|=67108866,x)):(L.flags|=1048576,x)}function v(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function T(L,x,z,J){return x===null||x.tag!==6?(x=wd(z,L.mode,J),x.return=L,x):(x=f(x,z),x.return=L,x)}function D(L,x,z,J){var ye=z.type;return ye===k?X(L,x,z.props.children,J,z.key):x!==null&&(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&ta(ye)===x.type)?(x=f(x,z.props),zl(x,z),x.return=L,x):(x=zc(z.type,z.key,z.props,null,L.mode,J),zl(x,z),x.return=L,x)}function q(L,x,z,J){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=Td(z,L.mode,J),x.return=L,x):(x=f(x,z.children||[]),x.return=L,x)}function X(L,x,z,J,ye){return x===null||x.tag!==7?(x=Ws(z,L.mode,J,ye),x.return=L,x):(x=f(x,z),x.return=L,x)}function ee(L,x,z){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=wd(""+x,L.mode,z),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A:return z=zc(x.type,x.key,x.props,null,L.mode,z),zl(z,x),z.return=L,z;case N:return x=Td(x,L.mode,z),x.return=L,x;case C:return x=ta(x),ee(L,x,z)}if(Ke(x)||j(x))return x=Ws(x,L.mode,z,null),x.return=L,x;if(typeof x.then=="function")return ee(L,Qc(x),z);if(x.$$typeof===G)return ee(L,Hc(L,x),z);Yc(L,x)}return null}function F(L,x,z,J){var ye=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:T(L,x,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===ye?D(L,x,z,J):null;case N:return z.key===ye?q(L,x,z,J):null;case C:return z=ta(z),F(L,x,z,J)}if(Ke(z)||j(z))return ye!==null?null:X(L,x,z,J,null);if(typeof z.then=="function")return F(L,x,Qc(z),J);if(z.$$typeof===G)return F(L,x,Hc(L,z),J);Yc(L,z)}return null}function Y(L,x,z,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(z)||null,T(x,L,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return L=L.get(J.key===null?z:J.key)||null,D(x,L,J,ye);case N:return L=L.get(J.key===null?z:J.key)||null,q(x,L,J,ye);case C:return J=ta(J),Y(L,x,z,J,ye)}if(Ke(J)||j(J))return L=L.get(z)||null,X(x,L,J,ye,null);if(typeof J.then=="function")return Y(L,x,z,Qc(J),ye);if(J.$$typeof===G)return Y(L,x,z,Hc(x,J),ye);Yc(x,J)}return null}function de(L,x,z,J){for(var ye=null,Fe=null,me=x,Ne=x=0,Ve=null;me!==null&&Ne<z.length;Ne++){me.index>Ne?(Ve=me,me=null):Ve=me.sibling;var Ge=F(L,me,z[Ne],J);if(Ge===null){me===null&&(me=Ve);break}r&&me&&Ge.alternate===null&&s(L,me),x=m(Ge,x,Ne),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge,me=Ve}if(Ne===z.length)return o(L,me),ze&&Zr(L,Ne),ye;if(me===null){for(;Ne<z.length;Ne++)me=ee(L,z[Ne],J),me!==null&&(x=m(me,x,Ne),Fe===null?ye=me:Fe.sibling=me,Fe=me);return ze&&Zr(L,Ne),ye}for(me=u(me);Ne<z.length;Ne++)Ve=Y(me,L,Ne,z[Ne],J),Ve!==null&&(r&&Ve.alternate!==null&&me.delete(Ve.key===null?Ne:Ve.key),x=m(Ve,x,Ne),Fe===null?ye=Ve:Fe.sibling=Ve,Fe=Ve);return r&&me.forEach(function(as){return s(L,as)}),ze&&Zr(L,Ne),ye}function Ee(L,x,z,J){if(z==null)throw Error(i(151));for(var ye=null,Fe=null,me=x,Ne=x=0,Ve=null,Ge=z.next();me!==null&&!Ge.done;Ne++,Ge=z.next()){me.index>Ne?(Ve=me,me=null):Ve=me.sibling;var as=F(L,me,Ge.value,J);if(as===null){me===null&&(me=Ve);break}r&&me&&as.alternate===null&&s(L,me),x=m(as,x,Ne),Fe===null?ye=as:Fe.sibling=as,Fe=as,me=Ve}if(Ge.done)return o(L,me),ze&&Zr(L,Ne),ye;if(me===null){for(;!Ge.done;Ne++,Ge=z.next())Ge=ee(L,Ge.value,J),Ge!==null&&(x=m(Ge,x,Ne),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return ze&&Zr(L,Ne),ye}for(me=u(me);!Ge.done;Ne++,Ge=z.next())Ge=Y(me,L,Ne,Ge.value,J),Ge!==null&&(r&&Ge.alternate!==null&&me.delete(Ge.key===null?Ne:Ge.key),x=m(Ge,x,Ne),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return r&&me.forEach(function(JR){return s(L,JR)}),ze&&Zr(L,Ne),ye}function rt(L,x,z,J){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:e:{for(var ye=z.key;x!==null;){if(x.key===ye){if(ye=z.type,ye===k){if(x.tag===7){o(L,x.sibling),J=f(x,z.props.children),J.return=L,L=J;break e}}else if(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&ta(ye)===x.type){o(L,x.sibling),J=f(x,z.props),zl(J,z),J.return=L,L=J;break e}o(L,x);break}else s(L,x);x=x.sibling}z.type===k?(J=Ws(z.props.children,L.mode,J,z.key),J.return=L,L=J):(J=zc(z.type,z.key,z.props,null,L.mode,J),zl(J,z),J.return=L,L=J)}return v(L);case N:e:{for(ye=z.key;x!==null;){if(x.key===ye)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){o(L,x.sibling),J=f(x,z.children||[]),J.return=L,L=J;break e}else{o(L,x);break}else s(L,x);x=x.sibling}J=Td(z,L.mode,J),J.return=L,L=J}return v(L);case C:return z=ta(z),rt(L,x,z,J)}if(Ke(z))return de(L,x,z,J);if(j(z)){if(ye=j(z),typeof ye!="function")throw Error(i(150));return z=ye.call(z),Ee(L,x,z,J)}if(typeof z.then=="function")return rt(L,x,Qc(z),J);if(z.$$typeof===G)return rt(L,x,Hc(L,z),J);Yc(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,x!==null&&x.tag===6?(o(L,x.sibling),J=f(x,z),J.return=L,L=J):(o(L,x),J=wd(z,L.mode,J),J.return=L,L=J),v(L)):o(L,x)}return function(L,x,z,J){try{Bl=0;var ye=rt(L,x,z,J);return io=null,ye}catch(me){if(me===ro||me===Gc)throw me;var Fe=Sn(29,me,null,L.mode);return Fe.lanes=J,Fe.return=L,Fe}}}var ra=s_(!0),a_=s_(!1),$i=!1;function xd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Hi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Fi(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Bc(r),$y(r,null,o),s}return jc(r,u,s,o),Bc(r)}function ql(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ml(r,o)}}function Md(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Vd=!1;function $l(){if(Vd){var r=no;if(r!==null)throw r}}function Hl(r,s,o,u){Vd=!1;var f=r.updateQueue;$i=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,q=D.next;D.next=null,v===null?m=q:v.next=q,v=D;var X=r.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=q:T.next=q,X.lastBaseUpdate=D))}if(m!==null){var ee=f.baseState;v=0,X=q=D=null,T=m;do{var F=T.lane&-536870913,Y=F!==T.lane;if(Y?(Me&F)===F:(u&F)===F){F!==0&&F===to&&(Vd=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var de=r,Ee=T;F=s;var rt=o;switch(Ee.tag){case 1:if(de=Ee.payload,typeof de=="function"){ee=de.call(rt,ee,F);break e}ee=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Ee.payload,F=typeof de=="function"?de.call(rt,ee,F):de,F==null)break e;ee=w({},ee,F);break e;case 2:$i=!0}}F=T.callback,F!==null&&(r.flags|=64,Y&&(r.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(q=X=Y,D=ee):X=X.next=Y,v|=F;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);X===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Wi|=v,r.lanes=v,r.memoizedState=ee}}function o_(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function l_(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)o_(o[r],s)}var so=M(null),Wc=M(0);function u_(r,s){r=ci,ae(Wc,r),ae(so,s),ci=r|s.baseLanes}function Ld(){ae(Wc,ci),ae(so,so.current)}function jd(){ci=Wc.current,Z(so),Z(Wc)}var An=M(null),Fn=null;function Gi(r){var s=r.alternate;ae(Et,Et.current&1),ae(An,r),Fn===null&&(s===null||so.current!==null||s.memoizedState!==null)&&(Fn=r)}function Bd(r){ae(Et,Et.current),ae(An,r),Fn===null&&(Fn=r)}function c_(r){r.tag===22?(ae(Et,Et.current),ae(An,r),Fn===null&&(Fn=r)):Ki()}function Ki(){ae(Et,Et.current),ae(An,An.current)}function Rn(r){Z(An),Fn===r&&(Fn=null),Z(Et)}var Et=M(0);function Xc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Gp(o)||Kp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ni=0,ke=null,tt=null,Ot=null,Jc=!1,ao=!1,ia=!1,Zc=0,Fl=0,oo=null,qA=0;function mt(){throw Error(i(321))}function zd(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!bn(r[o],s[o]))return!1;return!0}function qd(r,s,o,u,f,m){return ni=m,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=r===null||r.memoizedState===null?K_:rp,ia=!1,m=o(u,f),ia=!1,ao&&(m=f_(s,o,u,f)),h_(r),m}function h_(r){Q.H=Ql;var s=tt!==null&&tt.next!==null;if(ni=0,Ot=tt=ke=null,Jc=!1,Fl=0,oo=null,s)throw Error(i(300));r===null||kt||(r=r.dependencies,r!==null&&$c(r)&&(kt=!0))}function f_(r,s,o,u){ke=r;var f=0;do{if(ao&&(oo=null),Fl=0,ao=!1,25<=f)throw Error(i(301));if(f+=1,Ot=tt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Q_,m=s(o,u)}while(ao);return m}function $A(){var r=Q.H,s=r.useState()[0];return s=typeof s.then=="function"?Gl(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(ke.flags|=1024),s}function $d(){var r=Zc!==0;return Zc=0,r}function Hd(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Fd(r){if(Jc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jc=!1}ni=0,Ot=tt=ke=null,ao=!1,Fl=Zc=0,oo=null}function fn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ke.memoizedState=Ot=r:Ot=Ot.next=r,Ot}function wt(){if(tt===null){var r=ke.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=Ot===null?ke.memoizedState:Ot.next;if(s!==null)Ot=s,tt=r;else{if(r===null)throw ke.alternate===null?Error(i(467)):Error(i(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ot===null?ke.memoizedState=Ot=r:Ot=Ot.next=r}return Ot}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(r){var s=Fl;return Fl+=1,oo===null&&(oo=[]),r=n_(oo,r,s),s=ke,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?K_:rp),r}function th(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Gl(r);if(r.$$typeof===G)return Yt(r)}throw Error(i(438,String(r)))}function Gd(r){var s=null,o=ke.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=eh(),ke.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=V;return s.index++,o}function ri(r,s){return typeof s=="function"?s(r):s}function nh(r){var s=wt();return Kd(s,tt,r)}function Kd(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}s.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var T=v=null,D=null,q=s,X=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Me&ee)===ee:(ni&ee)===ee){var F=q.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===to&&(X=!0);else if((ni&F)===F){q=q.next,F===to&&(X=!0);continue}else ee={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=ee,v=m):D=D.next=ee,ke.lanes|=F,Wi|=F;ee=q.action,ia&&o(m,ee),m=q.hasEagerState?q.eagerState:o(m,ee)}else F={lane:ee,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=F,v=m):D=D.next=F,ke.lanes|=ee,Wi|=ee;q=q.next}while(q!==null&&q!==s);if(D===null?v=m:D.next=T,!bn(m,r.memoizedState)&&(kt=!0,X&&(o=no,o!==null)))throw o;r.memoizedState=m,r.baseState=v,r.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Qd(r){var s=wt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);bn(m,s.memoizedState)||(kt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function d_(r,s,o){var u=ke,f=wt(),m=ze;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var v=!bn((tt||f).memoizedState,o);if(v&&(f.memoizedState=o,kt=!0),f=f.queue,Xd(g_.bind(null,u,f,r),[r]),f.getSnapshot!==s||v||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,lo(9,{destroy:void 0},m_.bind(null,u,f,o,s),null),it===null)throw Error(i(349));m||(ni&127)!==0||p_(u,s,o)}return o}function p_(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=ke.updateQueue,s===null?(s=eh(),ke.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function m_(r,s,o,u){s.value=o,s.getSnapshot=u,y_(s)&&__(r)}function g_(r,s,o){return o(function(){y_(s)&&__(r)})}function y_(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!bn(r,o)}catch{return!0}}function __(r){var s=Ys(r,2);s!==null&&vn(s,r,2)}function Yd(r){var s=fn();if(typeof r=="function"){var o=r;if(r=o(),ia){Un(!0);try{o()}finally{Un(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:r},s}function v_(r,s,o,u){return r.baseState=o,Kd(r,tt,typeof u=="function"?u:ri)}function HA(r,s,o,u,f){if(sh(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,E_(s,m)):(m.next=o.next,s.pending=o.next=m)}}function E_(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var m=Q.T,v={};Q.T=v;try{var T=o(f,u),D=Q.S;D!==null&&D(v,T),w_(r,s,T)}catch(q){Wd(r,s,q)}finally{m!==null&&v.types!==null&&(m.types=v.types),Q.T=m}}else try{m=o(f,u),w_(r,s,m)}catch(q){Wd(r,s,q)}}function w_(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){T_(r,s,u)},function(u){return Wd(r,s,u)}):T_(r,s,o)}function T_(r,s,o){s.status="fulfilled",s.value=o,b_(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,E_(r,o)))}function Wd(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,b_(s),s=s.next;while(s!==u)}r.action=null}function b_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function S_(r,s){return s}function A_(r,s){if(ze){var o=it.formState;if(o!==null){e:{var u=ke;if(ze){if(ot){t:{for(var f=ot,m=Hn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ot=Gn(f.nextSibling),u=f.data==="F!";break e}}zi(u)}u=!1}u&&(s=o[0])}}return o=fn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S_,lastRenderedState:s},o.queue=u,o=H_.bind(null,ke,u),u.dispatch=o,u=Yd(!1),m=np.bind(null,ke,!1,u.queue),u=fn(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=HA.bind(null,ke,f,m,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function R_(r){var s=wt();return C_(s,tt,r)}function C_(r,s,o){if(s=Kd(r,s,S_)[0],r=nh(ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Gl(s)}catch(v){throw v===ro?Gc:v}else u=s;s=wt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(ke.flags|=2048,lo(9,{destroy:void 0},FA.bind(null,f,o),null)),[u,m,r]}function FA(r,s){r.action=s}function I_(r){var s=wt(),o=tt;if(o!==null)return C_(s,o,r);wt(),s=s.memoizedState,o=wt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function lo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=ke.updateQueue,s===null&&(s=eh(),ke.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function O_(){return wt().memoizedState}function rh(r,s,o,u){var f=fn();ke.flags|=r,f.memoizedState=lo(1|s,{destroy:void 0},o,u===void 0?null:u)}function ih(r,s,o,u){var f=wt();u=u===void 0?null:u;var m=f.memoizedState.inst;tt!==null&&u!==null&&zd(u,tt.memoizedState.deps)?f.memoizedState=lo(s,m,o,u):(ke.flags|=r,f.memoizedState=lo(1|s,m,o,u))}function k_(r,s){rh(8390656,8,r,s)}function Xd(r,s){ih(2048,8,r,s)}function GA(r){ke.flags|=4;var s=ke.updateQueue;if(s===null)s=eh(),ke.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function D_(r){var s=wt().memoizedState;return GA({ref:s,nextImpl:r}),function(){if((Ye&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function N_(r,s){return ih(4,2,r,s)}function P_(r,s){return ih(4,4,r,s)}function x_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function U_(r,s,o){o=o!=null?o.concat([r]):null,ih(4,4,x_.bind(null,s,r),o)}function Jd(){}function M_(r,s){var o=wt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&zd(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function V_(r,s){var o=wt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&zd(s,u[1]))return u[0];if(u=r(),ia){Un(!0);try{r()}finally{Un(!1)}}return o.memoizedState=[u,s],u}function Zd(r,s,o){return o===void 0||(ni&1073741824)!==0&&(Me&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=Lv(),ke.lanes|=r,Wi|=r,o)}function L_(r,s,o,u){return bn(o,s)?o:so.current!==null?(r=Zd(r,o,u),bn(r,s)||(kt=!0),r):(ni&42)===0||(ni&1073741824)!==0&&(Me&261930)===0?(kt=!0,r.memoizedState=o):(r=Lv(),ke.lanes|=r,Wi|=r,s)}function j_(r,s,o,u,f){var m=re.p;re.p=m!==0&&8>m?m:8;var v=Q.T,T={};Q.T=T,np(r,!1,s,o);try{var D=f(),q=Q.S;if(q!==null&&q(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=zA(D,u);Kl(r,s,X,On(r))}else Kl(r,s,u,On(r))}catch(ee){Kl(r,s,{then:function(){},status:"rejected",reason:ee},On())}finally{re.p=m,v!==null&&T.types!==null&&(v.types=T.types),Q.T=v}}function KA(){}function ep(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=B_(r).queue;j_(r,f,s,he,o===null?KA:function(){return z_(r),o(u)})}function B_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:he},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function z_(r){var s=B_(r);s.next===null&&(s=r.alternate.memoizedState),Kl(r,s.next.queue,{},On())}function tp(){return Yt(cu)}function q_(){return wt().memoizedState}function $_(){return wt().memoizedState}function QA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=On();r=Hi(o);var u=Fi(s,r,o);u!==null&&(vn(u,s,o),ql(u,s,o)),s={cache:kd()},r.payload=s;return}s=s.return}}function YA(r,s,o){var u=On();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},sh(r)?F_(s,o):(o=vd(r,s,o,u),o!==null&&(vn(o,r,u),G_(o,s,u)))}function H_(r,s,o){var u=On();Kl(r,s,o,u)}function Kl(r,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(sh(r))F_(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,T=m(v,o);if(f.hasEagerState=!0,f.eagerState=T,bn(T,v))return jc(r,s,f,0),it===null&&Lc(),!1}catch{}if(o=vd(r,s,f,u),o!==null)return vn(o,r,u),G_(o,s,u),!0}return!1}function np(r,s,o,u){if(u={lane:2,revertLane:xp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sh(r)){if(s)throw Error(i(479))}else s=vd(r,o,u,2),s!==null&&vn(s,r,2)}function sh(r){var s=r.alternate;return r===ke||s!==null&&s===ke}function F_(r,s){ao=Jc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function G_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ml(r,o)}}var Ql={readContext:Yt,use:th,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Ql.useEffectEvent=mt;var K_={readContext:Yt,use:th,useCallback:function(r,s){return fn().memoizedState=[r,s===void 0?null:s],r},useContext:Yt,useEffect:k_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,rh(4194308,4,x_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return rh(4194308,4,r,s)},useInsertionEffect:function(r,s){rh(4,2,r,s)},useMemo:function(r,s){var o=fn();s=s===void 0?null:s;var u=r();if(ia){Un(!0);try{r()}finally{Un(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=fn();if(o!==void 0){var f=o(s);if(ia){Un(!0);try{o(s)}finally{Un(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=YA.bind(null,ke,r),[u.memoizedState,r]},useRef:function(r){var s=fn();return r={current:r},s.memoizedState=r},useState:function(r){r=Yd(r);var s=r.queue,o=H_.bind(null,ke,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Jd,useDeferredValue:function(r,s){var o=fn();return Zd(o,r,s)},useTransition:function(){var r=Yd(!1);return r=j_.bind(null,ke,r.queue,!0,!1),fn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=ke,f=fn();if(ze){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),it===null)throw Error(i(349));(Me&127)!==0||p_(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,k_(g_.bind(null,u,m,r),[r]),u.flags|=2048,lo(9,{destroy:void 0},m_.bind(null,u,m,o,s),null),o},useId:function(){var r=fn(),s=it.identifierPrefix;if(ze){var o=Mr,u=Ur;o=(u&~(1<<32-_t(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Zc++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=qA++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:tp,useFormState:A_,useActionState:A_,useOptimistic:function(r){var s=fn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=np.bind(null,ke,!0,o),o.dispatch=s,[r,s]},useMemoCache:Gd,useCacheRefresh:function(){return fn().memoizedState=QA.bind(null,ke)},useEffectEvent:function(r){var s=fn(),o={impl:r};return s.memoizedState=o,function(){if((Ye&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},rp={readContext:Yt,use:th,useCallback:M_,useContext:Yt,useEffect:Xd,useImperativeHandle:U_,useInsertionEffect:N_,useLayoutEffect:P_,useMemo:V_,useReducer:nh,useRef:O_,useState:function(){return nh(ri)},useDebugValue:Jd,useDeferredValue:function(r,s){var o=wt();return L_(o,tt.memoizedState,r,s)},useTransition:function(){var r=nh(ri)[0],s=wt().memoizedState;return[typeof r=="boolean"?r:Gl(r),s]},useSyncExternalStore:d_,useId:q_,useHostTransitionStatus:tp,useFormState:R_,useActionState:R_,useOptimistic:function(r,s){var o=wt();return v_(o,tt,r,s)},useMemoCache:Gd,useCacheRefresh:$_};rp.useEffectEvent=D_;var Q_={readContext:Yt,use:th,useCallback:M_,useContext:Yt,useEffect:Xd,useImperativeHandle:U_,useInsertionEffect:N_,useLayoutEffect:P_,useMemo:V_,useReducer:Qd,useRef:O_,useState:function(){return Qd(ri)},useDebugValue:Jd,useDeferredValue:function(r,s){var o=wt();return tt===null?Zd(o,r,s):L_(o,tt.memoizedState,r,s)},useTransition:function(){var r=Qd(ri)[0],s=wt().memoizedState;return[typeof r=="boolean"?r:Gl(r),s]},useSyncExternalStore:d_,useId:q_,useHostTransitionStatus:tp,useFormState:I_,useActionState:I_,useOptimistic:function(r,s){var o=wt();return tt!==null?v_(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:$_};Q_.useEffectEvent=D_;function ip(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:w({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var sp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=On(),f=Hi(u);f.payload=s,o!=null&&(f.callback=o),s=Fi(r,f,u),s!==null&&(vn(s,r,u),ql(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=On(),f=Hi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Fi(r,f,u),s!==null&&(vn(s,r,u),ql(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=On(),u=Hi(o);u.tag=2,s!=null&&(u.callback=s),s=Fi(r,u,o),s!==null&&(vn(s,r,o),ql(s,r,o))}};function Y_(r,s,o,u,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,v):s.prototype&&s.prototype.isPureReactComponent?!xl(o,u)||!xl(f,m):!0}function W_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&sp.enqueueReplaceState(s,s.state,null)}function sa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=w({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function X_(r){Vc(r)}function J_(r){console.error(r)}function Z_(r){Vc(r)}function ah(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function ev(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ap(r,s,o){return o=Hi(o),o.tag=3,o.payload={element:null},o.callback=function(){ah(r,s)},o}function tv(r){return r=Hi(r),r.tag=3,r}function nv(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){ev(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){ev(s,o,u),typeof f!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function WA(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&eo(s,o,f,!0),o=An.current,o!==null){switch(o.tag){case 31:case 13:return Fn===null?_h():o.alternate===null&&gt===0&&(gt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Kc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Dp(r,u,f)),!1;case 22:return o.flags|=65536,u===Kc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Dp(r,u,f)),!1}throw Error(i(435,o.tag))}return Dp(r,u,f),_h(),!1}if(ze)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Ad&&(r=Error(i(422),{cause:u}),Vl(zn(r,o)))):(u!==Ad&&(s=Error(i(423),{cause:u}),Vl(zn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=zn(u,o),f=ap(r.stateNode,u,f),Md(r,f),gt!==4&&(gt=2)),!1;var m=Error(i(520),{cause:u});if(m=zn(m,o),nu===null?nu=[m]:nu.push(m),gt!==4&&(gt=2),s===null)return!0;u=zn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=ap(o.stateNode,u,r),Md(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xi===null||!Xi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=tv(f),nv(f,r,o,u),Md(o,f),!1}o=o.return}while(o!==null);return!1}var op=Error(i(461)),kt=!1;function Wt(r,s,o,u){s.child=r===null?a_(s,null,o,u):ra(s,r.child,o,u)}function rv(r,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Zs(s),u=qd(r,s,o,v,m,f),T=$d(),r!==null&&!kt?(Hd(r,s,f),ii(r,s,f)):(ze&&T&&bd(s),s.flags|=1,Wt(r,s,u,f),s.child)}function iv(r,s,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Ed(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,sv(r,s,m,u,f)):(r=zc(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!mp(r,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(v,u)&&r.ref===s.ref)return ii(r,s,f)}return s.flags|=1,r=Jr(m,u),r.ref=s.ref,r.return=s,s.child=r}function sv(r,s,o,u,f){if(r!==null){var m=r.memoizedProps;if(xl(m,u)&&r.ref===s.ref)if(kt=!1,s.pendingProps=u=m,mp(r,f))(r.flags&131072)!==0&&(kt=!0);else return s.lanes=r.lanes,ii(r,s,f)}return lp(r,s,o,u,f)}function av(r,s,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=s.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return ov(r,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Fc(s,m!==null?m.cachePool:null),m!==null?u_(s,m):Ld(),c_(s);else return u=s.lanes=536870912,ov(r,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Fc(s,m.cachePool),u_(s,m),Ki(),s.memoizedState=null):(r!==null&&Fc(s,null),Ld(),Ki());return Wt(r,s,f,o),s.child}function Yl(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ov(r,s,o,u,f){var m=Nd();return m=m===null?null:{parent:It._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},r!==null&&Fc(s,null),Ld(),c_(s),r!==null&&eo(r,s,u,!0),s.childLanes=f,null}function oh(r,s){return s=uh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function lv(r,s,o){return ra(s,r.child,null,o),r=oh(s,s.pendingProps),r.flags|=2,Rn(s),s.memoizedState=null,r}function XA(r,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(ze){if(u.mode==="hidden")return r=oh(s,u),s.lanes=536870912,Yl(null,r);if(Bd(s),(r=ot)?(r=EE(r,Hn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ji!==null?{id:Ur,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Fy(r),o.return=s,s.child=o,Qt=s,ot=null)):r=null,r===null)throw zi(s);return s.lanes=536870912,null}return oh(s,u)}var m=r.memoizedState;if(m!==null){var v=m.dehydrated;if(Bd(s),f)if(s.flags&256)s.flags&=-257,s=lv(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(kt||eo(r,s,o,!1),f=(o&r.childLanes)!==0,kt||f){if(u=it,u!==null&&(v=gl(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,Ys(r,v),vn(u,r,v),op;_h(),s=lv(r,s,o)}else r=m.treeContext,ot=Gn(v.nextSibling),Qt=s,ze=!0,Bi=null,Hn=!1,r!==null&&Qy(s,r),s=oh(s,u),s.flags|=4096;return s}return r=Jr(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function lh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function lp(r,s,o,u,f){return Zs(s),o=qd(r,s,o,u,void 0,f),u=$d(),r!==null&&!kt?(Hd(r,s,f),ii(r,s,f)):(ze&&u&&bd(s),s.flags|=1,Wt(r,s,o,f),s.child)}function uv(r,s,o,u,f,m){return Zs(s),s.updateQueue=null,o=f_(s,u,o,f),h_(r),u=$d(),r!==null&&!kt?(Hd(r,s,m),ii(r,s,m)):(ze&&u&&bd(s),s.flags|=1,Wt(r,s,o,m),s.child)}function cv(r,s,o,u,f){if(Zs(s),s.stateNode===null){var m=Wa,v=o.contextType;typeof v=="object"&&v!==null&&(m=Yt(v)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},xd(s),v=o.contextType,m.context=typeof v=="object"&&v!==null?Yt(v):Wa,m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(ip(s,o,v,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&sp.enqueueReplaceState(m,m.state,null),Hl(s,u,m,f),$l(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var T=s.memoizedProps,D=sa(o,T);m.props=D;var q=m.context,X=o.contextType;v=Wa,typeof X=="object"&&X!==null&&(v=Yt(X));var ee=o.getDerivedStateFromProps;X=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||q!==v)&&W_(s,m,u,v),$i=!1;var F=s.memoizedState;m.state=F,Hl(s,u,m,f),$l(),q=s.memoizedState,T||F!==q||$i?(typeof ee=="function"&&(ip(s,o,ee,u),q=s.memoizedState),(D=$i||Y_(s,o,D,u,F,q,v))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=q),m.props=u,m.state=q,m.context=v,u=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Ud(r,s),v=s.memoizedProps,X=sa(o,v),m.props=X,ee=s.pendingProps,F=m.context,q=o.contextType,D=Wa,typeof q=="object"&&q!==null&&(D=Yt(q)),T=o.getDerivedStateFromProps,(q=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ee||F!==D)&&W_(s,m,u,D),$i=!1,F=s.memoizedState,m.state=F,Hl(s,u,m,f),$l();var Y=s.memoizedState;v!==ee||F!==Y||$i||r!==null&&r.dependencies!==null&&$c(r.dependencies)?(typeof T=="function"&&(ip(s,o,T,u),Y=s.memoizedState),(X=$i||Y_(s,o,X,u,F,Y,D)||r!==null&&r.dependencies!==null&&$c(r.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Y,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&F===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&F===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Y),m.props=u,m.state=Y,m.context=D,u=X):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&F===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&F===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,lh(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=ra(s,r.child,null,f),s.child=ra(s,null,o,f)):Wt(r,s,o,f),s.memoizedState=m.state,r=s.child):r=ii(r,s,f),r}function hv(r,s,o,u){return Xs(),s.flags|=256,Wt(r,s,o,u),s.child}var up={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cp(r){return{baseLanes:r,cachePool:e_()}}function hp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=In),r}function fv(r,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=r!==null&&r.memoizedState===null?!1:(Et.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,r===null){if(ze){if(f?Gi(s):Ki(),(r=ot)?(r=EE(r,Hn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ji!==null?{id:Ur,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Fy(r),o.return=s,s.child=o,Qt=s,ot=null)):r=null,r===null)throw zi(s);return Kp(r)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,f?(Ki(),f=s.mode,T=uh({mode:"hidden",children:T},f),u=Ws(u,f,o,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=cp(o),u.childLanes=hp(r,v,o),s.memoizedState=up,Yl(null,u)):(Gi(s),fp(s,T))}var D=r.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)s.flags&256?(Gi(s),s.flags&=-257,s=dp(r,s,o)):s.memoizedState!==null?(Ki(),s.child=r.child,s.flags|=128,s=null):(Ki(),T=u.fallback,f=s.mode,u=uh({mode:"visible",children:u.children},f),T=Ws(T,f,o,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,ra(s,r.child,null,o),u=s.child,u.memoizedState=cp(o),u.childLanes=hp(r,v,o),s.memoizedState=up,s=Yl(null,u));else if(Gi(s),Kp(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var q=v.dgst;v=q,u=Error(i(419)),u.stack="",u.digest=v,Vl({value:u,source:null,stack:null}),s=dp(r,s,o)}else if(kt||eo(r,s,o,!1),v=(o&r.childLanes)!==0,kt||v){if(v=it,v!==null&&(u=gl(v,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Ys(r,u),vn(v,r,u),op;Gp(T)||_h(),s=dp(r,s,o)}else Gp(T)?(s.flags|=192,s.child=r.child,s=null):(r=D.treeContext,ot=Gn(T.nextSibling),Qt=s,ze=!0,Bi=null,Hn=!1,r!==null&&Qy(s,r),s=fp(s,u.children),s.flags|=4096);return s}return f?(Ki(),T=u.fallback,f=s.mode,D=r.child,q=D.sibling,u=Jr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,q!==null?T=Jr(q,T):(T=Ws(T,f,o,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,Yl(null,u),u=s.child,T=r.child.memoizedState,T===null?T=cp(o):(f=T.cachePool,f!==null?(D=It._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=e_(),T={baseLanes:T.baseLanes|o,cachePool:f}),u.memoizedState=T,u.childLanes=hp(r,v,o),s.memoizedState=up,Yl(r.child,u)):(Gi(s),o=r.child,r=o.sibling,o=Jr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(v=s.deletions,v===null?(s.deletions=[r],s.flags|=16):v.push(r)),s.child=o,s.memoizedState=null,o)}function fp(r,s){return s=uh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function uh(r,s){return r=Sn(22,r,null,s),r.lanes=0,r}function dp(r,s,o){return ra(s,r.child,null,o),r=fp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function dv(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Id(r.return,s,o)}function pp(r,s,o,u,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function pv(r,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=Et.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,ae(Et,v),Wt(r,s,u,o),u=ze?Ml:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&dv(r,o,s);else if(r.tag===19)dv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Xc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),pp(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Xc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}pp(s,!0,o,null,m,u);break;case"together":pp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ii(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Wi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(eo(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Jr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Jr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function mp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&$c(r)))}function JA(r,s,o){switch(s.tag){case 3:Vt(s,s.stateNode.containerInfo),qi(s,It,r.memoizedState.cache),Xs();break;case 27:case 5:Ds(s);break;case 4:Vt(s,s.stateNode.containerInfo);break;case 10:qi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Gi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?fv(r,s,o):(Gi(s),r=ii(r,s,o),r!==null?r.sibling:null);Gi(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(eo(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return pv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Et,Et.current),u)break;return null;case 22:return s.lanes=0,av(r,s,o,s.pendingProps);case 24:qi(s,It,r.memoizedState.cache)}return ii(r,s,o)}function mv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)kt=!0;else{if(!mp(r,o)&&(s.flags&128)===0)return kt=!1,JA(r,s,o);kt=(r.flags&131072)!==0}else kt=!1,ze&&(s.flags&1048576)!==0&&Ky(s,Ml,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=ta(s.elementType),s.type=r,typeof r=="function")Ed(r)?(u=sa(r,u),s.tag=1,s=cv(null,s,r,u,o)):(s.tag=0,s=lp(null,s,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===ie){s.tag=11,s=rv(null,s,r,u,o);break e}else if(f===I){s.tag=14,s=iv(null,s,r,u,o);break e}}throw s=ve(r)||r,Error(i(306,s,""))}}return s;case 0:return lp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=sa(u,s.pendingProps),cv(r,s,u,f,o);case 3:e:{if(Vt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Ud(r,s),Hl(s,u,null,o);var v=s.memoizedState;if(u=v.cache,qi(s,It,u),u!==m.cache&&Od(s,[It],o,!0),$l(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=hv(r,s,u,o);break e}else if(u!==f){f=zn(Error(i(424)),s),Vl(f),s=hv(r,s,u,o);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,ot=Gn(r.firstChild),Qt=s,ze=!0,Bi=null,Hn=!0,o=a_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Xs(),u===f){s=ii(r,s,o);break e}Wt(r,s,u,o)}s=s.child}return s;case 26:return lh(r,s),r===null?(o=RE(s.type,null,s.pendingProps,null))?s.memoizedState=o:ze||(o=s.type,r=s.pendingProps,u=Ah(De.current).createElement(o),u[At]=s,u[qt]=r,Xt(u,o,r),Rt(u),s.stateNode=u):s.memoizedState=RE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ds(s),r===null&&ze&&(u=s.stateNode=bE(s.type,s.pendingProps,De.current),Qt=s,Hn=!0,f=ot,ts(s.type)?(Qp=f,ot=Gn(u.firstChild)):ot=f),Wt(r,s,s.pendingProps.children,o),lh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ze&&((f=u=ot)&&(u=IR(u,s.type,s.pendingProps,Hn),u!==null?(s.stateNode=u,Qt=s,ot=Gn(u.firstChild),Hn=!1,f=!0):f=!1),f||zi(s)),Ds(s),f=s.type,m=s.pendingProps,v=r!==null?r.memoizedProps:null,u=m.children,$p(f,m)?u=null:v!==null&&$p(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=qd(r,s,$A,null,null,o),cu._currentValue=f),lh(r,s),Wt(r,s,u,o),s.child;case 6:return r===null&&ze&&((r=o=ot)&&(o=OR(o,s.pendingProps,Hn),o!==null?(s.stateNode=o,Qt=s,ot=null,r=!0):r=!1),r||zi(s)),null;case 13:return fv(r,s,o);case 4:return Vt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ra(s,null,u,o):Wt(r,s,u,o),s.child;case 11:return rv(r,s,s.type,s.pendingProps,o);case 7:return Wt(r,s,s.pendingProps,o),s.child;case 8:return Wt(r,s,s.pendingProps.children,o),s.child;case 12:return Wt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,qi(s,s.type,u.value),Wt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Zs(s),f=Yt(f),u=u(f),s.flags|=1,Wt(r,s,u,o),s.child;case 14:return iv(r,s,s.type,s.pendingProps,o);case 15:return sv(r,s,s.type,s.pendingProps,o);case 19:return pv(r,s,o);case 31:return XA(r,s,o);case 22:return av(r,s,o,s.pendingProps);case 24:return Zs(s),u=Yt(It),r===null?(f=Nd(),f===null&&(f=it,m=kd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},xd(s),qi(s,It,f)):((r.lanes&o)!==0&&(Ud(r,s),Hl(s,null,null,o),$l()),f=r.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),qi(s,It,u)):(u=m.cache,qi(s,It,u),u!==f.cache&&Od(s,[It],o,!0))),Wt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function si(r){r.flags|=4}function gp(r,s,o,u,f){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(qv())r.flags|=8192;else throw na=Kc,Pd}else r.flags&=-16777217}function gv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!DE(s))if(qv())r.flags|=8192;else throw na=Kc,Pd}function ch(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?gc():536870912,r.lanes|=s,fo|=s)}function Wl(r,s){if(!ze)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function ZA(r,s,o){var u=s.pendingProps;switch(Sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ti(It),ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Za(s)?si(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rd())),lt(s),null;case 26:var f=s.type,m=s.memoizedState;return r===null?(si(s),m!==null?(lt(s),gv(s,m)):(lt(s),gp(s,f,null,u,o))):m?m!==r.memoizedState?(si(s),lt(s),gv(s,m)):(lt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&si(s),lt(s),gp(s,f,r,u,o)),null;case 27:if(Da(s),o=De.current,f=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return lt(s),null}r=fe.current,Za(s)?Yy(s):(r=bE(f,u,o),s.stateNode=r,si(s))}return lt(s),null;case 5:if(Da(s),f=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return lt(s),null}if(m=fe.current,Za(s))Yy(s);else{var v=Ah(De.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[At]=s,m[qt]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(Xt(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&si(s)}}return lt(s),gp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=De.current,Za(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=Qt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[At]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||fE(r.nodeValue,o)),r||zi(s,!0)}else r=Ah(r).createTextNode(u),r[At]=s,s.stateNode=r}return lt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=Za(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[At]=s}else Xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),r=!1}else o=Rd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Rn(s),s):(Rn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return lt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Za(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[At]=s}else Xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),f=!1}else f=Rd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Rn(s),s):(Rn(s),null)}return Rn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),ch(s,s.updateQueue),lt(s),null);case 4:return ct(),r===null&&Lp(s.stateNode.containerInfo),lt(s),null;case 10:return ti(s.type),lt(s),null;case 19:if(Z(Et),u=s.memoizedState,u===null)return lt(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)Wl(u,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Xc(r),m!==null){for(s.flags|=128,Wl(u,!1),r=m.updateQueue,s.updateQueue=r,ch(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Hy(o,r),o=o.sibling;return ae(Et,Et.current&1|2),ze&&Zr(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&cn()>mh&&(s.flags|=128,f=!0,Wl(u,!1),s.lanes=4194304)}else{if(!f)if(r=Xc(m),r!==null){if(s.flags|=128,f=!0,r=r.updateQueue,s.updateQueue=r,ch(s,r),Wl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!ze)return lt(s),null}else 2*cn()-u.renderingStartTime>mh&&o!==536870912&&(s.flags|=128,f=!0,Wl(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(r=u.last,r!==null?r.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=cn(),r.sibling=null,o=Et.current,ae(Et,f?o&1|2:o&1),ze&&Zr(s,u.treeForkCount),r):(lt(s),null);case 22:case 23:return Rn(s),jd(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),o=s.updateQueue,o!==null&&ch(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&Z(ea),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ti(It),lt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function eR(r,s){switch(Sd(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ti(It),ct(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Da(s),null;case 31:if(s.memoizedState!==null){if(Rn(s),s.alternate===null)throw Error(i(340));Xs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Rn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Xs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Z(Et),null;case 4:return ct(),null;case 10:return ti(s.type),null;case 22:case 23:return Rn(s),jd(),r!==null&&Z(ea),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ti(It),null;case 25:return null;default:return null}}function yv(r,s){switch(Sd(s),s.tag){case 3:ti(It),ct();break;case 26:case 27:case 5:Da(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&Rn(s);break;case 13:Rn(s);break;case 19:Z(Et);break;case 10:ti(s.type);break;case 22:case 23:Rn(s),jd(),r!==null&&Z(ea);break;case 24:ti(It)}}function Xl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(T){Ze(s,s.return,T)}}function Qi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=s;var D=o,q=T;try{q()}catch(X){Ze(f,D,X)}}}u=u.next}while(u!==m)}}catch(X){Ze(s,s.return,X)}}function _v(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{l_(s,o)}catch(u){Ze(r,r.return,u)}}}function vv(r,s,o){o.props=sa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ze(r,s,u)}}function Jl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Ze(r,s,f)}}function Vr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Ze(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ze(r,s,f)}else o.current=null}function Ev(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Ze(r,r.return,f)}}function yp(r,s,o){try{var u=r.stateNode;TR(u,r.type,o,s),u[qt]=s}catch(f){Ze(r,r.return,f)}}function wv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ts(r.type)||r.tag===4}function _p(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||wv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ts(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=nr));else if(u!==4&&(u===27&&ts(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(vp(r,s,o),r=r.sibling;r!==null;)vp(r,s,o),r=r.sibling}function hh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ts(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(hh(r,s,o),r=r.sibling;r!==null;)hh(r,s,o),r=r.sibling}function Tv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xt(s,u,o),s[At]=r,s[qt]=o}catch(m){Ze(r,r.return,m)}}var ai=!1,Dt=!1,Ep=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function tR(r,s){if(r=r.containerInfo,zp=Nh,r=Uy(r),dd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,T=-1,D=-1,q=0,X=0,ee=r,F=null;t:for(;;){for(var Y;ee!==o||f!==0&&ee.nodeType!==3||(T=v+f),ee!==m||u!==0&&ee.nodeType!==3||(D=v+u),ee.nodeType===3&&(v+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)F=ee,ee=Y;for(;;){if(ee===r)break t;if(F===o&&++q===f&&(T=v),F===m&&++X===u&&(D=v),(Y=ee.nextSibling)!==null)break;ee=F,F=ee.parentNode}ee=Y}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(qp={focusedElem:r,selectionRange:o},Nh=!1,Ht=s;Ht!==null;)if(s=Ht,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Ht=r;else for(;Ht!==null;){switch(s=Ht,m=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var de=sa(o.type,f);r=u.getSnapshotBeforeUpdate(de,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){Ze(o,o.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Fp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Fp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ht=r;break}Ht=s.return}}function Sv(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:li(r,o),u&4&&Xl(5,o);break;case 1:if(li(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(v){Ze(o,o.return,v)}else{var f=sa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(o,o.return,v)}}u&64&&_v(o),u&512&&Jl(o,o.return);break;case 3:if(li(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{l_(r,s)}catch(v){Ze(o,o.return,v)}}break;case 27:s===null&&u&4&&Tv(o);case 26:case 5:li(r,o),s===null&&u&4&&Ev(o),u&512&&Jl(o,o.return);break;case 12:li(r,o);break;case 31:li(r,o),u&4&&Cv(r,o);break;case 13:li(r,o),u&4&&Iv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=cR.bind(null,o),kR(r,o))));break;case 22:if(u=o.memoizedState!==null||ai,!u){s=s!==null&&s.memoizedState!==null||Dt,f=ai;var m=Dt;ai=u,(Dt=s)&&!m?ui(r,o,(o.subtreeFlags&8772)!==0):li(r,o),ai=f,Dt=m}break;case 30:break;default:li(r,o)}}function Av(r){var s=r.alternate;s!==null&&(r.alternate=null,Av(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ma(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ft=null,mn=!1;function oi(r,s,o){for(o=o.child;o!==null;)Rv(r,s,o),o=o.sibling}function Rv(r,s,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:Dt||Vr(o,s),oi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Vr(o,s);var u=ft,f=mn;ts(o.type)&&(ft=o.stateNode,mn=!1),oi(r,s,o),ou(o.stateNode),ft=u,mn=f;break;case 5:Dt||Vr(o,s);case 6:if(u=ft,f=mn,ft=null,oi(r,s,o),ft=u,mn=f,ft!==null)if(mn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(m){Ze(o,s,m)}else try{ft.removeChild(o.stateNode)}catch(m){Ze(o,s,m)}break;case 18:ft!==null&&(mn?(r=ft,_E(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),wo(r)):_E(ft,o.stateNode));break;case 4:u=ft,f=mn,ft=o.stateNode.containerInfo,mn=!0,oi(r,s,o),ft=u,mn=f;break;case 0:case 11:case 14:case 15:Qi(2,o,s),Dt||Qi(4,o,s),oi(r,s,o);break;case 1:Dt||(Vr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&vv(o,s,u)),oi(r,s,o);break;case 21:oi(r,s,o);break;case 22:Dt=(u=Dt)||o.memoizedState!==null,oi(r,s,o),Dt=u;break;default:oi(r,s,o)}}function Cv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{wo(r)}catch(o){Ze(s,s.return,o)}}}function Iv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{wo(r)}catch(o){Ze(s,s.return,o)}}function nR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new bv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new bv),s;default:throw Error(i(435,r.tag))}}function fh(r,s){var o=nR(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=hR.bind(null,r,u);u.then(f,f)}})}function gn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ts(T.type)){ft=T.stateNode,mn=!1;break e}break;case 5:ft=T.stateNode,mn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,mn=!0;break e}T=T.return}if(ft===null)throw Error(i(160));Rv(m,v,f),ft=null,mn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ov(s,r),s=s.sibling}var lr=null;function Ov(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:gn(s,r),yn(r),u&4&&(Qi(3,r,r.return),Xl(3,r),Qi(5,r,r.return));break;case 1:gn(s,r),yn(r),u&512&&(Dt||o===null||Vr(o,o.return)),u&64&&ai&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=lr;if(gn(s,r),yn(r),u&512&&(Dt||o===null||Vr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[br]||m[At]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Xt(m,u,o),m[At]=r,Rt(m),u=m;break e;case"link":var v=OE("link","href",f).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;case"meta":if(v=OE("meta","content",f).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[At]=r,Rt(m),u=m}r.stateNode=u}else kE(f,r.type,r.stateNode);else r.stateNode=IE(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?kE(f,r.type,r.stateNode):IE(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&yp(r,r.memoizedProps,o.memoizedProps)}break;case 27:gn(s,r),yn(r),u&512&&(Dt||o===null||Vr(o,o.return)),o!==null&&u&4&&yp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(gn(s,r),yn(r),u&512&&(Dt||o===null||Vr(o,o.return)),r.flags&32){f=r.stateNode;try{pn(f,"")}catch(de){Ze(r,r.return,de)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,yp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Ep=!0);break;case 6:if(gn(s,r),yn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(de){Ze(r,r.return,de)}}break;case 3:if(Ih=null,f=lr,lr=Rh(s.containerInfo),gn(s,r),lr=f,yn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{wo(s.containerInfo)}catch(de){Ze(r,r.return,de)}Ep&&(Ep=!1,kv(r));break;case 4:u=lr,lr=Rh(r.stateNode.containerInfo),gn(s,r),yn(r),lr=u;break;case 12:gn(s,r),yn(r);break;case 31:gn(s,r),yn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fh(r,u)));break;case 13:gn(s,r),yn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ph=cn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fh(r,u)));break;case 22:f=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=ai,X=Dt;if(ai=q||f,Dt=X||D,gn(s,r),Dt=X,ai=q,yn(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||ai||Dt||aa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(m=D.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,F=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(de){Ze(D,D.return,de)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(de){Ze(D,D.return,de)}}}else if(s.tag===18){if(o===null){D=s;try{var Y=D.stateNode;f?vE(Y,!0):vE(D.stateNode,!1)}catch(de){Ze(D,D.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,fh(r,o))));break;case 19:gn(s,r),yn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fh(r,u)));break;case 30:break;case 21:break;default:gn(s,r),yn(r)}}function yn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(wv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=_p(r);hh(r,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(pn(v,""),o.flags&=-33);var T=_p(r);hh(r,T,v);break;case 3:case 4:var D=o.stateNode.containerInfo,q=_p(r);vp(r,q,D);break;default:throw Error(i(161))}}catch(X){Ze(r,r.return,X)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function kv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;kv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function li(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sv(r,s.alternate,s),s=s.sibling}function aa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Qi(4,s,s.return),aa(s);break;case 1:Vr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&vv(s,s.return,o),aa(s);break;case 27:ou(s.stateNode);case 26:case 5:Vr(s,s.return),aa(s);break;case 22:s.memoizedState===null&&aa(s);break;case 30:aa(s);break;default:aa(s)}r=r.sibling}}function ui(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:ui(f,m,o),Xl(4,m);break;case 1:if(ui(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Ze(u,u.return,q)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)o_(D[f],T)}catch(q){Ze(u,u.return,q)}}o&&v&64&&_v(m),Jl(m,m.return);break;case 27:Tv(m);case 26:case 5:ui(f,m,o),o&&u===null&&v&4&&Ev(m),Jl(m,m.return);break;case 12:ui(f,m,o);break;case 31:ui(f,m,o),o&&v&4&&Cv(f,m);break;case 13:ui(f,m,o),o&&v&4&&Iv(f,m);break;case 22:m.memoizedState===null&&ui(f,m,o),Jl(m,m.return);break;case 30:break;default:ui(f,m,o)}s=s.sibling}}function wp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ll(o))}function Tp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ll(r))}function ur(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dv(r,s,o,u),s=s.sibling}function Dv(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ur(r,s,o,u),f&2048&&Xl(9,s);break;case 1:ur(r,s,o,u);break;case 3:ur(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ll(r)));break;case 12:if(f&2048){ur(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){Ze(s,s.return,D)}}else ur(r,s,o,u);break;case 31:ur(r,s,o,u);break;case 13:ur(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?ur(r,s,o,u):Zl(r,s):m._visibility&2?ur(r,s,o,u):(m._visibility|=2,uo(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&wp(v,s);break;case 24:ur(r,s,o,u),f&2048&&Tp(s.alternate,s);break;default:ur(r,s,o,u)}}function uo(r,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=r,v=s,T=o,D=u,q=v.flags;switch(v.tag){case 0:case 11:case 15:uo(m,v,T,D,f),Xl(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?uo(m,v,T,D,f):Zl(m,v):(X._visibility|=2,uo(m,v,T,D,f)),f&&q&2048&&wp(v.alternate,v);break;case 24:uo(m,v,T,D,f),f&&q&2048&&Tp(v.alternate,v);break;default:uo(m,v,T,D,f)}s=s.sibling}}function Zl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Zl(o,u),f&2048&&wp(u.alternate,u);break;case 24:Zl(o,u),f&2048&&Tp(u.alternate,u);break;default:Zl(o,u)}s=s.sibling}}var eu=8192;function co(r,s,o){if(r.subtreeFlags&eu)for(r=r.child;r!==null;)Nv(r,s,o),r=r.sibling}function Nv(r,s,o){switch(r.tag){case 26:co(r,s,o),r.flags&eu&&r.memoizedState!==null&&qR(o,lr,r.memoizedState,r.memoizedProps);break;case 5:co(r,s,o);break;case 3:case 4:var u=lr;lr=Rh(r.stateNode.containerInfo),co(r,s,o),lr=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=eu,eu=16777216,co(r,s,o),eu=u):co(r,s,o));break;default:co(r,s,o)}}function Pv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function tu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,Uv(u,r)}Pv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xv(r),r=r.sibling}function xv(r){switch(r.tag){case 0:case 11:case 15:tu(r),r.flags&2048&&Qi(9,r,r.return);break;case 3:tu(r);break;case 12:tu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,dh(r)):tu(r);break;default:tu(r)}}function dh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,Uv(u,r)}Pv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Qi(8,s,s.return),dh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,dh(s));break;default:dh(s)}r=r.sibling}}function Uv(r,s){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:Qi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ll(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=r;Ht!==null;){u=Ht;var f=u.sibling,m=u.return;if(Av(u),u===o){Ht=null;break e}if(f!==null){f.return=m,Ht=f;break e}Ht=m}}}var rR={getCacheForType:function(r){var s=Yt(It),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Yt(It).controller.signal}},iR=typeof WeakMap=="function"?WeakMap:Map,Ye=0,it=null,xe=null,Me=0,Je=0,Cn=null,Yi=!1,ho=!1,bp=!1,ci=0,gt=0,Wi=0,oa=0,Sp=0,In=0,fo=0,nu=null,_n=null,Ap=!1,ph=0,Mv=0,mh=1/0,gh=null,Xi=null,jt=0,Ji=null,po=null,hi=0,Rp=0,Cp=null,Vv=null,ru=0,Ip=null;function On(){return(Ye&2)!==0&&Me!==0?Me&-Me:Q.T!==null?xp():yc()}function Lv(){if(In===0)if((Me&536870912)===0||ze){var r=xs;xs<<=1,(xs&3932160)===0&&(xs=262144),In=r}else In=536870912;return r=An.current,r!==null&&(r.flags|=32),In}function vn(r,s,o){(r===it&&(Je===2||Je===9)||r.cancelPendingCommit!==null)&&(mo(r,0),Zi(r,Me,In,!1)),Us(r,o),((Ye&2)===0||r!==it)&&(r===it&&((Ye&2)===0&&(oa|=o),gt===4&&Zi(r,Me,In,!1)),Lr(r))}function jv(r,s,o){if((Ye&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Zn(r,s),f=u?oR(r,s):kp(r,s,!0),m=u;do{if(f===0){ho&&!u&&Zi(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!sR(o)){f=kp(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=r;f=nu;var D=T.current.memoizedState.isDehydrated;if(D&&(mo(T,v).flags|=256),v=kp(T,v,!1),v!==2){if(bp&&!D){T.errorRecoveryDisabledLanes|=m,oa|=m,f=4;break e}m=_n,_n=f,m!==null&&(_n===null?_n=m:_n.push.apply(_n,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){mo(r,0),Zi(r,s,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Zi(u,s,In,!Yi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=ph+300-cn(),10<f)){if(Zi(u,s,In,!Yi),Er(u,0,!0)!==0)break e;hi=s,u.timeoutHandle=gE(Bv.bind(null,u,o,_n,gh,Ap,s,In,oa,fo,Yi,m,"Throttled",-0,0),f);break e}Bv(u,o,_n,gh,Ap,s,In,oa,fo,Yi,m,null,-0,0)}}break}while(!0);Lr(r)}function Bv(r,s,o,u,f,m,v,T,D,q,X,ee,F,Y){if(r.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},Nv(s,m,ee);var de=(m&62914560)===m?ph-cn():(m&4194048)===m?Mv-cn():0;if(de=$R(ee,de),de!==null){hi=m,r.cancelPendingCommit=de(Qv.bind(null,r,s,m,o,u,f,v,T,D,X,ee,null,F,Y)),Zi(r,m,v,!q);return}}Qv(r,s,m,o,u,f,v,T,D)}function sR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!bn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zi(r,s,o,u){s&=~Sp,s&=~oa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var m=31-_t(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Ms(r,o,s)}function yh(){return(Ye&6)===0?(iu(0),!1):!0}function Op(){if(xe!==null){if(Je===0)var r=xe.return;else r=xe,ei=Js=null,Fd(r),io=null,Bl=0,r=xe;for(;r!==null;)yv(r.alternate,r),r=r.return;xe=null}}function mo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,AR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),hi=0,Op(),it=r,xe=o=Jr(r.current,null),Me=s,Je=0,Cn=null,Yi=!1,ho=Zn(r,s),bp=!1,fo=In=Sp=oa=Wi=gt=0,_n=nu=null,Ap=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-_t(u),m=1<<f;s|=r[f],u&=~m}return ci=s,Lc(),o}function zv(r,s){ke=null,Q.H=Ql,s===ro||s===Gc?(s=r_(),Je=3):s===Pd?(s=r_(),Je=4):Je=s===op?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,xe===null&&(gt=1,ah(r,zn(s,r.current)))}function qv(){var r=An.current;return r===null?!0:(Me&4194048)===Me?Fn===null:(Me&62914560)===Me||(Me&536870912)!==0?r===Fn:!1}function $v(){var r=Q.H;return Q.H=Ql,r===null?Ql:r}function Hv(){var r=Q.A;return Q.A=rR,r}function _h(){gt=4,Yi||(Me&4194048)!==Me&&An.current!==null||(ho=!0),(Wi&134217727)===0&&(oa&134217727)===0||it===null||Zi(it,Me,In,!1)}function kp(r,s,o){var u=Ye;Ye|=2;var f=$v(),m=Hv();(it!==r||Me!==s)&&(gh=null,mo(r,s)),s=!1;var v=gt;e:do try{if(Je!==0&&xe!==null){var T=xe,D=Cn;switch(Je){case 8:Op(),v=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var q=Je;if(Je=0,Cn=null,go(r,T,D,q),o&&ho){v=0;break e}break;default:q=Je,Je=0,Cn=null,go(r,T,D,q)}}aR(),v=gt;break}catch(X){zv(r,X)}while(!0);return s&&r.shellSuspendCounter++,ei=Js=null,Ye=u,Q.H=f,Q.A=m,xe===null&&(it=null,Me=0,Lc()),v}function aR(){for(;xe!==null;)Fv(xe)}function oR(r,s){var o=Ye;Ye|=2;var u=$v(),f=Hv();it!==r||Me!==s?(gh=null,mh=cn()+500,mo(r,s)):ho=Zn(r,s);e:do try{if(Je!==0&&xe!==null){s=xe;var m=Cn;t:switch(Je){case 1:Je=0,Cn=null,go(r,s,m,1);break;case 2:case 9:if(t_(m)){Je=0,Cn=null,Gv(s);break}s=function(){Je!==2&&Je!==9||it!==r||(Je=7),Lr(r)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:t_(m)?(Je=0,Cn=null,Gv(s)):(Je=0,Cn=null,go(r,s,m,7));break;case 5:var v=null;switch(xe.tag){case 26:v=xe.memoizedState;case 5:case 27:var T=xe;if(v?DE(v):T.stateNode.complete){Je=0,Cn=null;var D=T.sibling;if(D!==null)xe=D;else{var q=T.return;q!==null?(xe=q,vh(q)):xe=null}break t}}Je=0,Cn=null,go(r,s,m,5);break;case 6:Je=0,Cn=null,go(r,s,m,6);break;case 8:Op(),gt=6;break e;default:throw Error(i(462))}}lR();break}catch(X){zv(r,X)}while(!0);return ei=Js=null,Q.H=u,Q.A=f,Ye=o,xe!==null?0:(it=null,Me=0,Lc(),gt)}function lR(){for(;xe!==null&&!ad();)Fv(xe)}function Fv(r){var s=mv(r.alternate,r,ci);r.memoizedProps=r.pendingProps,s===null?vh(r):xe=s}function Gv(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=uv(o,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=uv(o,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:Fd(s);default:yv(o,s),s=xe=Hy(s,ci),s=mv(o,s,ci)}r.memoizedProps=r.pendingProps,s===null?vh(r):xe=s}function go(r,s,o,u){ei=Js=null,Fd(s),io=null,Bl=0;var f=s.return;try{if(WA(r,f,s,o,Me)){gt=1,ah(r,zn(o,r.current)),xe=null;return}}catch(m){if(f!==null)throw xe=f,m;gt=1,ah(r,zn(o,r.current)),xe=null;return}s.flags&32768?(ze||u===1?r=!0:ho||(Me&536870912)!==0?r=!1:(Yi=r=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),Kv(s,r)):vh(s)}function vh(r){var s=r;do{if((s.flags&32768)!==0){Kv(s,Yi);return}r=s.return;var o=ZA(s.alternate,s,ci);if(o!==null){xe=o;return}if(s=s.sibling,s!==null){xe=s;return}xe=s=r}while(s!==null);gt===0&&(gt=5)}function Kv(r,s){do{var o=eR(r.alternate,r);if(o!==null){o.flags&=32767,xe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){xe=r;return}xe=r=o}while(r!==null);gt=6,xe=null}function Qv(r,s,o,u,f,m,v,T,D){r.cancelPendingCommit=null;do Eh();while(jt!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=_d,ud(r,o,m,v,T,D),r===it&&(xe=it=null,Me=0),po=s,Ji=r,hi=o,Rp=m,Cp=f,Vv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fR(Oi,function(){return Zv(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,f=re.p,re.p=2,v=Ye,Ye|=4;try{tR(r,s,o)}finally{Ye=v,re.p=f,Q.T=u}}jt=1,Yv(),Wv(),Xv()}}function Yv(){if(jt===1){jt=0;var r=Ji,s=po,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=re.p;re.p=2;var f=Ye;Ye|=4;try{Ov(s,r);var m=qp,v=Uy(r.containerInfo),T=m.focusedElem,D=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&xy(T.ownerDocument.documentElement,T)){if(D!==null&&dd(T)){var q=D.start,X=D.end;if(X===void 0&&(X=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(X,T.value.length);else{var ee=T.ownerDocument||document,F=ee&&ee.defaultView||window;if(F.getSelection){var Y=F.getSelection(),de=T.textContent.length,Ee=Math.min(D.start,de),rt=D.end===void 0?Ee:Math.min(D.end,de);!Y.extend&&Ee>rt&&(v=rt,rt=Ee,Ee=v);var L=Py(T,Ee),x=Py(T,rt);if(L&&x&&(Y.rangeCount!==1||Y.anchorNode!==L.node||Y.anchorOffset!==L.offset||Y.focusNode!==x.node||Y.focusOffset!==x.offset)){var z=ee.createRange();z.setStart(L.node,L.offset),Y.removeAllRanges(),Ee>rt?(Y.addRange(z),Y.extend(x.node,x.offset)):(z.setEnd(x.node,x.offset),Y.addRange(z))}}}}for(ee=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var J=ee[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Nh=!!zp,qp=zp=null}finally{Ye=f,re.p=u,Q.T=o}}r.current=s,jt=2}}function Wv(){if(jt===2){jt=0;var r=Ji,s=po,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=re.p;re.p=2;var f=Ye;Ye|=4;try{Sv(r,s.alternate,s)}finally{Ye=f,re.p=u,Q.T=o}}jt=3}}function Xv(){if(jt===4||jt===3){jt=0,cc();var r=Ji,s=po,o=hi,u=Vv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?jt=5:(jt=0,po=Ji=null,Jv(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Xi=null),Qr(o),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,f=re.p,re.p=2,Q.T=null;try{for(var m=r.onRecoverableError,v=0;v<u.length;v++){var T=u[v];m(T.value,{componentStack:T.stack})}}finally{Q.T=s,re.p=f}}(hi&3)!==0&&Eh(),Lr(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===Ip?ru++:(ru=0,Ip=r):ru=0,iu(0)}}function Jv(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ll(s)))}function Eh(){return Yv(),Wv(),Xv(),Zv()}function Zv(){if(jt!==5)return!1;var r=Ji,s=Rp;Rp=0;var o=Qr(hi),u=Q.T,f=re.p;try{re.p=32>o?32:o,Q.T=null,o=Cp,Cp=null;var m=Ji,v=hi;if(jt=0,po=Ji=null,hi=0,(Ye&6)!==0)throw Error(i(331));var T=Ye;if(Ye|=4,xv(m.current),Dv(m,m.current,v,o),Ye=T,iu(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{re.p=f,Q.T=u,Jv(r,s)}}function eE(r,s,o){s=zn(o,s),s=ap(r.stateNode,s,2),r=Fi(r,s,2),r!==null&&(Us(r,2),Lr(r))}function Ze(r,s,o){if(r.tag===3)eE(r,r,o);else for(;s!==null;){if(s.tag===3){eE(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xi===null||!Xi.has(u))){r=zn(o,r),o=tv(2),u=Fi(s,o,2),u!==null&&(nv(o,u,s,r),Us(u,2),Lr(u));break}}s=s.return}}function Dp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new iR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(bp=!0,f.add(o),r=uR.bind(null,r,s,o),s.then(r,r))}function uR(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(Me&o)===o&&(gt===4||gt===3&&(Me&62914560)===Me&&300>cn()-ph?(Ye&2)===0&&mo(r,0):Sp|=o,fo===Me&&(fo=0)),Lr(r)}function tE(r,s){s===0&&(s=gc()),r=Ys(r,s),r!==null&&(Us(r,s),Lr(r))}function cR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),tE(r,o)}function hR(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),tE(r,o)}function fR(r,s){return Lt(r,s)}var wh=null,yo=null,Np=!1,Th=!1,Pp=!1,es=0;function Lr(r){r!==yo&&r.next===null&&(yo===null?wh=yo=r:yo=yo.next=r),Th=!0,Np||(Np=!0,pR())}function iu(r,s){if(!Pp&&Th){Pp=!0;do for(var o=!1,u=wh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-_t(42|r)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,sE(u,m))}else m=Me,m=Er(u,u===it?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Zn(u,m)||(o=!0,sE(u,m));u=u.next}while(o);Pp=!1}}function dR(){nE()}function nE(){Th=Np=!1;var r=0;es!==0&&SR()&&(r=es);for(var s=cn(),o=null,u=wh;u!==null;){var f=u.next,m=rE(u,s);m===0?(u.next=null,o===null?wh=f:o.next=f,f===null&&(yo=o)):(o=u,(r!==0||(m&3)!==0)&&(Th=!0)),u=f}jt!==0&&jt!==5||iu(r),es!==0&&(es=0)}function rE(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var v=31-_t(m),T=1<<v,D=f[v];D===-1?((T&o)===0||(T&u)!==0)&&(f[v]=ld(T,s)):D<=s&&(r.expiredLanes|=T),m&=~T}if(s=it,o=Me,o=Er(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Je===2||Je===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ii(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Zn(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Ii(u),Qr(o)){case 2:case 8:o=pl;break;case 32:o=Oi;break;case 268435456:o=hc;break;default:o=Oi}return u=iE.bind(null,r),o=Lt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Ii(u),r.callbackPriority=2,r.callbackNode=null,2}function iE(r,s){if(jt!==0&&jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Eh()&&r.callbackNode!==o)return null;var u=Me;return u=Er(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(jv(r,u,s),rE(r,cn()),r.callbackNode!=null&&r.callbackNode===o?iE.bind(null,r):null)}function sE(r,s){if(Eh())return null;jv(r,s,!0)}function pR(){RR(function(){(Ye&6)!==0?Lt(dl,dR):nE()})}function xp(){if(es===0){var r=to;r===0&&(r=_r,_r<<=1,(_r&261888)===0&&(_r=256)),es=r}return es}function aE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ba(""+r)}function oE(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function mR(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=aE((f[qt]||null).action),v=u.submitter;v&&(s=(s=v[qt]||null)?aE(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var T=new Dr("action","action",null,u,f);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(es!==0){var D=v?oE(f,v):new FormData(f);ep(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=v?oE(f,v):new FormData(f),ep(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var Up=0;Up<yd.length;Up++){var Mp=yd[Up],gR=Mp.toLowerCase(),yR=Mp[0].toUpperCase()+Mp.slice(1);or(gR,"on"+yR)}or(Ly,"onAnimationEnd"),or(jy,"onAnimationIteration"),or(By,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(PA,"onTransitionRun"),or(xA,"onTransitionStart"),or(UA,"onTransitionCancel"),or(zy,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function lE(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var v=u.length-1;0<=v;v--){var T=u[v],D=T.instance,q=T.currentTarget;if(T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=q;try{m(f)}catch(X){Vc(X)}f.currentTarget=null,m=D}else for(v=0;v<u.length;v++){if(T=u[v],D=T.instance,q=T.currentTarget,T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=q;try{m(f)}catch(X){Vc(X)}f.currentTarget=null,m=D}}}}function Ue(r,s){var o=s[Ua];o===void 0&&(o=s[Ua]=new Set);var u=r+"__bubble";o.has(u)||(uE(s,r,2,!1),o.add(u))}function Vp(r,s,o){var u=0;s&&(u|=4),uE(o,r,u,s)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Lp(r){if(!r[bh]){r[bh]=!0,yl.forEach(function(o){o!=="selectionchange"&&(_R.has(o)||Vp(o,!1,r),Vp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[bh]||(s[bh]=!0,Vp("selectionchange",!1,s))}}function uE(r,s,o,u){switch(LE(s)){case 2:var f=GR;break;case 8:f=KR;break;default:f=Zp}o=f.bind(null,s,o,r),f=void 0,!zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function jp(r,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=u.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Sr(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){u=m=v;continue e}T=T.parentNode}}u=u.return}Ui(function(){var q=m,X=Vn(o),ee=[];e:{var F=qy.get(r);if(F!==void 0){var Y=Dr,de=r;switch(r){case"keypress":if($s(o)===0)break e;case"keydown":case"keyup":Y=xc;break;case"focusin":de="focus",Y=Fs;break;case"focusout":de="blur",Y=Fs;break;case"beforeblur":case"afterblur":Y=Fs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Ly:case jy:case By:Y=Cc;break;case zy:Y=S;break;case"scroll":case"scrollend":Y=Ol;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=Ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Xr;break;case"toggle":case"beforetoggle":Y=Oe}var Ee=(s&4)!==0,rt=!Ee&&(r==="scroll"||r==="scrollend"),L=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var x=q,z;x!==null;){var J=x;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||L===null||(J=rr(x,L),J!=null&&Ee.push(au(x,J,z))),rt)break;x=x.return}0<Ee.length&&(F=new Y(F,de,null,o,X),ee.push({event:F,listeners:Ee}))}}if((s&7)===0){e:{if(F=r==="mouseover"||r==="pointerover",Y=r==="mouseout"||r==="pointerout",F&&o!==Rl&&(de=o.relatedTarget||o.fromElement)&&(Sr(de)||de[Tr]))break e;if((Y||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(de=o.relatedTarget||o.toElement,Y=q,de=de?Sr(de):null,de!==null&&(rt=l(de),Ee=de.tag,de!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(de=null)):(Y=null,de=q),Y!==de)){if(Ee=kl,J="onMouseLeave",L="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=Xr,J="onPointerLeave",L="onPointerEnter",x="pointer"),rt=Y==null?F:wn(Y),z=de==null?F:wn(de),F=new Ee(J,x+"leave",Y,o,X),F.target=rt,F.relatedTarget=z,J=null,Sr(X)===q&&(Ee=new Ee(L,x+"enter",de,o,X),Ee.target=z,Ee.relatedTarget=rt,J=Ee),rt=J,Y&&de)t:{for(Ee=vR,L=Y,x=de,z=0,J=L;J;J=Ee(J))z++;J=0;for(var ye=x;ye;ye=Ee(ye))J++;for(;0<z-J;)L=Ee(L),z--;for(;0<J-z;)x=Ee(x),J--;for(;z--;){if(L===x||x!==null&&L===x.alternate){Ee=L;break t}L=Ee(L),x=Ee(x)}Ee=null}else Ee=null;Y!==null&&cE(ee,F,Y,Ee,!1),de!==null&&rt!==null&&cE(ee,rt,de,Ee,!0)}}e:{if(F=q?wn(q):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var Fe=Cy;else if(Ay(F))if(Iy)Fe=kA;else{Fe=IA;var me=CA}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&ja(q.elementType)&&(Fe=Cy):Fe=OA;if(Fe&&(Fe=Fe(r,q))){Ry(ee,Fe,o,X);break e}me&&me(r,F,q),r==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&bl(F,"number",F.value)}switch(me=q?wn(q):window,r){case"focusin":(Ay(me)||me.contentEditable==="true")&&(Ka=me,pd=q,Ul=null);break;case"focusout":Ul=pd=Ka=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,My(ee,o,X);break;case"selectionchange":if(NA)break;case"keydown":case"keyup":My(ee,o,X)}var Ne;if(Qe)e:{switch(r){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ga?Gs(r,o)&&(Ve="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ve="onCompositionStart");Ve&&(xr&&o.locale!=="ko"&&(Ga||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ga&&(Ne=Il()):(kr=X,Cl="value"in kr?kr.value:kr.textContent,Ga=!0)),me=Sh(q,Ve),0<me.length&&(Ve=new Pr(Ve,r,null,o,X),ee.push({event:Ve,listeners:me}),Ne?Ve.data=Ne:(Ne=Fa(o),Ne!==null&&(Ve.data=Ne)))),(Ne=jn?bA(r,o):SA(r,o))&&(Ve=Sh(q,"onBeforeInput"),0<Ve.length&&(me=new Pr("onBeforeInput","beforeinput",null,o,X),ee.push({event:me,listeners:Ve}),me.data=Ne)),mR(ee,r,q,o,X)}lE(ee,s)})}function au(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Sh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=rr(r,o),f!=null&&u.unshift(au(r,f,m)),f=rr(r,s),f!=null&&u.push(au(r,f,m))),r.tag===3)return u;r=r.return}return[]}function vR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function cE(r,s,o,u,f){for(var m=s._reactName,v=[];o!==null&&o!==u;){var T=o,D=T.alternate,q=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||q===null||(D=q,f?(q=rr(o,m),q!=null&&v.unshift(au(o,q,D))):f||(q=rr(o,m),q!=null&&v.push(au(o,q,D)))),o=o.return}v.length!==0&&r.push({event:s,listeners:v})}var ER=/\r\n?/g,wR=/\u0000|\uFFFD/g;function hE(r){return(typeof r=="string"?r:""+r).replace(ER,`
`).replace(wR,"")}function fE(r,s){return s=hE(s),hE(r)===s}function nt(r,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||pn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&pn(r,""+u);break;case"className":Tn(r,"class",u);break;case"tabIndex":Tn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(r,o,u);break;case"style":Al(r,u,m);break;case"data":if(s!=="object"){Tn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ba(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",f.name,f,null),nt(r,s,"formEncType",f.formEncType,f,null),nt(r,s,"formMethod",f.formMethod,f,null),nt(r,s,"formTarget",f.formTarget,f,null)):(nt(r,s,"encType",f.encType,f,null),nt(r,s,"method",f.method,f,null),nt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ba(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=nr);break;case"onScroll":u!=null&&Ue("scroll",r);break;case"onScrollEnd":u!=null&&Ue("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Ba(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ue("beforetoggle",r),Ue("toggle",r),Va(r,"popover",u);break;case"xlinkActuate":Ct(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Va(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Sc.get(o)||o,Va(r,o,u))}}function Bp(r,s,o,u,f,m){switch(o){case"style":Al(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?pn(r,u):(typeof u=="number"||typeof u=="bigint")&&pn(r,""+u);break;case"onScroll":u!=null&&Ue("scroll",r);break;case"onScrollEnd":u!=null&&Ue("scrollend",r);break;case"onClick":u!=null&&(r.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_l.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[qt]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Va(r,o,u)}}}function Xt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",r),Ue("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,m,v,o,null)}}f&&nt(r,s,"srcSet",o.srcSet,o,null),u&&nt(r,s,"src",o.src,o,null);return;case"input":Ue("invalid",r);var T=m=v=f=null,D=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":v=X;break;case"checked":D=X;break;case"defaultChecked":q=X;break;case"value":m=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:nt(r,s,u,X,o,null)}}wc(r,m,T,D,q,v,f,!1);return;case"select":Ue("invalid",r),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:nt(r,s,f,T,o,null)}s=m,o=v,r.multiple=!!u,s!=null?Di(r,!!u,s,!1):o!=null&&Di(r,!!u,o,!0);return;case"textarea":Ue("invalid",r),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:nt(r,s,v,T,o,null)}Ni(r,u,f,m);return;case"option":for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null)&&(D==="selected"?r.selected=u&&typeof u!="function"&&typeof u!="symbol":nt(r,s,D,u,o,null));return;case"dialog":Ue("beforetoggle",r),Ue("toggle",r),Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":Ue("load",r);break;case"video":case"audio":for(u=0;u<su.length;u++)Ue(su[u],r);break;case"image":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"embed":case"source":case"link":Ue("error",r),Ue("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,q,u,o,null)}return;default:if(ja(s)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&Bp(r,s,X,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&nt(r,s,T,u,o,null))}function TR(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,D=null,q=null,X=null;for(Y in o){var ee=o[Y];if(o.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=ee;default:u.hasOwnProperty(Y)||nt(r,s,Y,null,u,ee)}}for(var F in u){var Y=u[F];if(ee=o[F],u.hasOwnProperty(F)&&(Y!=null||ee!=null))switch(F){case"type":m=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":X=Y;break;case"value":v=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==ee&&nt(r,s,F,Y,u,ee)}}La(r,v,T,D,q,X,m,f);return;case"select":Y=v=T=F=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:u.hasOwnProperty(m)||nt(r,s,m,null,u,D)}for(f in u)if(m=u[f],D=o[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":F=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==D&&nt(r,s,f,m,u,D)}s=T,o=v,u=Y,F!=null?Di(r,!!o,F,!1):!!u!=!!o&&(s!=null?Di(r,!!o,s,!0):Di(r,!!o,o?[]:"",!1));return;case"textarea":Y=F=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(r,s,T,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":F=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&nt(r,s,v,f,u,m)}Tc(r,F,Y);return;case"option":for(var de in o)F=o[de],o.hasOwnProperty(de)&&F!=null&&!u.hasOwnProperty(de)&&(de==="selected"?r.selected=!1:nt(r,s,de,null,u,F));for(D in u)F=u[D],Y=o[D],u.hasOwnProperty(D)&&F!==Y&&(F!=null||Y!=null)&&(D==="selected"?r.selected=F&&typeof F!="function"&&typeof F!="symbol":nt(r,s,D,F,u,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)F=o[Ee],o.hasOwnProperty(Ee)&&F!=null&&!u.hasOwnProperty(Ee)&&nt(r,s,Ee,null,u,F);for(q in u)if(F=u[q],Y=o[q],u.hasOwnProperty(q)&&F!==Y&&(F!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:nt(r,s,q,F,u,Y)}return;default:if(ja(s)){for(var rt in o)F=o[rt],o.hasOwnProperty(rt)&&F!==void 0&&!u.hasOwnProperty(rt)&&Bp(r,s,rt,void 0,u,F);for(X in u)F=u[X],Y=o[X],!u.hasOwnProperty(X)||F===Y||F===void 0&&Y===void 0||Bp(r,s,X,F,u,Y);return}}for(var L in o)F=o[L],o.hasOwnProperty(L)&&F!=null&&!u.hasOwnProperty(L)&&nt(r,s,L,null,u,F);for(ee in u)F=u[ee],Y=o[ee],!u.hasOwnProperty(ee)||F===Y||F==null&&Y==null||nt(r,s,ee,F,u,Y)}function dE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,T=f.duration;if(m&&T&&dE(v)){for(v=0,T=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],q=D.startTime;if(q>T)break;var X=D.transferSize,ee=D.initiatorType;X&&dE(ee)&&(D=D.responseEnd,v+=X*(D<T?1:(T-q)/(D-q)))}if(--u,s+=8*(m+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var zp=null,qp=null;function Ah(r){return r.nodeType===9?r:r.ownerDocument}function pE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mE(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function $p(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hp=null;function SR(){var r=window.event;return r&&r.type==="popstate"?r===Hp?!1:(Hp=r,!0):(Hp=null,!1)}var gE=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,yE=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof yE<"u"?function(r){return yE.resolve(null).then(r).catch(CR)}:gE;function CR(r){setTimeout(function(){throw r})}function ts(r){return r==="head"}function _E(r,s){var o=s,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),wo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")ou(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,ou(o);for(var m=o.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[br]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&ou(r.ownerDocument.body);o=f}while(o);wo(s)}function vE(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Fp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Fp(o),Ma(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function IR(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[br])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Gn(r.nextSibling),r===null)break}return null}function OR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Gn(r.nextSibling),r===null))return null;return r}function EE(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Gn(r.nextSibling),r===null))return null;return r}function Gp(r){return r.data==="$?"||r.data==="$~"}function Kp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function kR(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Gn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Qp=null;function wE(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Gn(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function TE(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function bE(r,s,o){switch(s=Ah(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ou(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ma(r)}var Kn=new Map,SE=new Set;function Rh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var fi=re.d;re.d={f:DR,r:NR,D:PR,C:xR,L:UR,m:MR,X:LR,S:VR,M:jR};function DR(){var r=fi.f(),s=yh();return r||s}function NR(r){var s=Mn(r);s!==null&&s.tag===5&&s.type==="form"?z_(s):fi.r(r)}var _o=typeof document>"u"?null:document;function AE(r,s,o){var u=_o;if(u&&typeof s=="string"&&s){var f=dn(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),SE.has(f)||(SE.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Xt(s,"link",r),Rt(s),u.head.appendChild(s)))}}function PR(r){fi.D(r),AE("dns-prefetch",r,null)}function xR(r,s){fi.C(r,s),AE("preconnect",r,s)}function UR(r,s,o){fi.L(r,s,o);var u=_o;if(u&&r&&s){var f='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+dn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+dn(o.imageSizes)+'"]')):f+='[href="'+dn(r)+'"]';var m=f;switch(s){case"style":m=vo(r);break;case"script":m=Eo(r)}Kn.has(m)||(r=w({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Kn.set(m,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(lu(m))||s==="script"&&u.querySelector(uu(m))||(s=u.createElement("link"),Xt(s,"link",r),Rt(s),u.head.appendChild(s)))}}function MR(r,s){fi.m(r,s);var o=_o;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+dn(u)+'"][href="'+dn(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Eo(r)}if(!Kn.has(m)&&(r=w({rel:"modulepreload",href:r},s),Kn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(uu(m)))return}u=o.createElement("link"),Xt(u,"link",r),Rt(u),o.head.appendChild(u)}}}function VR(r,s,o){fi.S(r,s,o);var u=_o;if(u&&r){var f=Ar(u).hoistableStyles,m=vo(r);s=s||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(lu(m)))T.loading=5;else{r=w({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Kn.get(m))&&Yp(r,o);var D=v=u.createElement("link");Rt(D),Xt(D,"link",r),D._p=new Promise(function(q,X){D.onload=q,D.onerror=X}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ch(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function LR(r,s){fi.X(r,s);var o=_o;if(o&&r){var u=Ar(o).hoistableScripts,f=Eo(r),m=u.get(f);m||(m=o.querySelector(uu(f)),m||(r=w({src:r,async:!0},s),(s=Kn.get(f))&&Wp(r,s),m=o.createElement("script"),Rt(m),Xt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function jR(r,s){fi.M(r,s);var o=_o;if(o&&r){var u=Ar(o).hoistableScripts,f=Eo(r),m=u.get(f);m||(m=o.querySelector(uu(f)),m||(r=w({src:r,async:!0,type:"module"},s),(s=Kn.get(f))&&Wp(r,s),m=o.createElement("script"),Rt(m),Xt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function RE(r,s,o,u){var f=(f=De.current)?Rh(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=vo(o.href),o=Ar(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=vo(o.href);var m=Ar(f).hoistableStyles,v=m.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,v),(m=f.querySelector(lu(r)))&&!m._p&&(v.instance=m,v.state.loading=5),Kn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Kn.set(r,o),m||BR(f,r,o,v.state))),s&&u===null)throw Error(i(528,""));return v}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Eo(o),o=Ar(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function vo(r){return'href="'+dn(r)+'"'}function lu(r){return'link[rel="stylesheet"]['+r+"]"}function CE(r){return w({},r,{"data-precedence":r.precedence,precedence:null})}function BR(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",o),Rt(s),r.head.appendChild(s))}function Eo(r){return'[src="'+dn(r)+'"]'}function uu(r){return"script[async]"+r}function IE(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+dn(o.href)+'"]');if(u)return s.instance=u,Rt(u),u;var f=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Rt(u),Xt(u,"style",f),Ch(u,o.precedence,r),s.instance=u;case"stylesheet":f=vo(o.href);var m=r.querySelector(lu(f));if(m)return s.state.loading|=4,s.instance=m,Rt(m),m;u=CE(o),(f=Kn.get(f))&&Yp(u,f),m=(r.ownerDocument||r).createElement("link"),Rt(m);var v=m;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),Xt(m,"link",u),s.state.loading|=4,Ch(m,o.precedence,r),s.instance=m;case"script":return m=Eo(o.src),(f=r.querySelector(uu(m)))?(s.instance=f,Rt(f),f):(u=o,(f=Kn.get(m))&&(u=w({},o),Wp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Rt(f),Xt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ch(u,o.precedence,r));return s.instance}function Ch(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Yp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Wp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ih=null;function OE(r,s,o){if(Ih===null){var u=new Map,f=Ih=new Map;f.set(o,u)}else f=Ih,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[br]||m[At]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=r+v;var T=u.get(v);T?T.push(m):u.set(v,[m])}}return u}function kE(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function zR(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function DE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function qR(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=vo(u.href),m=s.querySelector(lu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Oh.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=m,Rt(m);return}m=s.ownerDocument||s,u=CE(u),(f=Kn.get(f))&&Yp(u,f),m=m.createElement("link"),Rt(m);var v=m;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),Xt(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Oh.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Xp=0;function $R(r,s){return r.stylesheets&&r.count===0&&Dh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Dh(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+s);0<r.imgBytes&&Xp===0&&(Xp=62500*bR());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Dh(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Xp?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var kh=null;function Dh(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,kh=new Map,s.forEach(HR,r),kh=null,Oh.call(r))}function HR(r,s){if(!(s.state.loading&4)){var o=kh.get(r);if(o)var u=o.get(null);else{o=new Map,kh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=Oh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var cu={$$typeof:G,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function FR(r,s,o,u,f,m,v,T,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function NE(r,s,o,u,f,m,v,T,D,q,X,ee){return r=new FR(r,s,o,v,D,q,X,ee,T),s=1,m===!0&&(s|=24),m=Sn(3,null,null,s),r.current=m,m.stateNode=r,s=kd(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},xd(m),r}function PE(r){return r?(r=Wa,r):Wa}function xE(r,s,o,u,f,m){f=PE(f),u.context===null?u.context=f:u.pendingContext=f,u=Hi(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Fi(r,u,s),o!==null&&(vn(o,r,s),ql(o,r,s))}function UE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Jp(r,s){UE(r,s),(r=r.alternate)&&UE(r,s)}function ME(r){if(r.tag===13||r.tag===31){var s=Ys(r,67108864);s!==null&&vn(s,r,67108864),Jp(r,67108864)}}function VE(r){if(r.tag===13||r.tag===31){var s=On();s=Vs(s);var o=Ys(r,s);o!==null&&vn(o,r,s),Jp(r,s)}}var Nh=!0;function GR(r,s,o,u){var f=Q.T;Q.T=null;var m=re.p;try{re.p=2,Zp(r,s,o,u)}finally{re.p=m,Q.T=f}}function KR(r,s,o,u){var f=Q.T;Q.T=null;var m=re.p;try{re.p=8,Zp(r,s,o,u)}finally{re.p=m,Q.T=f}}function Zp(r,s,o,u){if(Nh){var f=em(u);if(f===null)jp(r,s,u,Ph,o),jE(r,u);else if(YR(f,r,s,o,u))u.stopPropagation();else if(jE(r,u),s&4&&-1<QR.indexOf(r)){for(;f!==null;){var m=Mn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=vr(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-_t(v);T.entanglements[1]|=D,v&=~D}Lr(m),(Ye&6)===0&&(mh=cn()+500,iu(0))}}break;case 31:case 13:T=Ys(m,2),T!==null&&vn(T,m,2),yh(),Jp(m,2)}if(m=em(u),m===null&&jp(r,s,u,Ph,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else jp(r,s,u,null,o)}}function em(r){return r=Vn(r),tm(r)}var Ph=null;function tm(r){if(Ph=null,r=Sr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=d(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ph=r,null}function LE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ps()){case dl:return 2;case pl:return 8;case Oi:case od:return 32;case hc:return 268435456;default:return 32}default:return 32}}var nm=!1,ns=null,rs=null,is=null,hu=new Map,fu=new Map,ss=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jE(r,s){switch(r){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":hu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(s.pointerId)}}function du(r,s,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Mn(s),s!==null&&ME(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function YR(r,s,o,u,f){switch(s){case"focusin":return ns=du(ns,r,s,o,u,f),!0;case"dragenter":return rs=du(rs,r,s,o,u,f),!0;case"mouseover":return is=du(is,r,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return hu.set(m,du(hu.get(m)||null,r,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,fu.set(m,du(fu.get(m)||null,r,s,o,u,f)),!0}return!1}function BE(r){var s=Sr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,er(r.priority,function(){VE(o)});return}}else if(s===31){if(s=d(o),s!==null){r.blockedOn=s,er(r.priority,function(){VE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function xh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=em(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Rl=u,o.target.dispatchEvent(u),Rl=null}else return s=Mn(o),s!==null&&ME(s),r.blockedOn=o,!1;s.shift()}return!0}function zE(r,s,o){xh(r)&&o.delete(s)}function WR(){nm=!1,ns!==null&&xh(ns)&&(ns=null),rs!==null&&xh(rs)&&(rs=null),is!==null&&xh(is)&&(is=null),hu.forEach(zE),fu.forEach(zE)}function Uh(r,s){r.blockedOn===s&&(r.blockedOn=null,nm||(nm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WR)))}var Mh=null;function qE(r){Mh!==r&&(Mh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mh===r&&(Mh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(tm(u||o)===null)continue;break}var m=Mn(o);m!==null&&(r.splice(s,3),s-=3,ep(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function wo(r){function s(D){return Uh(D,r)}ns!==null&&Uh(ns,r),rs!==null&&Uh(rs,r),is!==null&&Uh(is,r),hu.forEach(s),fu.forEach(s);for(var o=0;o<ss.length;o++){var u=ss[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ss.length&&(o=ss[0],o.blockedOn===null);)BE(o),o.blockedOn===null&&ss.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[qt]||null;if(typeof m=="function")v||qE(o);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[qt]||null)T=v.formAction;else if(tm(f)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),qE(o)}}}function $E(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function rm(r){this._internalRoot=r}Vh.prototype.render=rm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=On();xE(o,u,r,s,null,null)},Vh.prototype.unmount=rm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;xE(r.current,2,null,r,null,null),yh(),s[Tr]=null}};function Vh(r){this._internalRoot=r}Vh.prototype.unstable_scheduleHydration=function(r){if(r){var s=yc();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ss.length&&s!==0&&s<ss[o].priority;o++);ss.splice(o,0,r),o===0&&BE(r)}};var HE=e.version;if(HE!=="19.2.3")throw Error(i(527,HE,"19.2.3"));re.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=g(s),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var XR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Jn=Lh.inject(XR),Gt=Lh}catch{}}return mu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=X_,m=J_,v=Z_;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=NE(r,1,!1,null,null,o,u,null,f,m,v,$E),r[Tr]=s.current,Lp(r),new rm(s)},mu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",m=X_,v=J_,T=Z_,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=NE(r,1,!0,s,o??null,u,f,D,m,v,T,$E),s.context=PE(null),o=s.current,u=On(),u=Vs(u),f=Hi(u),f.callback=null,Fi(o,f,u),o=u,s.current.lanes=o,Us(s,o),Lr(s),r[Tr]=s.current,Lp(r),new Vh(s)},mu.version="19.2.3",mu}var ew;function oC(){if(ew)return am.exports;ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),am.exports=aC(),am.exports}var lC=oC();var tw="popstate";function uC(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Um("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Pu(a)}return hC(e,t,null,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cC(){return Math.random().toString(36).substring(2,10)}function nw(n,e){return{usr:n.state,key:n.key,idx:e}}function Um(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:t,key:e&&e.key||i||cC()}}function Pu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function hC(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function w(){d="POP";let P=_(),H=P==null?null:P-g;g=P,p&&p({action:d,location:k.location,delta:H})}function b(P,H){d="PUSH";let $=Um(k.location,P,H);g=_()+1;let G=nw($,g),ie=k.createHref($);try{c.pushState(G,"",ie)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;a.location.assign(ie)}l&&p&&p({action:d,location:k.location,delta:1})}function A(P,H){d="REPLACE";let $=Um(k.location,P,H);g=_();let G=nw($,g),ie=k.createHref($);c.replaceState(G,"",ie),l&&p&&p({action:d,location:k.location,delta:0})}function N(P){return fC(P)}let k={get action(){return d},get location(){return n(a,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(tw,w),p=P,()=>{a.removeEventListener(tw,w),p=null}},createHref(P){return e(a,P)},createURL:N,encodeLocation(P){let H=N(P);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:b,replace:A,go(P){return c.go(P)}};return k}function fC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),dt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Pu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function hT(n,e,t="/"){return dC(n,e,t,!1)}function dC(n,e,t,i){let a=typeof e=="string"?Jo(e):e,l=Ei(a.pathname||"/",t);if(l==null)return null;let c=fT(n);pC(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=AC(l);d=bC(c[p],g,i)}return d}function fT(n,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;dt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let w=yi([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(dt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),fT(c.children,e,b,w,p)),!(c.path==null&&!c.index)&&e.push({path:w,score:wC(w,c.index),routesMeta:b})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of dT(c.path))l(c,d,!0,p)}),e}function dT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=dT(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function pC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var mC=/^:[\w-]+$/,gC=3,yC=2,_C=1,vC=10,EC=-2,rw=n=>n==="*";function wC(n,e){let t=n.split("/"),i=t.length;return t.some(rw)&&(i+=EC),e&&(i+=yC),t.filter(a=>!rw(a)).reduce((a,l)=>a+(mC.test(l)?gC:l===""?_C:vC),i)}function TC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function bC(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),b=p.route;if(!w&&g&&t&&!i[i.length-1].route.index&&(w=ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:yi([l,w.pathname]),pathnameBase:OC(yi([l,w.pathnameBase])),route:b}),w.pathnameBase!=="/"&&(l=yi([l,w.pathnameBase]))}return c}function ff(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=SC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:w},b)=>{if(_==="*"){let N=d[b]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const A=d[b];return w&&!A?g[_]=void 0:g[_]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function SC(n,e=!1,t=!0){Wn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function AC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ei(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var pT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RC=n=>pT.test(n);function CC(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Jo(n):n,l;if(t)if(RC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Wn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=iw(t.substring(1),"/"):l=iw(t,e)}else l=e;return{pathname:l,search:kC(i),hash:DC(a)}}function iw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function cm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wg(n){let e=IC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Tg(n,e,t,i=!1){let a;typeof n=="string"?a=Jo(n):(a={...n},dt(!a.pathname||!a.pathname.includes("?"),cm("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),cm("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),cm("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),w-=1;a.pathname=b.join("/")}d=w>=0?e[w]:"/"}let p=CC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var yi=n=>n.join("/").replace(/\/\/+/g,"/"),OC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,NC=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function PC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function xC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var mT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gT(n,e){let t=n;if(typeof t!="string"||!pT.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(mT)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Ei(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{Wn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yT=["POST","PUT","PATCH","DELETE"];new Set(yT);var UC=["GET",...yT];new Set(UC);var Zo=W.createContext(null);Zo.displayName="DataRouter";var xf=W.createContext(null);xf.displayName="DataRouterState";var MC=W.createContext(!1),_T=W.createContext({isTransitioning:!1});_T.displayName="ViewTransition";var VC=W.createContext(new Map);VC.displayName="Fetchers";var LC=W.createContext(null);LC.displayName="Await";var xn=W.createContext(null);xn.displayName="Navigation";var Wu=W.createContext(null);Wu.displayName="Location";var Kr=W.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var bg=W.createContext(null);bg.displayName="RouteError";var vT="REACT_ROUTER_ERROR",jC="REDIRECT",BC="ROUTE_ERROR_RESPONSE";function zC(n){if(n.startsWith(`${vT}:${jC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function qC(n){if(n.startsWith(`${vT}:${BC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new NC(e.status,e.statusText,e.data)}catch{}}function $C(n,{relative:e}={}){dt(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=W.useContext(xn),{hash:a,pathname:l,search:c}=Xu(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:yi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function el(){return W.useContext(Wu)!=null}function Cs(){return dt(el(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(Wu).location}var ET="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wT(n){W.useContext(xn).static||W.useLayoutEffect(n)}function Uf(){let{isDataRoute:n}=W.useContext(Kr);return n?nI():HC()}function HC(){dt(el(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(Zo),{basename:e,navigator:t}=W.useContext(xn),{matches:i}=W.useContext(Kr),{pathname:a}=Cs(),l=JSON.stringify(wg(i)),c=W.useRef(!1);return wT(()=>{c.current=!0}),W.useCallback((p,g={})=>{if(Wn(c.current,ET),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=Tg(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:yi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}W.createContext(null);function Xu(n,{relative:e}={}){let{matches:t}=W.useContext(Kr),{pathname:i}=Cs(),a=JSON.stringify(wg(t));return W.useMemo(()=>Tg(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function FC(n,e){return TT(n,e)}function TT(n,e,t,i,a){dt(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=W.useContext(xn),{matches:c}=W.useContext(Kr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",w=d&&d.route;{let $=w&&w.path||"";ST(g,!w||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let b=Cs(),A;if(e){let $=typeof e=="string"?Jo(e):e;dt(_==="/"||$.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=b;let N=A.pathname||"/",k=N;if(_!=="/"){let $=_.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice($.length).join("/")}let P=hT(n,{pathname:k});Wn(w||P!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Wn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=WC(P&&P.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:yi([_,l.encodeLocation?l.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?_:yi([_,l.encodeLocation?l.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),c,t,i,a);return e&&H?W.createElement(Wu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},H):H}function GC(){let n=tI(),e=PC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:l},"ErrorBoundary")," or"," ",W.createElement("code",{style:l},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:a},t):null,c)}var KC=W.createElement(GC,null),bT=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=qC(n.digest);t&&(n=t)}let e=n!==void 0?W.createElement(Kr.Provider,{value:this.props.routeContext},W.createElement(bg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?W.createElement(QC,{error:n},e):e}};bT.contextType=MC;var hm=new WeakMap;function QC({children:n,error:e}){let{basename:t}=W.useContext(xn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=zC(e.digest);if(i){let a=hm.get(e);if(a)throw a;let l=gT(i.location,t);if(mT&&!hm.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw hm.set(e,c),c}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function YC({routeContext:n,match:e,children:t}){let i=W.useContext(Zo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Kr.Provider,{value:n},t)}function WC(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let _=l.findIndex(w=>w.route.id&&c?.[w.route.id]!==void 0);dt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<l.length;_++){let w=l[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=_),w.route.id){let{loaderData:b,errors:A}=t,N=w.route.loader&&!b.hasOwnProperty(w.route.id)&&(!A||A[w.route.id]===void 0);if(w.route.lazy||N){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(_,w)=>{i(_,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xC(t.matches),errorInfo:w})}:void 0;return l.reduceRight((_,w,b)=>{let A,N=!1,k=null,P=null;t&&(A=c&&w.route.id?c[w.route.id]:void 0,k=w.route.errorElement||KC,d&&(p<0&&b===0?(ST("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,P=null):p===b&&(N=!0,P=w.route.hydrateFallbackElement||null)));let H=e.concat(l.slice(0,b+1)),$=()=>{let G;return A?G=k:N?G=P:w.route.Component?G=W.createElement(w.route.Component,null):w.route.element?G=w.route.element:G=_,W.createElement(YC,{match:w,routeContext:{outlet:_,matches:H,isDataRoute:t!=null},children:G})};return t&&(w.route.ErrorBoundary||w.route.errorElement||b===0)?W.createElement(bT,{location:t.location,revalidation:t.revalidation,component:k,error:A,children:$(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:g}):$()},null)}function Sg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XC(n){let e=W.useContext(Zo);return dt(e,Sg(n)),e}function JC(n){let e=W.useContext(xf);return dt(e,Sg(n)),e}function ZC(n){let e=W.useContext(Kr);return dt(e,Sg(n)),e}function Ag(n){let e=ZC(n),t=e.matches[e.matches.length-1];return dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eI(){return Ag("useRouteId")}function tI(){let n=W.useContext(bg),e=JC("useRouteError"),t=Ag("useRouteError");return n!==void 0?n:e.errors?.[t]}function nI(){let{router:n}=XC("useNavigate"),e=Ag("useNavigate"),t=W.useRef(!1);return wT(()=>{t.current=!0}),W.useCallback(async(a,l={})=>{Wn(t.current,ET),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var sw={};function ST(n,e,t){!e&&!sw[n]&&(sw[n]=!0,Wn(!1,t))}W.memo(rI);function rI({routes:n,future:e,state:t,onError:i}){return TT(n,void 0,t,i,e)}function iI({to:n,replace:e,state:t,relative:i}){dt(el(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=W.useContext(xn);Wn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=W.useContext(Kr),{pathname:c}=Cs(),d=Uf(),p=Tg(n,wg(l),c,i==="path"),g=JSON.stringify(p);return W.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function Oo(n){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){dt(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=Jo(t));let{pathname:g="/",search:_="",hash:w="",state:b=null,key:A="default"}=t,N=W.useMemo(()=>{let k=Ei(g,d);return k==null?null:{location:{pathname:k,search:_,hash:w,state:b,key:A},navigationType:i}},[d,g,_,w,b,A,i]);return Wn(N!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${w}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:W.createElement(xn.Provider,{value:p},W.createElement(Wu.Provider,{children:e,value:N}))}function aI({children:n,location:e}){return FC(Mm(n),e)}function Mm(n,e=[]){let t=[];return W.Children.forEach(n,(i,a)=>{if(!W.isValidElement(i))return;let l=[...e,a];if(i.type===W.Fragment){t.push.apply(t,Mm(i.props.children,l));return}dt(i.type===Oo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Mm(i.props.children,l)),t.push(c)}),t}var Zh="get",ef="application/x-www-form-urlencoded";function Mf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function oI(n){return Mf(n)&&n.tagName.toLowerCase()==="button"}function lI(n){return Mf(n)&&n.tagName.toLowerCase()==="form"}function uI(n){return Mf(n)&&n.tagName.toLowerCase()==="input"}function cI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hI(n,e){return n.button===0&&(!e||e==="_self")&&!cI(n)}var jh=null;function fI(){if(jh===null)try{new FormData(document.createElement("form"),0),jh=!1}catch{jh=!0}return jh}var dI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fm(n){return n!=null&&!dI.has(n)?(Wn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ef}"`),null):n}function pI(n,e){let t,i,a,l,c;if(lI(n)){let d=n.getAttribute("action");i=d?Ei(d,e):null,t=n.getAttribute("method")||Zh,a=fm(n.getAttribute("enctype"))||ef,l=new FormData(n)}else if(oI(n)||uI(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(i=p?Ei(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Zh,a=fm(n.getAttribute("formenctype"))||fm(d.getAttribute("enctype"))||ef,l=new FormData(d,n),!fI()){let{name:g,type:_,value:w}=n;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,w)}}else{if(Mf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zh,i=null,a=ef,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mI(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&Ei(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function gI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _I(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await gI(l,t);return c.links?c.links():[]}return[]}));return TI(i.flat(1).filter(yI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function aw(n,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function vI(n,e,{includeHydrateFallback:t}={}){return EI(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function EI(n){return[...new Set(n)]}function wI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function TI(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(wI(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function AT(){let n=W.useContext(Zo);return Rg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function bI(){let n=W.useContext(xf);return Rg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Cg=W.createContext(void 0);Cg.displayName="FrameworkContext";function RT(){let n=W.useContext(Cg);return Rg(n,"You must render this element inside a <HydratedRouter> element"),n}function SI(n,e){let t=W.useContext(Cg),[i,a]=W.useState(!1),[l,c]=W.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:w}=e,b=W.useRef(null);W.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let k=H=>{H.forEach($=>{c($.isIntersecting)})},P=new IntersectionObserver(k,{threshold:.5});return b.current&&P.observe(b.current),()=>{P.disconnect()}}},[n]),W.useEffect(()=>{if(i){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[i]);let A=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:gu(d,A),onBlur:gu(p,N),onMouseEnter:gu(g,A),onMouseLeave:gu(_,N),onTouchStart:gu(w,A)}]:[!1,b,{}]}function gu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function AI({page:n,...e}){let{router:t}=AT(),i=W.useMemo(()=>hT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?W.createElement(CI,{page:n,matches:i,...e}):null}function RI(n){let{manifest:e,routeModules:t}=RT(),[i,a]=W.useState([]);return W.useEffect(()=>{let l=!1;return _I(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function CI({page:n,matches:e,...t}){let i=Cs(),{future:a,manifest:l,routeModules:c}=RT(),{basename:d}=AT(),{loaderData:p,matches:g}=bI(),_=W.useMemo(()=>aw(n,e,g,l,i,"data"),[n,e,g,l,i]),w=W.useMemo(()=>aw(n,e,g,l,i,"assets"),[n,e,g,l,i]),b=W.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let k=new Set,P=!1;if(e.forEach($=>{let G=l.routes[$.route.id];!G||!G.hasLoader||(!_.some(ie=>ie.route.id===$.route.id)&&$.route.id in p&&c[$.route.id]?.shouldRevalidate||G.hasClientLoader?P=!0:k.add($.route.id))}),k.size===0)return[];let H=mI(n,d,a.unstable_trailingSlashAwareDataRequests,"data");return P&&k.size>0&&H.searchParams.set("_routes",e.filter($=>k.has($.route.id)).map($=>$.route.id).join(",")),[H.pathname+H.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,i,l,_,e,n,c]),A=W.useMemo(()=>vI(w,l),[w,l]),N=RI(w);return W.createElement(W.Fragment,null,b.map(k=>W.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),A.map(k=>W.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),N.map(({key:k,link:P})=>W.createElement("link",{key:k,nonce:t.nonce,...P})))}function II(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var OI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OI&&(window.__reactRouterVersion="7.12.0")}catch{}function kI({basename:n,children:e,unstable_useTransitions:t,window:i}){let a=W.useRef();a.current==null&&(a.current=uC({window:i,v5Compat:!0}));let l=a.current,[c,d]=W.useState({action:l.action,location:l.location}),p=W.useCallback(g=>{t===!1?d(g):W.startTransition(()=>d(g))},[t]);return W.useLayoutEffect(()=>l.listen(p),[l,p]),W.createElement(sI,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var CT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IT=W.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:b,...A},N){let{basename:k,unstable_useTransitions:P}=W.useContext(xn),H=typeof g=="string"&&CT.test(g),$=gT(g,k);g=$.to;let G=$C(g,{relative:a}),[ie,pe,le]=SI(i,A),I=xI(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:w,unstable_defaultShouldRevalidate:b,unstable_useTransitions:P});function C(V){e&&e(V),V.defaultPrevented||I(V)}let O=W.createElement("a",{...A,...le,href:$.absoluteURL||G,onClick:$.isExternal||l?e:C,ref:II(N,pe),target:p,"data-discover":!H&&t==="render"?"true":void 0});return ie&&!H?W.createElement(W.Fragment,null,O,W.createElement(AI,{page:G})):O});IT.displayName="Link";var DI=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let w=Xu(c,{relative:g.relative}),b=Cs(),A=W.useContext(xf),{navigator:N,basename:k}=W.useContext(xn),P=A!=null&&jI(w)&&d===!0,H=N.encodeLocation?N.encodeLocation(w).pathname:w.pathname,$=b.pathname,G=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||($=$.toLowerCase(),G=G?G.toLowerCase():null,H=H.toLowerCase()),G&&k&&(G=Ei(G,k)||G);const ie=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let pe=$===H||!a&&$.startsWith(H)&&$.charAt(ie)==="/",le=G!=null&&(G===H||!a&&G.startsWith(H)&&G.charAt(H.length)==="/"),I={isActive:pe,isPending:le,isTransitioning:P},C=pe?e:void 0,O;typeof i=="function"?O=i(I):O=[i,pe?"active":null,le?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(I):l;return W.createElement(IT,{...g,"aria-current":C,className:O,ref:_,style:V,to:c,viewTransition:d},typeof p=="function"?p(I):p)});DI.displayName="NavLink";var NI=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Zh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:b,...A},N)=>{let{unstable_useTransitions:k}=W.useContext(xn),P=VI(),H=LI(d,{relative:g}),$=c.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&CT.test(d),ie=pe=>{if(p&&p(pe),pe.defaultPrevented)return;pe.preventDefault();let le=pe.nativeEvent.submitter,I=le?.getAttribute("formmethod")||c,C=()=>P(le||pe.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:b});k&&t!==!1?W.startTransition(()=>C()):C()};return W.createElement("form",{ref:N,method:$,action:H,onSubmit:i?p:ie,...A,"data-discover":!G&&n==="render"?"true":void 0})});NI.displayName="Form";function PI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OT(n){let e=W.useContext(Zo);return dt(e,PI(n)),e}function xI(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=Uf(),_=Cs(),w=Xu(n,{relative:l});return W.useCallback(b=>{if(hI(b,e)){b.preventDefault();let A=t!==void 0?t:Pu(_)===Pu(w),N=()=>g(n,{replace:A,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?W.startTransition(()=>N()):N()}},[_,g,w,t,i,e,n,a,l,c,d,p])}var UI=0,MI=()=>`__${String(++UI)}__`;function VI(){let{router:n}=OT("useSubmit"),{basename:e}=W.useContext(xn),t=eI(),i=n.fetch,a=n.navigate;return W.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:_,body:w}=pI(l,e);if(c.navigate===!1){let b=c.fetcherKey||MI();await i(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:w,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:w,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function LI(n,{relative:e}={}){let{basename:t}=W.useContext(xn),i=W.useContext(Kr);dt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Xu(n||".",{relative:e})},c=Cs();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(w=>w).forEach(w=>d.append("index",w));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:yi([t,l.pathname])),Pu(l)}function jI(n,{relative:e}={}){let t=W.useContext(_T);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=OT("useViewTransitionState"),a=Xu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ei(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ei(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ff(a.pathname,c)!=null||ff(a.pathname,l)!=null}const BI=()=>{};var ow={};const kT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},zI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},DT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,_=l>>2,w=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,A=g&63;p||(A=64,c||(b=64)),i.push(t[_],t[w],t[b],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const w=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||w==null)throw new qI;const b=l<<2|d>>4;if(i.push(b),g!==64){const A=d<<4&240|g>>2;if(i.push(A),w!==64){const N=g<<6&192|w;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(n){const e=kT(n);return DT.encodeByteArray(e,!0)},df=function(n){return $I(n).replace(/\./g,"")},NT=function(n){try{return DT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const FI=()=>HI().__FIREBASE_DEFAULTS__,GI=()=>{if(typeof process>"u"||typeof ow>"u")return;const n=ow.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NT(n[1]);return e&&JSON.parse(e)},Vf=()=>{try{return BI()||FI()||GI()||KI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PT=n=>Vf()?.emulatorHosts?.[n],QI=n=>{const e=PT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xT=()=>Vf()?.config,UT=n=>Vf()?.[`_${n}`];let YI=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MT(n){return(await fetch(n,{credentials:"include"})).ok}function WI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[df(JSON.stringify(t)),df(JSON.stringify(c)),""].join(".")}const Au={};function XI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?n.emulator.push(e):n.prod.push(e);return n}function JI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let lw=!1;function VT(n,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||Au[n]===e||Au[n]||lw)return;Au[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=XI().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{lw=!0,c()},b}function _(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function w(){const b=JI(i),A=t("text"),N=document.getElementById(A)||document.createElement("span"),k=t("learnmore"),P=document.getElementById(k)||document.createElement("a"),H=t("preprendIcon"),$=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),_(P,k);const ie=g();p($,H),G.append($,N,P,ie),document.body.appendChild(G)}l?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function e1(){const n=Vf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i1(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function s1(){return!e1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a1(){try{return typeof indexedDB=="object"}catch{return!1}}function o1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const l1="FirebaseError";class Ai extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=l1,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}}class Ju{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?u1(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ai(a,d,i)}}function u1(n,e){return n.replace(c1,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const c1=/\{\$([^}]+)}/g;function h1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(uw(l)&&uw(c)){if(!wa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function uw(n){return n!==null&&typeof n=="object"}function Zu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _u(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function f1(n,e){const t=new d1(n,e);return t.subscribe.bind(t)}class d1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=dm),a.error===void 0&&(a.error=dm),a.complete===void 0&&(a.complete=dm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dm(){}function nn(n){return n&&n._delegate?n._delegate:n}class Ta{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ca="[DEFAULT]";class m1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new YI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y1(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:g1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g1(n){return n===ca?void 0:n}function y1(n){return n.instantiationMode==="EAGER"}class _1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new m1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const v1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},E1=Le.INFO,w1={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},T1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=w1[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ig{constructor(e){this.name=e,this._logLevel=E1,this._logHandler=T1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const b1=(n,e)=>e.some(t=>n instanceof t);let cw,hw;function S1(){return cw||(cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A1(){return hw||(hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LT=new WeakMap,Vm=new WeakMap,jT=new WeakMap,pm=new WeakMap,Og=new WeakMap;function R1(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ms(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&LT.set(t,n)}).catch(()=>{}),Og.set(e,n),e}function C1(n){if(Vm.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Vm.set(n,e)}let Lm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function I1(n){Lm=n(Lm)}function O1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(mm(this),e,...t);return jT.set(i,e.sort?e.sort():[e]),ms(i)}:A1().includes(n)?function(...e){return n.apply(mm(this),e),ms(LT.get(this))}:function(...e){return ms(n.apply(mm(this),e))}}function k1(n){return typeof n=="function"?O1(n):(n instanceof IDBTransaction&&C1(n),b1(n,S1())?new Proxy(n,Lm):n)}function ms(n){if(n instanceof IDBRequest)return R1(n);if(pm.has(n))return pm.get(n);const e=k1(n);return e!==n&&(pm.set(n,e),Og.set(e,n)),e}const mm=n=>Og.get(n);function D1(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ms(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ms(c.result),p.oldVersion,p.newVersion,ms(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const N1=["get","getKey","getAll","getAllKeys","count"],P1=["put","add","delete","clear"],gm=new Map;function fw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=P1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||N1.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return gm.set(e,l),l}I1(n=>({...n,get:(e,t,i)=>fw(e,t)||n.get(e,t,i),has:(e,t)=>!!fw(e,t)||n.has(e,t)}));class x1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(U1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function U1(n){return n.getComponent()?.type==="VERSION"}const jm="@firebase/app",dw="0.14.6";const wi=new Ig("@firebase/app"),M1="@firebase/app-compat",V1="@firebase/analytics-compat",L1="@firebase/analytics",j1="@firebase/app-check-compat",B1="@firebase/app-check",z1="@firebase/auth",q1="@firebase/auth-compat",$1="@firebase/database",H1="@firebase/data-connect",F1="@firebase/database-compat",G1="@firebase/functions",K1="@firebase/functions-compat",Q1="@firebase/installations",Y1="@firebase/installations-compat",W1="@firebase/messaging",X1="@firebase/messaging-compat",J1="@firebase/performance",Z1="@firebase/performance-compat",eO="@firebase/remote-config",tO="@firebase/remote-config-compat",nO="@firebase/storage",rO="@firebase/storage-compat",iO="@firebase/firestore",sO="@firebase/ai",aO="@firebase/firestore-compat",oO="firebase",lO="12.6.0";const Bm="[DEFAULT]",uO={[jm]:"fire-core",[M1]:"fire-core-compat",[L1]:"fire-analytics",[V1]:"fire-analytics-compat",[B1]:"fire-app-check",[j1]:"fire-app-check-compat",[z1]:"fire-auth",[q1]:"fire-auth-compat",[$1]:"fire-rtdb",[H1]:"fire-data-connect",[F1]:"fire-rtdb-compat",[G1]:"fire-fn",[K1]:"fire-fn-compat",[Q1]:"fire-iid",[Y1]:"fire-iid-compat",[W1]:"fire-fcm",[X1]:"fire-fcm-compat",[J1]:"fire-perf",[Z1]:"fire-perf-compat",[eO]:"fire-rc",[tO]:"fire-rc-compat",[nO]:"fire-gcs",[rO]:"fire-gcs-compat",[iO]:"fire-fst",[aO]:"fire-fst-compat",[sO]:"fire-vertex","fire-js":"fire-js",[oO]:"fire-js-all"};const pf=new Map,cO=new Map,zm=new Map;function pw(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $o(n){const e=n.name;if(zm.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,n);for(const t of pf.values())pw(t,n);for(const t of cO.values())pw(t,n);return!0}function kg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nn(n){return n==null?!1:n.settings!==void 0}const hO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new Ju("app","Firebase",hO);class fO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}const nl=lO;function BT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Bm,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw gs.create("bad-app-name",{appName:String(a)});if(t||(t=xT()),!t)throw gs.create("no-options");const l=pf.get(a);if(l){if(wa(t,l.options)&&wa(i,l.config))return l;throw gs.create("duplicate-app",{appName:a})}const c=new _1(a);for(const p of zm.values())c.addComponent(p);const d=new fO(t,i,c);return pf.set(a,d),d}function zT(n=Bm){const e=pf.get(n);if(!e&&n===Bm&&xT())return BT();if(!e)throw gs.create("no-app",{appName:n});return e}function ys(n,e,t){let i=uO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(c.join(" "));return}$o(new Ta(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const dO="firebase-heartbeat-database",pO=1,xu="firebase-heartbeat-store";let ym=null;function qT(){return ym||(ym=D1(dO,pO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(n=>{throw gs.create("idb-open",{originalErrorMessage:n.message})})),ym}async function mO(n){try{const t=(await qT()).transaction(xu),i=await t.objectStore(xu).get($T(n));return await t.done,i}catch(e){if(e instanceof Ai)wi.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e?.message});wi.warn(t.message)}}}async function mw(n,e){try{const i=(await qT()).transaction(xu,"readwrite");await i.objectStore(xu).put(e,$T(n)),await i.done}catch(t){if(t instanceof Ai)wi.warn(t.message);else{const i=gs.create("idb-set",{originalErrorMessage:t?.message});wi.warn(i.message)}}}function $T(n){return`${n.name}!${n.options.appId}`}const gO=1024,yO=30;class _O{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>yO){const a=wO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gw(),{heartbeatsToSend:t,unsentEntries:i}=vO(this._heartbeatsCache.heartbeats),a=df(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return wi.warn(e),""}}}function gw(){return new Date().toISOString().substring(0,10)}function vO(n,e=gO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),yw(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),yw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class EO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a1()?o1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yw(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function wO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function TO(n){$o(new Ta("platform-logger",e=>new x1(e),"PRIVATE")),$o(new Ta("heartbeat",e=>new _O(e),"PRIVATE")),ys(jm,dw,n),ys(jm,dw,"esm2020"),ys("fire-js","")}TO("");function HT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bO=HT,FT=new Ju("auth","Firebase",HT());const mf=new Ig("@firebase/auth");function SO(n,...e){mf.logLevel<=Le.WARN&&mf.warn(`Auth (${nl}): ${n}`,...e)}function tf(n,...e){mf.logLevel<=Le.ERROR&&mf.error(`Auth (${nl}): ${n}`,...e)}function Xn(n,...e){throw Ng(n,...e)}function mr(n,...e){return Ng(n,...e)}function Dg(n,e,t){const i={...bO(),[e]:t};return new Ju("auth","Firebase",i).create(e,{appName:n.name})}function _i(n){return Dg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xn(n,"argument-error"),Dg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ng(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return FT.create(n,...e)}function be(n,e,...t){if(!n)throw Ng(e,...t)}function mi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tf(e),new Error(e)}function Ti(n,e){n||mi(e)}function qm(){return typeof self<"u"&&self.location?.href||""}function RO(){return _w()==="http:"||_w()==="https:"}function _w(){return typeof self<"u"&&self.location?.protocol||null}function CO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RO()||n1()||"connection"in navigator)?navigator.onLine:!0}function IO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ec{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ti(t>e,"Short delay should be less than long delay!"),this.isMobile=ZI()||r1()}get(){return CO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pg(n,e){Ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class GT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DO=new ec(3e4,6e4);function Is(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ri(n,e,t,i,a={}){return KT(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Zu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return t1()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&tl(n.emulatorConfig.host)&&(g.credentials="include"),GT.fetch()(await QT(n,n.config.apiHost,t,d),g)})}async function KT(n,e,t){n._canInitEmulator=!1;const i={...OO,...e};try{const a=new PO(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Bh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Bh(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Bh(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Dg(n,_,g);Xn(n,_)}}catch(a){if(a instanceof Ai)throw a;Xn(n,"network-request-failed",{message:String(a)})}}async function tc(n,e,t,i,a={}){const l=await Ri(n,e,t,i,a);return"mfaPendingCredential"in l&&Xn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function QT(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?Pg(n.config,a):`${n.config.apiScheme}://${a}`;return kO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function NO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),DO.get())})}}function Bh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=mr(n,e,i);return a.customData._tokenResponse=t,a}function vw(n){return n!==void 0&&n.enterprise!==void 0}class xO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UO(n,e){return Ri(n,"GET","/v2/recaptchaConfig",Is(n,e))}async function MO(n,e){return Ri(n,"POST","/v1/accounts:delete",e)}async function gf(n,e){return Ri(n,"POST","/v1/accounts:lookup",e)}function Ru(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VO(n,e=!1){const t=nn(n),i=await t.getIdToken(e),a=xg(i);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Ru(_m(a.auth_time)),issuedAtTime:Ru(_m(a.iat)),expirationTime:Ru(_m(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function _m(n){return Number(n)*1e3}function xg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const a=NT(t);return a?JSON.parse(a):(tf("Failed to decode base64 JWT payload"),null)}catch(a){return tf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Ew(n){const e=xg(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ho(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ai&&LO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function LO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class jO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yf(n){const e=n.auth,t=await n.getIdToken(),i=await Ho(n,gf(e,{idToken:t}));be(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?YT(a.providerUserInfo):[],c=zO(n.providerData,l),d=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!c?.length,g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new $m(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function BO(n){const e=nn(n);await yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zO(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function YT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function qO(n,e){const t=await KT(n,{},async()=>{const i=Zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await QT(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&tl(n.emulatorConfig.host)&&(p.credentials="include"),GT.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $O(n,e){return Ri(n,"POST","/v2/accounts:revokeToken",Is(n,e))}class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ew(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=Ew(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await qO(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Lo;return i&&(be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return mi("not implemented")}}function os(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new jO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $m(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VO(this,e)}reload(){return BO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await Ho(this,MO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:w,emailVerified:b,isAnonymous:A,providerData:N,stsTokenManager:k}=t;be(w&&k,e,"internal-error");const P=Lo.fromJSON(this.name,k);be(typeof w=="string",e,"internal-error"),os(i,e.name),os(a,e.name),be(typeof b=="boolean",e,"internal-error"),be(typeof A=="boolean",e,"internal-error"),os(l,e.name),os(c,e.name),os(d,e.name),os(p,e.name),os(g,e.name),os(_,e.name);const H=new dr({uid:w,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:P,createdAt:g,lastLoginAt:_});return N&&Array.isArray(N)&&(H.providerData=N.map($=>({...$}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,i=!1){const a=new Lo;a.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await yf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?YT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Lo;d.updateFromIdToken(i);const p=new dr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new $m(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const ww=new Map;function gi(n){Ti(n instanceof Function,"Expected a class definition");let e=ww.get(n);return e?(Ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ww.set(n,e),e)}class WT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}WT.type="NONE";const Tw=WT;function nf(n,e,t){return`firebase:${n}:${e}:${t}`}class jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=nf(this.userKey,a.apiKey,l),this.fullPersistenceKey=nf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new jo(gi(Tw),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||gi(Tw);const c=nf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let w;if(typeof _=="string"){const b=await gf(e,{idToken:_}).catch(()=>{});if(!b)break;w=await dr._fromGetAccountInfoResponse(e,b,_)}else w=dr._fromJSON(e,_);g!==l&&(d=w),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new jo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new jo(l,e,i))}}function bw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nb(e))return"Blackberry";if(rb(e))return"Webos";if(JT(e))return"Safari";if((e.includes("chrome/")||ZT(e))&&!e.includes("edge/"))return"Chrome";if(tb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function XT(n=un()){return/firefox\//i.test(n)}function JT(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZT(n=un()){return/crios\//i.test(n)}function eb(n=un()){return/iemobile/i.test(n)}function tb(n=un()){return/android/i.test(n)}function nb(n=un()){return/blackberry/i.test(n)}function rb(n=un()){return/webos/i.test(n)}function Ug(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HO(n=un()){return Ug(n)&&!!window.navigator?.standalone}function FO(){return i1()&&document.documentMode===10}function ib(n=un()){return Ug(n)||tb(n)||rb(n)||nb(n)||/windows phone/i.test(n)||eb(n)}function sb(n,e=[]){let t;switch(n){case"Browser":t=bw(un());break;case"Worker":t=`${bw(un())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nl}/${i}`}class GO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function KO(n,e={}){return Ri(n,"GET","/v2/passwordPolicy",Is(n,e))}const QO=6;class YO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class WO{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sw(this),this.idTokenSubscription=new Sw(this),this.beforeStateQueue=new GO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(_i(this));const t=e?nn(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KO(this),t=new YO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ju("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await $O(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Os(n){return nn(n)}class Sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XO(n){Lf=n}function ab(n){return Lf.loadJS(n)}function JO(){return Lf.recaptchaEnterpriseScript}function ZO(){return Lf.gapiScript}function ek(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class tk{constructor(){this.enterprise=new nk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rk="recaptcha-enterprise",ob="NO_RECAPTCHA";class ik{constructor(e){this.type=rk,this.auth=Os(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{UO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new xO(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;vw(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ob)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&vw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=JO();p.length!==0&&(p+=d),ab(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Aw(n,e,t,i=!1,a=!1){const l=new ik(n);let c;if(a)c=ob;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Hm(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Aw(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Aw(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(l)})}function sk(n,e){const t=kg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(wa(l,e??{}))return a;Xn(a,"already-initialized")}return t.initialize({options:e})}function ak(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(gi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function ok(n,e,t){const i=Os(n);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=lb(e),{host:c,port:d}=lk(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(wa(g,i.config.emulator)&&wa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,tl(c)?(MT(`${l}//${c}${p}`),VT("Auth",!0)):uk()}function lb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lk(n){const e=lb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Rw(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Rw(c)}}}function Rw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Mg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,t){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function ck(n,e){return Ri(n,"POST","/v1/accounts:signUp",e)}async function hk(n,e){return tc(n,"POST","/v1/accounts:signInWithPassword",Is(n,e))}async function fk(n,e){return tc(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}async function dk(n,e){return tc(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}class Uu extends Mg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Uu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Uu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,t,"signInWithPassword",hk);case"emailLink":return fk(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,i,"signUpPassword",ck);case"emailLink":return dk(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bo(n,e){return tc(n,"POST","/v1/accounts:signInWithIdp",Is(n,e))}const pk="http://localhost";class ba extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new ba(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:pk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zu(t)}return e}}function mk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gk(n){const e=_u(vu(n)).link,t=e?_u(vu(e)).deep_link_id:null,i=_u(vu(n)).deep_link_id;return(i?_u(vu(i)).link:null)||i||t||e||n}class Vg{constructor(e){const t=_u(vu(e)),i=t.apiKey??null,a=t.oobCode??null,l=mk(t.mode??null);be(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=gk(e);try{return new Vg(t)}catch{return null}}}class rl{constructor(){this.providerId=rl.PROVIDER_ID}static credential(e,t){return Uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Vg.parseLink(t);return be(i,"argument-error"),Uu._fromEmailAndCode(e,i.code,i.tenantId)}}rl.PROVIDER_ID="password";rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nc extends Lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class us extends nc{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";class pi extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return pi.credential(t,i)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";class cs extends nc{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";class hs extends nc{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hs.credential(t,i)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";async function yk(n,e){return tc(n,"POST","/v1/accounts:signUp",Is(n,e))}class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await dr._fromIdTokenResponse(e,i,a),c=Cw(i);return new Sa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Cw(i);return new Sa({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Cw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class _f extends Ai{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new _f(e,t,i,a)}}function ub(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(n,l,e,i):l})}async function _k(n,e,t=!1){const i=await Ho(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",i)}async function vk(n,e,t=!1){const{auth:i}=n;if(Nn(i.app))return Promise.reject(_i(i));const a="reauthenticate";try{const l=await Ho(n,ub(i,a,e,n),t);be(l.idToken,i,"internal-error");const c=xg(l.idToken);be(c,i,"internal-error");const{sub:d}=c;return be(n.uid===d,i,"user-mismatch"),Sa._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Xn(i,"user-mismatch"),l}}async function cb(n,e,t=!1){if(Nn(n.app))return Promise.reject(_i(n));const i="signIn",a=await ub(n,i,e),l=await Sa._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function Ek(n,e){return cb(Os(n),e)}async function hb(n){const e=Os(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wk(n,e,t){if(Nn(n.app))return Promise.reject(_i(n));const i=Os(n),c=await Hm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&hb(n),p}),d=await Sa._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function Tk(n,e,t){return Nn(n.app)?Promise.reject(_i(n)):Ek(nn(n),rl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hb(n),i})}async function bk(n,e){return Ri(n,"POST","/v1/accounts:update",e)}async function Sk(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=nn(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Ho(i,bk(i.auth,l));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function Ak(n,e,t,i){return nn(n).onIdTokenChanged(e,t,i)}function Rk(n,e,t){return nn(n).beforeAuthStateChanged(e,t)}function fb(n,e,t,i){return nn(n).onAuthStateChanged(e,t,i)}function db(n){return nn(n).signOut()}const vf="__sak";class pb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ck=1e3,Ik=10;class mb extends pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);FO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ik):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mb.type="LOCAL";const Ok=mb;class gb extends pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gb.type="SESSION";const yb=gb;function kk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new jf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await kk(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];function jg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class Dk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=jg("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(w){const b=w;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Br(){return window}function Nk(n){Br().location.href=n}function _b(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function Pk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xk(){return navigator?.serviceWorker?.controller||null}function Uk(){return _b()?self:null}const vb="firebaseLocalStorageDb",Mk=1,Ef="firebaseLocalStorage",Eb="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(n,e){return n.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function Vk(){const n=indexedDB.deleteDatabase(vb);return new rc(n).toPromise()}function Fm(){const n=indexedDB.open(vb,Mk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ef,{keyPath:Eb})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ef)?e(i):(i.close(),await Vk(),e(await Fm()))})})}async function Iw(n,e,t){const i=Bf(n,!0).put({[Eb]:e,value:t});return new rc(i).toPromise()}async function Lk(n,e){const t=Bf(n,!1).get(e),i=await new rc(t).toPromise();return i===void 0?null:i.value}function Ow(n,e){const t=Bf(n,!0).delete(e);return new rc(t).toPromise()}const jk=800,Bk=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Bk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(Uk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new Dk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await Iw(e,vf,"1"),await Ow(e,vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Lk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ow(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Bf(a,!1).getAll();return new rc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const zk=wb;new ec(3e4,6e4);function Tb(n,e){return e?gi(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Bg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qk(n){return cb(n.auth,new Bg(n),n.bypassAuthState)}function $k(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),vk(t,new Bg(n),n.bypassAuthState)}async function Hk(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),_k(t,new Bg(n),n.bypassAuthState)}class bb{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qk;case"linkViaPopup":case"linkViaRedirect":return Hk;case"reauthViaPopup":case"reauthViaRedirect":return $k;default:Xn(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fk=new ec(2e3,1e4);async function Gk(n,e,t){if(Nn(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));const i=Os(n);AO(n,e,Lg);const a=Tb(i,t);return new ma(i,"signInViaPopup",e,a).executeNotNull()}class ma extends bb{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fk.get())};e()}}ma.currentPopupAction=null;const Kk="pendingRedirect",rf=new Map;class Qk extends bb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const i=await Yk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yk(n,e){const t=Jk(e),i=Xk(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function Wk(n,e){rf.set(n._key(),e)}function Xk(n){return gi(n._redirectPersistence)}function Jk(n){return nf(Kk,n.config.apiKey,n.name)}async function Zk(n,e,t=!1){if(Nn(n.app))return Promise.reject(_i(n));const i=Os(n),a=Tb(i,e),c=await new Qk(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const eD=600*1e3;class tD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Sb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eD&&this.cachedEventUids.clear(),this.cachedEventUids.has(kw(e))}saveEventToCache(e){this.cachedEventUids.add(kw(e)),this.lastProcessedEventTime=Date.now()}}function kw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sb(n);default:return!1}}async function rD(n,e={}){return Ri(n,"GET","/v1/projects",e)}const iD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sD=/^https?/;async function aD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rD(n);for(const t of e)try{if(oD(t))return}catch{}Xn(n,"unauthorized-domain")}function oD(n){const e=qm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!sD.test(t))return!1;if(iD.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const lD=new ec(3e4,6e4);function Dw(){const n=Br().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uD(n){return new Promise((e,t)=>{function i(){Dw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dw(),t(mr(n,"network-request-failed"))},timeout:lD.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)i();else{const a=ek("iframefcb");return Br()[a]=()=>{gapi.load?i():t(mr(n,"network-request-failed"))},ab(`${ZO()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw sf=null,e})}let sf=null;function cD(n){return sf=sf||uD(n),sf}const hD=new ec(5e3,15e3),fD="__/auth/iframe",dD="emulator/auth/iframe",pD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gD(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Pg(e,dD):`https://${n.config.authDomain}/${fD}`,i={apiKey:e.apiKey,appName:n.name,v:nl},a=mD.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Zu(i).slice(1)}`}async function yD(n){const e=await cD(n),t=Br().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:gD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pD,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=mr(n,"network-request-failed"),d=Br().setTimeout(()=>{l(c)},hD.get());function p(){Br().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}const _D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vD=500,ED=600,wD="_blank",TD="http://localhost";class Nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bD(n,e,t,i=vD,a=ED){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={..._D,width:i.toString(),height:a.toString(),top:l,left:c},g=un().toLowerCase();t&&(d=ZT(g)?wD:t),XT(g)&&(e=e||TD,p.scrollbars="yes");const _=Object.entries(p).reduce((b,[A,N])=>`${b}${A}=${N},`,"");if(HO(g)&&d!=="_self")return SD(e||"",d),new Nw(null);const w=window.open(e||"",d,_);be(w,n,"popup-blocked");try{w.focus()}catch{}return new Nw(w)}function SD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const AD="__/auth/handler",RD="emulator/auth/handler",CD=encodeURIComponent("fac");async function Pw(n,e,t,i,a,l){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:nl,eventId:a};if(e instanceof Lg){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",h1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof nc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${CD}=${encodeURIComponent(p)}`:"";return`${ID(n)}?${Zu(d).slice(1)}${g}`}function ID({config:n}){return n.emulator?Pg(n,RD):`https://${n.authDomain}/${AD}`}const vm="webStorageSupport";class OD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yb,this._completeRedirectFn=Zk,this._overrideRedirectResult=Wk}async _openPopup(e,t,i,a){Ti(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Pw(e,t,i,qm(),a);return bD(e,l,jg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Pw(e,t,i,qm(),a);return Nk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ti(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await yD(e),i=new tD(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vm,{type:vm},a=>{const l=a?.[0]?.[vm];l!==void 0&&t(!!l),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ib()||JT()||Ug()}}const kD=OD;var xw="@firebase/auth",Uw="1.12.0";class DD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ND(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PD(n){$o(new Ta("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sb(n)},g=new WO(i,a,l,p);return ak(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$o(new Ta("auth-internal",e=>{const t=Os(e.getProvider("auth").getImmediate());return(i=>new DD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(xw,Uw,ND(n)),ys(xw,Uw,"esm2020")}const xD=300,UD=UT("authIdTokenMaxAge")||xD;let Mw=null;const MD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>UD)return;const a=t?.token;Mw!==a&&(Mw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function VD(n=zT()){const e=kg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sk(n,{popupRedirectResolver:kD,persistence:[zk,Ok,yb]}),i=UT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=MD(l.toString());Rk(t,c,()=>c(t.currentUser)),Ak(t,d=>c(d))}}const a=PT("auth");return a&&ok(t,`http://${a}`),t}function LD(){return document.getElementsByTagName("head")?.[0]??document}XO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=mr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",LD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PD("Browser");var jD="firebase",BD="12.7.0";ys(jD,BD,"app");var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _s,Ab;(function(){var n;function e(I,C){function O(){}O.prototype=C.prototype,I.F=C.prototype,I.prototype=new O,I.prototype.constructor=I,I.D=function(V,U,j){for(var R=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)R[ve-2]=arguments[ve];return C.prototype[U].apply(V,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,C,O){O||(O=0);const V=Array(16);if(typeof C=="string")for(var U=0;U<16;++U)V[U]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(U=0;U<16;++U)V[U]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=I.g[0],O=I.g[1],U=I.g[2];let j=I.g[3],R;R=C+(j^O&(U^j))+V[0]+3614090360&4294967295,C=O+(R<<7&4294967295|R>>>25),R=j+(U^C&(O^U))+V[1]+3905402710&4294967295,j=C+(R<<12&4294967295|R>>>20),R=U+(O^j&(C^O))+V[2]+606105819&4294967295,U=j+(R<<17&4294967295|R>>>15),R=O+(C^U&(j^C))+V[3]+3250441966&4294967295,O=U+(R<<22&4294967295|R>>>10),R=C+(j^O&(U^j))+V[4]+4118548399&4294967295,C=O+(R<<7&4294967295|R>>>25),R=j+(U^C&(O^U))+V[5]+1200080426&4294967295,j=C+(R<<12&4294967295|R>>>20),R=U+(O^j&(C^O))+V[6]+2821735955&4294967295,U=j+(R<<17&4294967295|R>>>15),R=O+(C^U&(j^C))+V[7]+4249261313&4294967295,O=U+(R<<22&4294967295|R>>>10),R=C+(j^O&(U^j))+V[8]+1770035416&4294967295,C=O+(R<<7&4294967295|R>>>25),R=j+(U^C&(O^U))+V[9]+2336552879&4294967295,j=C+(R<<12&4294967295|R>>>20),R=U+(O^j&(C^O))+V[10]+4294925233&4294967295,U=j+(R<<17&4294967295|R>>>15),R=O+(C^U&(j^C))+V[11]+2304563134&4294967295,O=U+(R<<22&4294967295|R>>>10),R=C+(j^O&(U^j))+V[12]+1804603682&4294967295,C=O+(R<<7&4294967295|R>>>25),R=j+(U^C&(O^U))+V[13]+4254626195&4294967295,j=C+(R<<12&4294967295|R>>>20),R=U+(O^j&(C^O))+V[14]+2792965006&4294967295,U=j+(R<<17&4294967295|R>>>15),R=O+(C^U&(j^C))+V[15]+1236535329&4294967295,O=U+(R<<22&4294967295|R>>>10),R=C+(U^j&(O^U))+V[1]+4129170786&4294967295,C=O+(R<<5&4294967295|R>>>27),R=j+(O^U&(C^O))+V[6]+3225465664&4294967295,j=C+(R<<9&4294967295|R>>>23),R=U+(C^O&(j^C))+V[11]+643717713&4294967295,U=j+(R<<14&4294967295|R>>>18),R=O+(j^C&(U^j))+V[0]+3921069994&4294967295,O=U+(R<<20&4294967295|R>>>12),R=C+(U^j&(O^U))+V[5]+3593408605&4294967295,C=O+(R<<5&4294967295|R>>>27),R=j+(O^U&(C^O))+V[10]+38016083&4294967295,j=C+(R<<9&4294967295|R>>>23),R=U+(C^O&(j^C))+V[15]+3634488961&4294967295,U=j+(R<<14&4294967295|R>>>18),R=O+(j^C&(U^j))+V[4]+3889429448&4294967295,O=U+(R<<20&4294967295|R>>>12),R=C+(U^j&(O^U))+V[9]+568446438&4294967295,C=O+(R<<5&4294967295|R>>>27),R=j+(O^U&(C^O))+V[14]+3275163606&4294967295,j=C+(R<<9&4294967295|R>>>23),R=U+(C^O&(j^C))+V[3]+4107603335&4294967295,U=j+(R<<14&4294967295|R>>>18),R=O+(j^C&(U^j))+V[8]+1163531501&4294967295,O=U+(R<<20&4294967295|R>>>12),R=C+(U^j&(O^U))+V[13]+2850285829&4294967295,C=O+(R<<5&4294967295|R>>>27),R=j+(O^U&(C^O))+V[2]+4243563512&4294967295,j=C+(R<<9&4294967295|R>>>23),R=U+(C^O&(j^C))+V[7]+1735328473&4294967295,U=j+(R<<14&4294967295|R>>>18),R=O+(j^C&(U^j))+V[12]+2368359562&4294967295,O=U+(R<<20&4294967295|R>>>12),R=C+(O^U^j)+V[5]+4294588738&4294967295,C=O+(R<<4&4294967295|R>>>28),R=j+(C^O^U)+V[8]+2272392833&4294967295,j=C+(R<<11&4294967295|R>>>21),R=U+(j^C^O)+V[11]+1839030562&4294967295,U=j+(R<<16&4294967295|R>>>16),R=O+(U^j^C)+V[14]+4259657740&4294967295,O=U+(R<<23&4294967295|R>>>9),R=C+(O^U^j)+V[1]+2763975236&4294967295,C=O+(R<<4&4294967295|R>>>28),R=j+(C^O^U)+V[4]+1272893353&4294967295,j=C+(R<<11&4294967295|R>>>21),R=U+(j^C^O)+V[7]+4139469664&4294967295,U=j+(R<<16&4294967295|R>>>16),R=O+(U^j^C)+V[10]+3200236656&4294967295,O=U+(R<<23&4294967295|R>>>9),R=C+(O^U^j)+V[13]+681279174&4294967295,C=O+(R<<4&4294967295|R>>>28),R=j+(C^O^U)+V[0]+3936430074&4294967295,j=C+(R<<11&4294967295|R>>>21),R=U+(j^C^O)+V[3]+3572445317&4294967295,U=j+(R<<16&4294967295|R>>>16),R=O+(U^j^C)+V[6]+76029189&4294967295,O=U+(R<<23&4294967295|R>>>9),R=C+(O^U^j)+V[9]+3654602809&4294967295,C=O+(R<<4&4294967295|R>>>28),R=j+(C^O^U)+V[12]+3873151461&4294967295,j=C+(R<<11&4294967295|R>>>21),R=U+(j^C^O)+V[15]+530742520&4294967295,U=j+(R<<16&4294967295|R>>>16),R=O+(U^j^C)+V[2]+3299628645&4294967295,O=U+(R<<23&4294967295|R>>>9),R=C+(U^(O|~j))+V[0]+4096336452&4294967295,C=O+(R<<6&4294967295|R>>>26),R=j+(O^(C|~U))+V[7]+1126891415&4294967295,j=C+(R<<10&4294967295|R>>>22),R=U+(C^(j|~O))+V[14]+2878612391&4294967295,U=j+(R<<15&4294967295|R>>>17),R=O+(j^(U|~C))+V[5]+4237533241&4294967295,O=U+(R<<21&4294967295|R>>>11),R=C+(U^(O|~j))+V[12]+1700485571&4294967295,C=O+(R<<6&4294967295|R>>>26),R=j+(O^(C|~U))+V[3]+2399980690&4294967295,j=C+(R<<10&4294967295|R>>>22),R=U+(C^(j|~O))+V[10]+4293915773&4294967295,U=j+(R<<15&4294967295|R>>>17),R=O+(j^(U|~C))+V[1]+2240044497&4294967295,O=U+(R<<21&4294967295|R>>>11),R=C+(U^(O|~j))+V[8]+1873313359&4294967295,C=O+(R<<6&4294967295|R>>>26),R=j+(O^(C|~U))+V[15]+4264355552&4294967295,j=C+(R<<10&4294967295|R>>>22),R=U+(C^(j|~O))+V[6]+2734768916&4294967295,U=j+(R<<15&4294967295|R>>>17),R=O+(j^(U|~C))+V[13]+1309151649&4294967295,O=U+(R<<21&4294967295|R>>>11),R=C+(U^(O|~j))+V[4]+4149444226&4294967295,C=O+(R<<6&4294967295|R>>>26),R=j+(O^(C|~U))+V[11]+3174756917&4294967295,j=C+(R<<10&4294967295|R>>>22),R=U+(C^(j|~O))+V[2]+718787259&4294967295,U=j+(R<<15&4294967295|R>>>17),R=O+(j^(U|~C))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(U+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+j&4294967295}i.prototype.v=function(I,C){C===void 0&&(C=I.length);const O=C-this.blockSize,V=this.C;let U=this.h,j=0;for(;j<C;){if(U==0)for(;j<=O;)a(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<C;)if(V[U++]=I.charCodeAt(j++),U==this.blockSize){a(this,V),U=0;break}}else for(;j<C;)if(V[U++]=I[j++],U==this.blockSize){a(this,V),U=0;break}}this.h=U,this.o+=C},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var O=I.length-8;O<I.length;++O)I[O]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,O=0;O<4;++O)for(let V=0;V<32;V+=8)I[C++]=this.g[O]>>>V&255;return I};function l(I,C){var O=d;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=C(I)}function c(I,C){this.h=C;const O=[];let V=!0;for(let U=I.length-1;U>=0;U--){const j=I[U]|0;V&&j==C||(O[U]=j,V=!1)}this.g=O}var d={};function p(I){return-128<=I&&I<128?l(I,function(C){return new c([C|0],C<0?-1:0)}):new c([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return w;if(I<0)return P(g(-I));const C=[];let O=1;for(let V=0;I>=O;V++)C[V]=I/O|0,O*=4294967296;return new c(C,0)}function _(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return P(_(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=g(Math.pow(C,8));let V=w;for(let j=0;j<I.length;j+=8){var U=Math.min(8,I.length-j);const R=parseInt(I.substring(j,j+U),C);U<8?(U=g(Math.pow(C,U)),V=V.j(U).add(g(R))):(V=V.j(O),V=V.add(g(R)))}return V}var w=p(0),b=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(k(this))return-P(this).m();let I=0,C=1;for(let O=0;O<this.g.length;O++){const V=this.i(O);I+=(V>=0?V:4294967296+V)*C,C*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(k(this))return"-"+P(this).toString(I);const C=g(Math.pow(I,6));var O=this;let V="";for(;;){const U=ie(O,C).g;O=H(O,U.j(C));let j=((O.g.length>0?O.g[0]:O.h)>>>0).toString(I);if(O=U,N(O))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function k(I){return I.h==-1}n.l=function(I){return I=H(this,I),k(I)?-1:N(I)?0:1};function P(I){const C=I.g.length,O=[];for(let V=0;V<C;V++)O[V]=~I.g[V];return new c(O,~I.h).add(b)}n.abs=function(){return k(this)?P(this):this},n.add=function(I){const C=Math.max(this.g.length,I.g.length),O=[];let V=0;for(let U=0;U<=C;U++){let j=V+(this.i(U)&65535)+(I.i(U)&65535),R=(j>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);V=R>>>16,j&=65535,R&=65535,O[U]=R<<16|j}return new c(O,O[O.length-1]&-2147483648?-1:0)};function H(I,C){return I.add(P(C))}n.j=function(I){if(N(this)||N(I))return w;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(this.l(A)<0&&I.l(A)<0)return g(this.m()*I.m());const C=this.g.length+I.g.length,O=[];for(var V=0;V<2*C;V++)O[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<I.g.length;U++){const j=this.i(V)>>>16,R=this.i(V)&65535,ve=I.i(U)>>>16,Ke=I.i(U)&65535;O[2*V+2*U]+=R*Ke,$(O,2*V+2*U),O[2*V+2*U+1]+=j*Ke,$(O,2*V+2*U+1),O[2*V+2*U+1]+=R*ve,$(O,2*V+2*U+1),O[2*V+2*U+2]+=j*ve,$(O,2*V+2*U+2)}for(I=0;I<C;I++)O[I]=O[2*I+1]<<16|O[2*I];for(I=C;I<2*C;I++)O[I]=0;return new c(O,0)};function $(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function G(I,C){this.g=I,this.h=C}function ie(I,C){if(N(C))throw Error("division by zero");if(N(I))return new G(w,w);if(k(I))return C=ie(P(I),C),new G(P(C.g),P(C.h));if(k(C))return C=ie(I,P(C)),new G(P(C.g),C.h);if(I.g.length>30){if(k(I)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var O=b,V=C;V.l(I)<=0;)O=pe(O),V=pe(V);var U=le(O,1),j=le(V,1);for(V=le(V,2),O=le(O,2);!N(V);){var R=j.add(V);R.l(I)<=0&&(U=U.add(O),j=R),V=le(V,1),O=le(O,1)}return C=H(I,U.j(C)),new G(U,C)}for(U=w;I.l(C)>=0;){for(O=Math.max(1,Math.floor(I.m()/C.m())),V=Math.ceil(Math.log(O)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=g(O),R=j.j(C);k(R)||R.l(I)>0;)O-=V,j=g(O),R=j.j(C);N(j)&&(j=b),U=U.add(j),I=H(I,R)}return new G(U,I)}n.B=function(I){return ie(this,I).h},n.and=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let V=0;V<C;V++)O[V]=this.i(V)&I.i(V);return new c(O,this.h&I.h)},n.or=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let V=0;V<C;V++)O[V]=this.i(V)|I.i(V);return new c(O,this.h|I.h)},n.xor=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let V=0;V<C;V++)O[V]=this.i(V)^I.i(V);return new c(O,this.h^I.h)};function pe(I){const C=I.g.length+1,O=[];for(let V=0;V<C;V++)O[V]=I.i(V)<<1|I.i(V-1)>>>31;return new c(O,I.h)}function le(I,C){const O=C>>5;C%=32;const V=I.g.length-O,U=[];for(let j=0;j<V;j++)U[j]=C>0?I.i(j+O)>>>C|I.i(j+O+1)<<32-C:I.i(j+O);return new c(U,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ab=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,_s=c}).apply(typeof Vw<"u"?Vw:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Rb,Eu,Cb,af,Gm,Ib,Ob,kb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in E))break e;E=E[B]}h=h[h.length-1],S=E[h],y=y(S),y!=S&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&E.push([S,y[S]]);return E}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function w(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(S,B,K){for(var se=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)se[Oe-2]=arguments[Oe];return y.prototype[B].apply(S,se)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const y=h.length;if(y>0){const E=Array(y);for(let S=0;S<y;S++)E[S]=h[S];return E}return[]}function N(h,y){for(let S=1;S<arguments.length;S++){const B=arguments[S];var E=typeof B;if(E=E!="object"?E:B?Array.isArray(B)?"array":E:"null",E=="array"||E=="object"&&typeof B.length=="number"){E=h.length||0;const K=B.length||0;h.length=E+K;for(let se=0;se<K;se++)h[E+se]=B[se]}else h.push(B)}}class k{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(h){c.setTimeout(()=>{throw h},0)}function H(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,E){const S=G.get();S.set(y,E),this.h?this.h.next=S:this.g=S,this.h=S}}var G=new k(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,le=!1,I=new $,C=()=>{const h=Promise.resolve(void 0);pe=()=>{h.then(O)}};function O(){for(var h;h=H();){try{h.h.call(h.g)}catch(E){P(E)}var y=G;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function ve(h,y){U.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(ve,U),ve.prototype.init=function(h,y){const E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),Q=0;function re(h,y,E,S,B){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!S,this.ha=B,this.key=++Q,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,y,E){for(const S in h)y.call(E,h[S],S,h)}function He(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function M(h){const y={};for(const E in h)y[E]=h[E];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let E,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(E in S)h[E]=S[E];for(let K=0;K<Z.length;K++)E=Z[K],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,y,E,S,B){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const se=De(h,y,S,B);return se>-1?(y=h[se],E||(y.fa=!1)):(y=new re(y,this.src,K,!!S,B),y.fa=E,h.push(y)),y};function Ae(h,y){const E=y.type;if(E in h.g){var S=h.g[E],B=Array.prototype.indexOf.call(S,y,void 0),K;(K=B>=0)&&Array.prototype.splice.call(S,B,1),K&&(he(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function De(h,y,E,S){for(let B=0;B<h.length;++B){const K=h[B];if(!K.da&&K.listener==y&&K.capture==!!E&&K.ha==S)return B}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Vt={};function ct(h,y,E,S,B){if(Array.isArray(y)){for(let K=0;K<y.length;K++)ct(h,y[K],E,S,B);return null}return E=fl(E),h&&h[Ke]?h.J(y,E,d(S)?!!S.capture:!1,B):Ds(h,y,E,!1,S,B)}function Ds(h,y,E,S,B,K){if(!y)throw Error("Invalid event type");const se=d(B)?!!B.capture:!!B;let Oe=Ns(h);if(Oe||(h[qe]=Oe=new fe(h)),E=Oe.add(y,E,S,se,K),E.proxy)return E;if(S=Da(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)j||(B=se),B===void 0&&(B=!1),h.addEventListener(y.toString(),S,B);else if(h.attachEvent)h.attachEvent(yr(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Da(){function h(E){return y.call(h.src,h.listener,E)}const y=cl;return h}function Na(h,y,E,S,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)Na(h,y[K],E,S,B);else S=d(S)?!!S.capture:!!S,E=fl(E),h&&h[Ke]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],E=De(y,E,S,B),E>-1&&(he(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ns(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,E,S,B)),(E=h>-1?y[h]:null)&&Pa(E))}function Pa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ke])Ae(y.i,h);else{var E=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(E,S,h.capture):y.detachEvent?y.detachEvent(yr(E),S):y.addListener&&y.removeListener&&y.removeListener(S),(E=Ns(y))?(Ae(E,h),E.h==0&&(E.src=null,y[qe]=null)):he(h)}}}function yr(h){return h in Vt?Vt[h]:Vt[h]="on"+h}function cl(h,y){if(h.da)h=!0;else{y=new ve(y,this);const E=h.listener,S=h.ha||h.src;h.fa&&Pa(h),h=E.call(S,y)}return h}function Ns(h){return h=h[qe],h instanceof fe?h:null}var hl="__closure_events_fn_"+(Math.random()*1e9>>>0);function fl(h){return typeof h=="function"?h:(h[hl]||(h[hl]=function(y){return h.handleEvent(y)}),h[hl])}function bt(){V.call(this),this.i=new fe(this),this.M=this,this.G=null}w(bt,V),bt.prototype[Ke]=!0,bt.prototype.removeEventListener=function(h,y,E,S){Na(this,h,y,E,S)};function Lt(h,y){var E,S=h.G;if(S)for(E=[];S;S=S.G)E.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new U(y,h);else if(y instanceof U)y.target=y.target||h;else{var B=y;y=new U(S,h),ae(y,B)}B=!0;let K,se;if(E)for(se=E.length-1;se>=0;se--)K=y.g=E[se],B=Ii(K,S,!0,y)&&B;if(K=y.g=h,B=Ii(K,S,!0,y)&&B,B=Ii(K,S,!1,y)&&B,E)for(se=0;se<E.length;se++)K=y.g=E[se],B=Ii(K,S,!1,y)&&B}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let S=0;S<E.length;S++)he(E[S]);delete h.g[y],h.h--}}this.G=null},bt.prototype.J=function(h,y,E,S){return this.i.add(String(h),y,!1,E,S)},bt.prototype.K=function(h,y,E,S){return this.i.add(String(h),y,!0,E,S)};function Ii(h,y,E,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let K=0;K<y.length;++K){const se=y[K];if(se&&!se.da&&se.capture==E){const Oe=se.listener,vt=se.ha||se.src;se.fa&&Ae(h.i,se),B=Oe.call(vt,S)!==!1&&B}}return B&&!S.defaultPrevented}function ad(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function cc(h){h.g=ad(()=>{h.g=null,h.i&&(h.i=!1,cc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class cn extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(h){V.call(this),this.h=h,this.g={}}w(Ps,V);var dl=[];function pl(h){Pe(h.g,function(y,E){this.g.hasOwnProperty(E)&&Pa(y)},h),h.g={}}Ps.prototype.N=function(){Ps.Z.N.call(this),pl(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=c.JSON.stringify,od=c.JSON.parse,hc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function fc(){}function dc(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){U.call(this,"d")}w(Gt,U);function Un(){U.call(this,"c")}w(Un,U);var _t={},pc=null;function xa(){return pc=pc||new bt}_t.Ia="serverreachability";function mc(h){U.call(this,_t.Ia,h)}w(mc,U);function _r(h){const y=xa();Lt(y,new mc(y))}_t.STAT_EVENT="statevent";function xs(h,y){U.call(this,_t.STAT_EVENT,h),this.stat=y}w(xs,U);function St(h){const y=xa();Lt(y,new xs(y,h))}_t.Ja="timingevent";function vr(h,y){U.call(this,_t.Ja,h),this.size=y}w(vr,U);function Er(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function ld(h,y,E,S,B,K){h.info(function(){if(h.g)if(K){var se="",Oe=K.split("&");for(let Qe=0;Qe<Oe.length;Qe++){var vt=Oe[Qe].split("=");if(vt.length>1){const ht=vt[0];vt=vt[1];const jn=ht.split("_");se=jn.length>=2&&jn[1]=="type"?se+(ht+"="+vt+"&"):se+(ht+"=redacted&")}}}else se=null;else se=K;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+E+`
`+se})}function gc(h,y,E,S,B,K,se){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+E+`
`+K+" "+se})}function wr(h,y,E,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ud(h,E)+(S?" "+S:"")})}function Us(h,y){h.info(function(){return"TIMEOUT: "+y})}Zn.prototype.info=function(){};function ud(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var E=K[h];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let se=1;se<S.length;se++)S[se]=""}}}}return Oi(K)}catch{return y}}var Ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function Vs(){}w(Vs,fc),Vs.prototype.g=function(){return new XMLHttpRequest},gl=new Vs;function Qr(h){return encodeURIComponent(String(h))}function yc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function er(h,y,E,S){this.j=h,this.i=y,this.l=E,this.S=S||1,this.V=new Ps(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tr}function tr(){this.i=null,this.g="",this.h=!1}var At={},qt={};function Tr(h,y,E){h.M=1,h.A=Ls(Ct(y)),h.u=E,h.R=!0,Ua(h,null)}function Ua(h,y){h.F=Date.now(),br(h),h.B=Ct(h.A);var E=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ja(E.i,"t",S),h.C=0,E=h.j.L,h.h=new tr,h.g=Nc(h.j,E?y:null,!h.u),h.P>0&&(h.O=new cn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,S=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(dl[0]=B.toString()),B=dl);for(let K=0;K<B.length;K++){const se=ct(E,B[K],S||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),_r(),ld(h.i,h.v,h.B,h.l,h.S,h.u)}er.prototype.ba=function(h){h=h.target;const y=this.O;y&&ir(h)==3?y.j():this.Y(h)},er.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=ir(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Oe!=4||vt==7||(vt==8||Qe<=0?_r(3):_r(2)),Sr(this);var y=this.g.ca();this.X=y;var E=cd(this);if(this.o=y==200,gc(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var K=S;break t}}K=null}if(h=K)wr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ar(this,h);else{this.o=!1,this.m=3,St(12),wn(this),Mn(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<E.length;)if(ht=vc(this,E),ht==qt){Oe==4&&(this.m=4,St(14),h=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==At){this.m=4,St(15),wr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else wr(this.i,this.l,ht,null),Ar(this,ht);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||E.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)wr(this.i,this.l,E,"[Invalid Chunked Response]"),wn(this),Mn(this);else if(E.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Dl(se),se.P=!0,St(11))}}else wr(this.i,this.l,E,null),Ar(this,E);Oe==4&&wn(this),this.o&&!this.K&&(Oe==4?Ic(this.j,this):(this.o=!1,br(this)))}else Wr(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),wn(this),Mn(this)}}}catch{}};function cd(h){if(!_c(h))return h.g.la();const y=Kt(h.g);if(y==="")return"";let E="";const S=y.length,B=ir(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return wn(h),Mn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<S;K++)h.h.h=!0,E+=h.h.i.decode(y[K],{stream:!(B&&K==S-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function _c(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function vc(h,y){var E=h.C,S=y.indexOf(`
`,E);return S==-1?qt:(E=Number(y.substring(E,S)),isNaN(E)?At:(S+=1,S+E>y.length?qt:(y=y.slice(S,S+E),h.C=S+E,y)))}er.prototype.cancel=function(){this.K=!0,wn(this)};function br(h){h.T=Date.now()+h.H,Ma(h,h.H)}function Ma(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Er(g(h.aa,h),y)}function Sr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}er.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Us(this.i,this.B),this.M!=2&&(_r(),St(17)),wn(this),this.m=2,Mn(this)):Ma(this,this.T-h)};function Mn(h){h.j.I==0||h.K||Ic(h.j,h)}function wn(h){Sr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ar(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Cr(E.h,h))){if(!h.L&&Cr(E.h,h)&&E.I==3){try{var S=E.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Ha(E),Vi(E);else break e;Fs(E),St(18)}}else E.xa=B[1],0<E.xa-E.K&&B[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Er(g(E.Va,E),6e3));Rr(E.h)<=1&&E.ta&&(E.ta=void 0)}else Pr(E,11)}else if((h.L||E.g==h)&&Ha(E),!R(y))for(B=E.Ba.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];const ht=Qe[0];if(!(ht<=E.K))if(E.K=ht,Qe=Qe[1],E.I==2)if(Qe[0]=="c"){E.M=Qe[1],E.ba=Qe[2];const jn=Qe[3];jn!=null&&(E.ka=jn,E.j.info("VER="+E.ka));const xr=Qe[4];xr!=null&&(E.za=xr,E.j.info("SVER="+E.za));const sr=Qe[5];sr!=null&&typeof sr=="number"&&sr>0&&(S=1.5*sr,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const ar=h.g;if(ar){const Gs=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var K=S.h;K.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(vl(K,K.h),K.h=null))}if(S.G){const Fa=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Fa&&(S.wa=Fa,Xe(S.J,S.G,Fa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var se=h;if(S.na=Dc(S,S.L?S.ba:null,S.W),se.L){El(S.h,se);var Oe=se,vt=S.O;vt&&(Oe.H=vt),Oe.D&&(Sr(Oe),br(Oe)),S.g=se}else Rc(S);E.i.length>0&&Nr(E)}else Qe[0]!="stop"&&Qe[0]!="close"||Pr(E,7);else E.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Pr(E,7):Ol(E):Qe[0]!="noop"&&E.l&&E.l.qa(Qe),E.A=0)}}_r(4)}catch{}}var Rt=class{constructor(h,y){this.g=h,this.map=y}};function yl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _l(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Rr(h){return h.h?1:h.g?h.g.size:0}function Cr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function vl(h,y){h.g?h.g.add(y):h.h=y}function El(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}yl.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return A(h.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const S=h[E].indexOf("=");let B,K=null;S>=0?(B=h[E].substring(0,S),K=h[E].substring(S+1)):B=h[E],y(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Tn?(this.l=h.l,$t(this,h.j),this.o=h.o,this.g=h.g,ki(this,h.u),this.h=h.h,Tl(this,Sc(h.i)),this.m=h.m):h&&(y=String(h).match(Ec))?(this.l=!1,$t(this,y[1]||"",!0),this.o=Ir(y[2]||""),this.g=Ir(y[3]||"",!0),ki(this,y[4]),this.h=Ir(y[5]||"",!0),Tl(this,y[6]||"",!0),this.m=Ir(y[7]||"")):(this.l=!1,this.i=new Ni(null,this.l))}Tn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(js(y,La,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(js(y,La,!0),"@"),h.push(Qr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(js(E,E.charAt(0)=="/"?bl:wc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",js(E,Tc)),h.join("")},Tn.prototype.resolve=function(h){const y=Ct(this);let E=!!h.j;E?$t(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var S=h.h;if(E)ki(y,h.u);else if(E=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=y.h.lastIndexOf("/");B!=-1&&(S=y.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let se=0;se<B.length;){const Oe=B[se++];Oe=="."?S&&se==B.length&&K.push(""):Oe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&se==B.length&&K.push("")):(K.push(Oe),S=!0)}S=K.join("/")}else S=B}return E?y.h=S:E=h.i.toString()!=="",E?Tl(y,Sc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Ct(h){return new Tn(h)}function $t(h,y,E){h.j=E?Ir(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ki(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Tl(h,y,E){y instanceof Ni?(h.i=y,Ba(h.i,h.l)):(E||(y=js(y,Di)),h.i=new Ni(y,h.l))}function Xe(h,y,E){h.i.set(y,E)}function Ls(h){return Xe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ir(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,dn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var La=/[#\/\?@]/g,wc=/[#\?:]/g,bl=/[#\?]/g,Di=/[#\?@]/g,Tc=/#/g;function Ni(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function pn(h){h.g||(h.g=new Map,h.h=0,h.i&&Va(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Ni.prototype,n.add=function(h,y){pn(this),this.i=null,h=Pi(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function bc(h,y){pn(h),y=Pi(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return pn(h),y=Pi(h,y),h.g.has(y)}n.forEach=function(h,y){pn(this),this.g.forEach(function(E,S){E.forEach(function(B){h.call(y,B,S,this)},this)},this)};function Al(h,y){pn(h);let E=[];if(typeof y=="string")Sl(h,y)&&(E=E.concat(h.g.get(Pi(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}n.set=function(h,y){return pn(this),this.i=null,h=Pi(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function ja(h,y,E){bc(h,y),E.length>0&&(h.i=null,h.g.set(Pi(h,y),A(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var E=y[S];const B=Qr(E);E=Al(this,E);for(let K=0;K<E.length;K++){let se=B;E[K]!==""&&(se+="="+Qr(E[K])),h.push(se)}}return this.i=h.join("&")};function Sc(h){const y=new Ni;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Pi(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ba(h,y){y&&!h.j&&(pn(h),h.i=null,h.g.forEach(function(E,S){const B=S.toLowerCase();S!=B&&(bc(this,S),ja(this,B,E))},h)),h.j=y}function nr(h,y){const E=new Zn;if(c.Image){const S=new Image;S.onload=_(Vn,E,"TestLoadImage: loaded",!0,y,S),S.onerror=_(Vn,E,"TestLoadImage: error",!1,y,S),S.onabort=_(Vn,E,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(Vn,E,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Rl(h,y){const E=new Zn,S=new AbortController,B=setTimeout(()=>{S.abort(),Vn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(K=>{clearTimeout(B),K.ok?Vn(E,"TestPingServer: ok",!0,y):Vn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Vn(E,"TestPingServer: error",!1,y)})}function Vn(h,y,E,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(E)}catch{}}function xi(){this.g=new hc}function Or(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Or,fc),Or.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(h,y){bt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Bs,bt),n=Bs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,rr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ui(this):rr(this),this.readyState==3&&za(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ui(this))},n.Na=function(h){this.g&&(this.response=h,Ui(this))},n.ga=function(){this.g&&Ui(this)};function Ui(h){h.readyState=4,h.l=null,h.j=null,h.B=null,rr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function rr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Pe(h,function(E,S){y+=S,y+=":",y+=E,y+=`\r
`}),y}function zs(h,y,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Ln(E),typeof h=="string"?E!=null&&Qr(E):Xe(h,y,E))}function et(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(et,bt);var kr=/^https?$/i,Cl=["POST","PUT"];n=et.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){qs(this,K);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)E.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())E.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||S||B||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of E)this.g.setRequestHeader(K,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){qs(this,K)}};function qs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Il(h),Yr(h)}function Il(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$s(this):this.Xa())},n.Xa=function(){$s(this)};function $s(h){if(h.h&&typeof l<"u"){if(h.v&&ir(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),ir(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var S;if(S=K===0){let se=String(h.D).match(Ec)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),S=!kr.test(se?se.toLowerCase():"")}E=S}if(E)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var B=ir(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Il(h)}}finally{Yr(h)}}}}function Yr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||Lt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ir(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ir(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),od(y)}};function Kt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wr(h){const y={};h=(h.g&&ir(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var E=yc(h[S]);const B=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=y[B]||[];y[B]=K,K.push(E)}He(y,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Mi(h){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dr("baseRetryDelayMs",5e3,h),this.Za=Dr("retryDelaySeedMs",1e4,h),this.Ta=Dr("forwardChannelMaxRetries",2,h),this.va=Dr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new yl(h&&h.concurrentRequestLimit),this.Ba=new xi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Mi.prototype,n.ka=8,n.I=1,n.connect=function(h,y,E,S){St(0),this.W=h,this.H=y||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Dc(this,null,this.W),Nr(this)};function Ol(h){if(qa(h),h.I==3){var y=h.V++,E=Ct(h.J);if(Xe(E,"SID",h.M),Xe(E,"RID",y),Xe(E,"TYPE","terminate"),Hs(h,E),y=new er(h,h.j,y),y.M=2,y.A=Ls(Ct(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=Nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),br(y)}kc(h)}function Vi(h){h.g&&(Dl(h),h.g.cancel(),h.g=null)}function qa(h){Vi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ha(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Nr(h){if(!_l(h.h)&&!h.m){h.m=!0;var y=h.Ea;pe||C(),le||(pe(),le=!0),I.add(y,h),h.D=0}}function $a(h,y){return Rr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Er(g(h.Ea,h,y),Oc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new er(this,this.j,h);let K=this.o;if(this.U&&(K?(K=M(K),ae(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Ac(this,B,y),E=Ct(this.J),Xe(E,"RID",h),Xe(E,"CVER",22),this.G&&Xe(E,"X-HTTP-Session-Id",this.G),Hs(this,E),K&&(this.R?y="headers="+Qr(Ln(K))+"&"+y:this.u&&zs(E,this.u,K)),vl(this.h,B),this.Ra&&Xe(E,"TYPE","init"),this.S?(Xe(E,"$req",y),Xe(E,"SID","null"),B.U=!0,Tr(B,E,null)):Tr(B,E,y),this.I=2}}else this.I==3&&(h?kl(this,h):this.i.length==0||_l(this.h)||kl(this))};function kl(h,y){var E;y?E=y.l:E=h.V++;const S=Ct(h.J);Xe(S,"SID",h.M),Xe(S,"RID",E),Xe(S,"AID",h.K),Hs(h,S),h.u&&h.o&&zs(S,h.u,h.o),E=new er(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ac(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),vl(h.h,E),Tr(E,S,y)}function Hs(h,y){h.H&&Pe(h.H,function(E,S){Xe(y,S,E)}),h.l&&Pe({},function(E,S){Xe(y,S,E)})}function Ac(h,y,E){E=Math.min(h.i.length,E);const S=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let Oe=-1;for(;;){const vt=["count="+E];Oe==-1?E>0?(Oe=B[0].g,vt.push("ofs="+Oe)):Oe=0:vt.push("ofs="+Oe);let Qe=!0;for(let ht=0;ht<E;ht++){var K=B[ht].g;const jn=B[ht].map;if(K-=Oe,K<0)Oe=Math.max(0,B[ht].g-100),Qe=!1;else try{K="req"+K+"_"||"";try{var se=jn instanceof Map?jn:Object.entries(jn);for(const[xr,sr]of se){let ar=sr;d(sr)&&(ar=Oi(sr)),vt.push(K+xr+"="+encodeURIComponent(ar))}}catch(xr){throw vt.push(K+"type="+encodeURIComponent("_badmap")),xr}}catch{S&&S(jn)}}if(Qe){se=vt.join("&");break e}}se=void 0}return h=h.i.splice(0,E),y.G=h,se}function Rc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;pe||C(),le||(pe(),le=!0),I.add(y,h),h.A=0}}function Fs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Er(g(h.Da,h),Oc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Cc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Er(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Vi(this),Cc(this))};function Dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Cc(h){h.g=new er(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);Xe(y,"RID","rpc"),Xe(y,"SID",h.M),Xe(y,"AID",h.K),Xe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xe(y,"TO",h.ia),Xe(y,"TYPE","xmlhttp"),Hs(h,y),h.u&&h.o&&zs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ls(Ct(y)),E.u=null,E.R=!0,Ua(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Vi(this),Fs(this),St(19))};function Ha(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ic(h,y){var E=null;if(h.g==y){Ha(h),Dl(h),h.g=null;var S=2}else if(Cr(h.h,y))E=y.G,El(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;S=xa(),Lt(S,new vr(S,E)),Nr(h)}else Rc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(S==1&&$a(h,y)||S==2&&Fs(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),B){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function Oc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Pr(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),S=h.Ua;const B=!S;S=new Tn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$t(S,"https"),Ls(S),B?nr(S.toString(),E):Rl(S.toString(),E)}else St(2);h.I=0,h.l&&h.l.pa(y),kc(h),qa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function kc(h){if(h.I=0,h.ja=[],h.l){const y=wl(h.h);(y.length!=0||h.i.length!=0)&&(N(h.ja,y),N(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Dc(h,y,E){var S=E instanceof Tn?Ct(E):new Tn(E);if(S.g!="")y&&(S.g=y+"."+S.g),ki(S,S.u);else{var B=c.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const K=new Tn(null);S&&$t(K,S),y&&(K.g=y),B&&ki(K,B),E&&(K.h=E),S=K}return E=h.G,y=h.wa,E&&y&&Xe(S,E,y),Xe(S,"VER",h.ka),Hs(h,S),S}function Nc(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new et(new Or({ab:E})):new et(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}n=Pc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Li(){}Li.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){bt.call(this),this.g=new Mi(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Xr(this)}w(hn,bt),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ol(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Oi(h),h=E);y.i.push(new Rt(y.Ya++,h)),y.I==3&&Nr(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,hn.Z.N.call(this)};function xc(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(xc,Gt);function Uc(){Un.call(this),this.status=1}w(Uc,Un);function Xr(h){this.g=h}w(Xr,Pc),Xr.prototype.ra=function(){Lt(this.g,"a")},Xr.prototype.qa=function(h){Lt(this.g,new xc(h))},Xr.prototype.pa=function(h){Lt(this.g,new Uc)},Xr.prototype.oa=function(){Lt(this.g,"b")},Li.prototype.createWebChannel=Li.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,kb=function(){return new Li},Ob=function(){return xa()},Ib=_t,Gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,af=Ms,ml.COMPLETE="complete",Cb=ml,dc.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Eu=dc,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Rb=et}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const Lw="@firebase/firestore",jw="4.9.3";class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let il="12.7.0";const Aa=new Ig("@firebase/firestore");function ko(){return Aa.logLevel}function ce(n,...e){if(Aa.logLevel<=Le.DEBUG){const t=e.map(zg);Aa.debug(`Firestore (${il}): ${n}`,...t)}}function bi(n,...e){if(Aa.logLevel<=Le.ERROR){const t=e.map(zg);Aa.error(`Firestore (${il}): ${n}`,...t)}}function Fo(n,...e){if(Aa.logLevel<=Le.WARN){const t=e.map(zg);Aa.warn(`Firestore (${il}): ${n}`,...t)}}function zg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Db(n,i,t)}function Db(n,e,t){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw bi(i),new Error(i)}function We(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Db(e,a,i)}function Ie(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Nb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class qD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $D{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vs,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new Nb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class HD{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FD{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new HD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class qg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=KD(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function je(n,e){return n<e?-1:n>e?1:0}function Km(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Em(a)===Em(l)?je(a,l):Em(a)?1:-1}return je(n.length,e.length)}const QD=55296,YD=57343;function Em(n){const e=n.charCodeAt(0);return e>=QD&&e<=YD}function Go(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}const zw="__name__";class jr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=jr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const i=jr.isNumericId(e),a=jr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?jr.extractNumericId(e).compare(jr.extractNumericId(t)):Km(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class at extends jr{construct(e,t,i){return new at(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const WD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends jr{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return WD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zw}static keyField(){return new tn([zw])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ue(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ue(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(at.fromString(e))}static fromName(e){return new _e(at.fromString(e).popFirst(5))}static empty(){return new _e(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new at(e.slice()))}}function Pb(n,e,t){if(!t)throw new ue(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XD(n,e,t,i){if(e===!0&&i===!0)throw new ue(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qw(n){if(!_e.isDocumentKey(n))throw new ue(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $w(n){if(_e.isDocumentKey(n))throw new ue(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function vi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(n);throw new ue(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function ic(n,e){if(!xb(n))throw new ue(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ue(te.INVALID_ARGUMENT,t);return!0}const Hw=-62135596800,Fw=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Fw);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hw)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fw}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Ut("string",ut._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mu=-1;function JD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new ws(a,_e.empty(),e)}function ZD(n){return new ws(n.readTime,n.key,Mu)}class ws{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ws(Re.min(),_e.empty(),Mu)}static max(){return new ws(Re.max(),_e.empty(),Mu)}}function eN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}const tN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sl(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==tN)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((a=>a?ne.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new ne(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function rN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}class qf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qf.ce=-1;const $g=-1;function $f(n){return n==null}function wf(n){return n===0&&1/n==-1/0}function iN(n){return typeof n=="number"&&Number.isInteger(n)&&!wf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ub="";function sN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gw(e)),e=aN(n.get(t),e);return Gw(e)}function aN(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Ub:t+="";break;default:t+=l}}return t}function Gw(n){return n+Ub+""}function Kw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ca(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Mb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new en(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qw(this.data.getIterator())}getIteratorFrom(e){return new Qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class Qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pr{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new pr([])}unionWith(e){let t=new zt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Vb("Invalid base64 string: "+l):l}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const oN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=oN.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}const Lb="server_timestamp",jb="__type__",Bb="__previous_value__",zb="__local_write_time__";function Hg(n){return(n?.mapValue?.fields||{})[jb]?.stringValue===Lb}function Hf(n){const e=n.mapValue.fields[Bb];return Hg(e)?Hf(e):e}function Vu(n){const e=Ts(n.mapValue.fields[zb].timestampValue);return new ut(e.seconds,e.nanos)}class lN{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Tf="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||Tf}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}const qb="__type__",uN="__max__",$h={mapValue:{}},$b="__vector__",bf="value";function Ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hg(n)?4:hN(n)?9007199254740991:cN(n)?10:11:Se(28295,{value:n})}function Gr(n,e){if(n===e)return!0;const t=Ss(n);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vu(n).isEqual(Vu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ts(a.timestampValue),d=Ts(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return bs(a.bytesValue).isEqual(bs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Tt(a.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(a.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Tt(a.integerValue)===Tt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Tt(a.doubleValue),d=Tt(l.doubleValue);return c===d?wf(c)===wf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Go(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Kw(c)!==Kw(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Gr(c[p],d[p])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function ju(n,e){return(n.values||[]).find((t=>Gr(t,e)))!==void 0}function Ko(n,e){if(n===e)return 0;const t=Ss(n),i=Ss(e);if(t!==i)return je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Tt(l.integerValue||l.doubleValue),p=Tt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Yw(n.timestampValue,e.timestampValue);case 4:return Yw(Vu(n),Vu(e));case 5:return Km(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=bs(l),p=bs(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=je(d[g],p[g]);if(_!==0)return _}return je(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=je(Tt(l.latitude),Tt(c.latitude));return d!==0?d:je(Tt(l.longitude),Tt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ww(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[bf]?.arrayValue,_=p[bf]?.arrayValue,w=je(g?.values?.length||0,_?.values?.length||0);return w!==0?w:Ww(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===$h.mapValue&&c===$h.mapValue)return 0;if(l===$h.mapValue)return 1;if(c===$h.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const b=Km(p[w],_[w]);if(b!==0)return b;const A=Ko(d[p[w]],g[_[w]]);if(A!==0)return A}return je(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Yw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Ts(n),i=Ts(e),a=je(t.seconds,i.seconds);return a!==0?a:je(t.nanos,i.nanos)}function Ww(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Ko(t[a],i[a]);if(l)return l}return je(t.length,i.length)}function Qo(n){return Qm(n)}function Qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ts(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return bs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Qm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Qm(t.fields[c])}`;return a+"}"})(n.mapValue):Se(61005,{value:n})}function of(n){switch(Ss(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(n);return e?16+of(e):16;case 5:return 2*n.stringValue.length;case 6:return bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+of(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ca(i.fields,((l,c)=>{a+=l.length+of(c)})),a})(n.mapValue);default:throw Se(13486,{value:n})}}function Xw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ym(n){return!!n&&"integerValue"in n}function Fg(n){return!!n&&"arrayValue"in n}function Jw(n){return!!n&&"nullValue"in n}function Zw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lf(n){return!!n&&"mapValue"in n}function cN(n){return(n?.mapValue?.fields||{})[qb]?.stringValue===$b}function Cu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ca(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cu(n.arrayValue.values[t]);return e}return{...n}}function hN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uN}class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Cu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];lf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ca(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Qn(Cu(this.value))}}function Hb(n){const e=[];return Ca(n.fields,((t,i)=>{const a=new tn([t]);if(lf(i)){const l=Hb(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new pr(e)}class ln{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ln(e,0,Re.min(),Re.min(),Re.min(),Qn.empty(),0)}static newFoundDocument(e,t,i,a){return new ln(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new ln(e,2,t,Re.min(),Re.min(),Qn.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Re.min(),Re.min(),Qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sf{constructor(e,t){this.position=e,this.inclusive=t}}function e0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(c.referenceValue),t.key):i=Ko(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function t0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function fN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Fb{}class xt extends Fb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new pN(e,t,i):t==="array-contains"?new yN(e,i):t==="in"?new _N(e,i):t==="not-in"?new vN(e,i):t==="array-contains-any"?new EN(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mN(e,i):new gN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ko(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends Fb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gr(e,t)}matches(e){return Gb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gb(n){return n.op==="and"}function Kb(n){return dN(n)&&Gb(n)}function dN(n){for(const e of n.filters)if(e instanceof gr)return!1;return!0}function Wm(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Qo(n.value);if(Kb(n))return n.filters.map((e=>Wm(e))).join(",");{const e=n.filters.map((t=>Wm(t))).join(",");return`${n.op}(${e})`}}function Qb(n,e){return n instanceof xt?(function(i,a){return a instanceof xt&&i.op===a.op&&i.field.isEqual(a.field)&&Gr(i.value,a.value)})(n,e):n instanceof gr?(function(i,a){return a instanceof gr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&Qb(c,a.filters[d])),!0):!1})(n,e):void Se(19439)}function Yb(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(n):n instanceof gr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yb).join(" ,")+"}"})(n):"Filter"}class pN extends xt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class mN extends xt{constructor(e,t){super(e,"in",t),this.keys=Wb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gN extends xt{constructor(e,t){super(e,"not-in",t),this.keys=Wb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wb(n,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class yN extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fg(t)&&ju(t.arrayValue,this.value)}}class _N extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class vN extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class EN extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ju(this.value.arrayValue,i)))}}class wN{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function n0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new wN(n,e,t,i,a,l,c)}function Gg(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Wm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),$f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Qo(i))).join(",")),e.Te=t}return e.Te}function Kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!t0(n.startAt,e.startAt)&&t0(n.endAt,e.endAt)}function Xm(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ol{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TN(n,e,t,i,a,l,c,d){return new ol(n,e,t,i,a,l,c,d)}function Qg(n){return new ol(n)}function r0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xb(n){return n.collectionGroup!==null}function Iu(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new zt(tn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bu(l,i))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new Bu(tn.keyField(),i))}return e.Ie}function zr(n){const e=Ie(n);return e.Ee||(e.Ee=bN(e,Iu(n))),e.Ee}function bN(n,e){if(n.limitType==="F")return n0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Bu(a.field,l)}));const t=n.endAt?new Sf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sf(n.startAt.position,n.startAt.inclusive):null;return n0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Jm(n,e){const t=n.filters.concat([e]);return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zm(n,e,t){return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ff(n,e){return Kg(zr(n),zr(e))&&n.limitType===e.limitType}function Jb(n){return`${Gg(zr(n))}|lt:${n.limitType}`}function Do(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Yb(a))).join(", ")}]`),$f(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Qo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Qo(a))).join(",")),`Target(${i})`})(zr(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Iu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=e0(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Iu(i),a)||i.endAt&&!(function(c,d,p){const g=e0(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Iu(i),a))})(n,e)}function SN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zb(n){return(e,t)=>{let i=!1;for(const a of Iu(n)){const l=AN(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function AN(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ko(p,g):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Mb(this.inner)}size(){return this.innerSize}}const RN=new pt(_e.comparator);function Si(){return RN}const eS=new pt(_e.comparator);function wu(...n){let e=eS;for(const t of n)e=e.insert(t.key,t);return e}function tS(n){let e=eS;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ga(){return Ou()}function nS(){return Ou()}function Ou(){return new Ia((n=>n.toString()),((n,e)=>n.isEqual(e)))}const CN=new pt(_e.comparator),IN=new zt(_e.comparator);function Be(...n){let e=IN;for(const t of n)e=e.add(t);return e}const ON=new zt(je);function kN(){return ON}function Yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function rS(n){return{integerValue:""+n}}function DN(n,e){return iN(e)?rS(e):Yg(n,e)}class Kf{constructor(){this._=void 0}}function NN(n,e,t){return n instanceof zu?(function(a,l){const c={fields:{[jb]:{stringValue:Lb},[zb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Hg(l)&&(l=Hf(l)),l&&(c.fields[Bb]=l),{mapValue:c}})(t,e):n instanceof qu?sS(n,e):n instanceof $u?aS(n,e):(function(a,l){const c=iS(a,l),d=i0(c)+i0(a.Ae);return Ym(c)&&Ym(a.Ae)?rS(d):Yg(a.serializer,d)})(n,e)}function PN(n,e,t){return n instanceof qu?sS(n,e):n instanceof $u?aS(n,e):t}function iS(n,e){return n instanceof Af?(function(i){return Ym(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class zu extends Kf{}class qu extends Kf{constructor(e){super(),this.elements=e}}function sS(n,e){const t=oS(e);for(const i of n.elements)t.some((a=>Gr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class $u extends Kf{constructor(e){super(),this.elements=e}}function aS(n,e){let t=oS(e);for(const i of n.elements)t=t.filter((a=>!Gr(a,i)));return{arrayValue:{values:t}}}class Af extends Kf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function i0(n){return Tt(n.integerValue||n.doubleValue)}function oS(n){return Fg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xN{constructor(e,t){this.field=e,this.transform=t}}function UN(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof qu&&a instanceof qu||i instanceof $u&&a instanceof $u?Go(i.elements,a.elements,Gr):i instanceof Af&&a instanceof Af?Gr(i.Ae,a.Ae):i instanceof zu&&a instanceof zu})(n.transform,e.transform)}class MN{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qf{}function lS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cS(n.key,qr.none()):new sc(n.key,n.data,qr.none());{const t=n.data,i=Qn.empty();let a=new zt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Oa(n.key,i,new pr(a.toArray()),qr.none())}}function VN(n,e,t){n instanceof sc?(function(a,l,c){const d=a.value.clone(),p=a0(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Oa?(function(a,l,c){if(!uf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=a0(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(uS(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ku(n,e,t,i){return n instanceof sc?(function(l,c,d,p){if(!uf(l.precondition,c))return d;const g=l.value.clone(),_=o0(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Oa?(function(l,c,d,p){if(!uf(l.precondition,c))return d;const g=o0(l.fieldTransforms,p,c),_=c.data;return _.setAll(uS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(l,c,d){return uf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function LN(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=iS(i.transform,a||null);l!=null&&(t===null&&(t=Qn.empty()),t.set(i.field,l))}return t||null}function s0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Go(i,a,((l,c)=>UN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sc extends Qf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Oa extends Qf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function a0(n,e,t){const i=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,PN(c,d,t[a]))}return i}function o0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,NN(l,c,e))}return i}class cS extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jN extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BN{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&VN(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ku(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ku(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=lS(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((t,i)=>s0(t,i)))&&Go(this.baseMutations,e.baseMutations,((t,i)=>s0(t,i)))}}class Wg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return CN})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Wg(e,t,i,a)}}class zN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nt,$e;function $N(n){switch(n){case te.OK:return Se(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function hS(n){if(n===void 0)return bi("GRPC error has no .code"),te.UNKNOWN;switch(n){case Nt.OK:return te.OK;case Nt.CANCELLED:return te.CANCELLED;case Nt.UNKNOWN:return te.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return te.INTERNAL;case Nt.UNAVAILABLE:return te.UNAVAILABLE;case Nt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Nt.NOT_FOUND:return te.NOT_FOUND;case Nt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Nt.ABORTED:return te.ABORTED;case Nt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Nt.DATA_LOSS:return te.DATA_LOSS;default:return Se(39323,{code:n})}}($e=Nt||(Nt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function HN(){return new TextEncoder}const FN=new _s([4294967295,4294967295],0);function l0(n){const e=HN().encode(n),t=new Ab;return t.update(e),new Uint8Array(t.digest())}function u0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _s([t,i],0),new _s([a,l],0)]}class Xg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tu(`Invalid padding: ${t}`);if(i<0)throw new Tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_s.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(_s.fromNumber(i)));return a.compare(FN)===1&&(a=new _s([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=l0(e),[i,a]=u0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Xg(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=l0(e),[i,a]=u0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yf(Re.min(),a,new pt(je),Si(),Be())}}class ac{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ac(i,t,Be(),Be(),Be())}}class cf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class fS{constructor(e,t){this.targetId=e,this.Ce=t}}class dS{constructor(e,t,i=rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class c0{constructor(){this.ve=0,this.Fe=h0(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Se(38017,{changeType:l})}})),new ac(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=h0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=Hh(),this.He=Hh(),this.Ye=new pt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Xm(l))if(i===0){const c=new _e(l.path);this.et(t,c,ln.newNoDocument(c,Re.min()))}else We(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=bs(i).toUint8Array()}catch(p){if(p instanceof Vb)return Fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Xg(c,a,l)}catch(p){return Fo(p instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Xm(d.target)){const p=new _e(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,ln.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Be();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Yf(e,t,this.Ye,this.je,i);return this.je=Si(),this.Je=Hh(),this.He=Hh(),this.Ye=new pt(je),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new c0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new c0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hh(){return new pt(_e.comparator)}function h0(){return new pt(_e.comparator)}const KN={asc:"ASCENDING",desc:"DESCENDING"},QN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YN={and:"AND",or:"OR"};class WN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(n,e){return n.useProto3Json||$f(e)?e:{value:e}}function Rf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XN(n,e){return Rf(n,e.toTimestamp())}function $r(n){return We(!!n,49232),Re.fromTimestamp((function(t){const i=Ts(t);return new ut(i.seconds,i.nanos)})(n))}function Jg(n,e){return tg(n,e).canonicalString()}function tg(n,e){const t=(function(a){return new at(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mS(n){const e=at.fromString(n);return We(ES(e),10190,{key:e.toString()}),e}function ng(n,e){return Jg(n.databaseId,e.path)}function wm(n,e){const t=mS(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(yS(t))}function gS(n,e){return Jg(n.databaseId,e)}function JN(n){const e=mS(n);return e.length===4?at.emptyPath():yS(e)}function rg(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function f0(n,e,t){return{name:ng(n,e),fields:t.value.mapValue.fields}}function ZN(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(We(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?te.UNKNOWN:hS(g.code);return new ue(_,g.message||"")})(c);t=new dS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=wm(n,i.document.name),l=$r(i.document.updateTime),c=i.document.createTime?$r(i.document.createTime):Re.min(),d=new Qn({mapValue:{fields:i.document.fields}}),p=ln.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new cf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=wm(n,i.document),l=i.readTime?$r(i.readTime):Re.min(),c=ln.newNoDocument(a,l),d=i.removedTargetIds||[];t=new cf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=wm(n,i.document),l=i.removedTargetIds||[];t=new cf([],l,a,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new qN(a,l),d=i.targetId;t=new fS(d,c)}}return t}function e2(n,e){let t;if(e instanceof sc)t={update:f0(n,e.key,e.value)};else if(e instanceof cS)t={delete:ng(n,e.key)};else if(e instanceof Oa)t={update:f0(n,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof jN))return Se(16599,{Vt:e.type});t={verify:ng(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof zu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof qu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof $u)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Af)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:XN(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function t2(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?$r(a.updateTime):$r(l);return c.isEqual(Re.min())&&(c=$r(l)),new MN(c,a.transformResults||[])})(t,e)))):[]}function n2(n,e){return{documents:[gS(n,e.path)]}}function r2(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gS(n,a);const l=(function(g){if(g.length!==0)return vS(gr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:No(b.field),direction:a2(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=eg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function i2(n){let e=JN(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){We(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(w){const b=_S(w);return b instanceof gr&&Kb(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((b=>(function(N){return new Bu(Po(N.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let b;return b=typeof w=="object"?w.value:w,$f(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(w){const b=!!w.before,A=w.values||[];return new Sf(A,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(w){const b=!w.before,A=w.values||[];return new Sf(A,b)})(t.endAt)),TN(e,a,c,l,d,"F",p,g)}function s2(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _S(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Po(t.unaryFilter.field);return xt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(t.unaryFilter.field);return xt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(Po(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gr.create(t.compositeFilter.filters.map((i=>_S(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function a2(n){return KN[n]}function o2(n){return QN[n]}function l2(n){return YN[n]}function No(n){return{fieldPath:n.canonicalString()}}function Po(n){return tn.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof xt?(function(t){if(t.op==="=="){if(Zw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Jw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Jw(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:o2(t.op),value:t.value}}})(n):n instanceof gr?(function(t){const i=t.getFilters().map((a=>vS(a)));return i.length===1?i[0]:{compositeFilter:{op:l2(t.op),filters:i}}})(n):Se(54877,{filter:n})}function u2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ES(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ds{constructor(e,t,i,a,l=Re.min(),c=Re.min(),d=rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class c2{constructor(e){this.yt=e}}function h2(n){const e=i2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(e,e.limit,"L"):e}class f2{constructor(){this.Cn=new d2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ws.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class d2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new zt(at.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new zt(at.comparator)).toArray()}}const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wS=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(wS,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}const p0="LruGarbageCollector",p2=1048576;function m0([n,e],[t,i]){const a=je(n,t);return a===0?je(e,i):a}class m2{constructor(e){this.Ir=e,this.buffer=new zt(m0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();m0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?ce(p0,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.Vr(3e5)}))}}class y2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(qf.ce);const i=new m2(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(d0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,c=Date.now(),this.nthSequenceNumber(e,a)))).next((w=>(i=w,d=Date.now(),this.removeTargets(e,i,t)))).next((w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(g=Date.now(),ko()<=Le.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w}))))}}function _2(n,e){return new y2(n,e)}class v2{constructor(){this.changes=new Ia((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class E2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class w2{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&ku(i.mutation,a,pr.empty(),ut.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const a=ga();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=wu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=ga();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Si();const c=Ou(),d=(function(){return Ou()})();return t.forEach(((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Oa)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),ku(_.mutation,g,_.mutation.getFieldMask(),ut.now())):c.set(g.key,pr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new E2(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Ou();let a=new pt(((c,d)=>c-d)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||pr.empty();_=d.applyToLocalView(g,_),i.set(p,_);const w=(a.get(d.batchId)||Be()).add(p);a=a.insert(d.batchId,w)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,w=nS();_.forEach((b=>{if(!l.has(b)){const A=lS(t.get(b),i.get(b));A!==null&&w.set(b,A),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ne.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ne.resolve(ga());let d=Mu,p=l;return c.next((g=>ne.forEach(g,((_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{p=p.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Be()))).next((_=>({batchId:d,changes:tS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let a=wu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=wu();return this.indexManager.getCollectionParents(e,l).next((d=>ne.forEach(d,(p=>{const g=(function(w,b){return new ol(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((w,b)=>{c=c.insert(w,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,ln.newInvalidDocument(_)))}));let d=wu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&ku(_.mutation,g,pr.empty(),ut.now()),Gf(t,g)&&(d=d.insert(p,g))})),d}))}}class T2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:$r(a.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:h2(a.bundledQuery),readTime:$r(a.readTime)}})(t)),ne.resolve()}}class b2{constructor(){this.overlays=new pt(_e.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ga();return ne.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const a=ga(),l=t.length+1,c=new _e(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new pt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=ga(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=ga(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return ne.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new zN(t,i));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class S2{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}class Zg{constructor(){this.Qr=new zt(Ft.$r),this.Ur=new zt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new _e(new at([])),i=new Ft(t,e),a=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new at([])),i=new Ft(t,e),a=new Ft(t,e+1);let l=Be();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}class A2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Ft.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new BN(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Ft(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?$g:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),a=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zt(je);return t.forEach((a=>{const l=new Ft(a,0),c=new Ft(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),ne.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new _e(l),0);let d=new zt(je);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),ne.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ne.forEach(t.mutations,(a=>{const l=new Ft(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),a=this.Zr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class R2{constructor(e){this.ri=e,this.docs=(function(){return new pt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let i=Si();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():ln.newInvalidDocument(a))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Si();const c=t.path,d=new _e(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||eN(ZD(_),i)<=0||(a.has(_.key)||Gf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Se(9500)}ii(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new C2(this)}getSize(e){return ne.resolve(this.size)}}class C2 extends v2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class I2{constructor(e){this.persistence=e,this.si=new Ia((t=>Gg(t)),Kg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Zg,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),ne.waitFor(l).next((()=>a))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}class TS{constructor(e,t){this.ui={},this.overlays={},this.ci=new qf(0),this.li=!1,this.li=!0,this.hi=new S2,this.referenceDelegate=e(this),this.Pi=new I2(this),this.indexManager=new f2,this.remoteDocumentCache=(function(a){return new R2(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new c2(t),this.Ii=new T2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new A2(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const a=new O2(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class O2 extends nN{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Ri=new Zg,this.Vi=null}static mi(e){return new ey(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(i=>{const a=_e.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.pi=new Ia((i=>sN(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=_2(this,t)}static mi(e,t){return new Cf(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ne.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=of(e.data.value)),t}br(e,t,i){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ne.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ty{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Be(),a=Be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ty(e,t.fromCache,i,a)}}class k2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class D2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return s1()?8:rN(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new k2;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(ko()<=Le.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Do(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(ko()<=Le.DEBUG&&ce("QueryEngine","Query:",Do(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(ko()<=Le.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Do(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):ne.resolve())}ys(e,t){if(r0(t))return ne.resolve(null);let i=zr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Zm(t,null,"F"),i=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Be(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,Zm(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return r0(t)||a.isEqual(Re.min())?ne.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?ne.resolve(null):(ko()<=Le.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Do(t)),this.vs(e,c,t,JD(a,Mu)).next((d=>d)))}))}Ds(e,t){let i=new zt(Zb(e));return t.forEach(((a,l)=>{Gf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return ko()<=Le.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Do(t)),this.ps.getDocumentsMatchingQuery(e,t,ws.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const ny="LocalStore",N2=3e8;class P2{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new pt(je),this.xs=new Ia((l=>Gg(l)),Kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function x2(n,e,t,i){return new P2(n,e,t,i)}async function bS(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Be();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function U2(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const w=g.batch,b=w.keys();let A=ne.resolve();return b.forEach((N=>{A=A.next((()=>_.getEntry(p,N))).next((k=>{const P=g.docVersions.get(N);We(P!==null,48541),k.version.compareTo(P)<0&&(w.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),_.addEntry(k)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(p,w)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Be();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function SS(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function M2(n,e){const t=Ie(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,w)=>{const b=a.get(w);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,w))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(rn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),a=a.insert(w,A),(function(k,P,H){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=N2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(b,A,_)&&d.push(t.Pi.updateTargetData(l,A))}));let p=Si(),g=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(V2(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(Re.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return ne.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function V2(n,e,t){let i=Be(),a=Be();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Si();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ce(ny,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function L2(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=$g),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function j2(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ne.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new ds(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ig(n,e,t){const i=Ie(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!al(c))throw c;ce(ny,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function g0(n,e,t){const i=Ie(n);let a=Re.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const w=Ie(p),b=w.xs.get(_);return b!==void 0?ne.resolve(w.Ms.get(b)):w.Pi.getTargetData(g,_)})(i,c,zr(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Be()))).next((d=>(B2(i,SN(e),d),{documents:d,Qs:l})))))}function B2(n,e,t){let i=n.Os.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class y0{constructor(){this.activeTargetIds=kN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z2{constructor(){this.Mo=new y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class q2{Oo(e){}shutdown(){}}const _0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(_0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(_0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fh=null;function sg(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}const Tm="RestConnection",$2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class H2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Tf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=sg(),d=this.zo(e,t.toUriEncodedString());ce(Tm,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=tl(g);return this.Jo(e,d,p,i,_).then((w=>(ce(Tm,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Fo(Tm,`RPC '${e}' ${c} failed with error: `,w,"url: ",d,"request:",i),w}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=$2[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class F2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const an="WebChannelConnection";class G2 extends H2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=sg();return new Promise(((d,p)=>{const g=new Rb;g.setWithCredentials(!0),g.listenOnce(Cb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case af.NO_ERROR:const w=g.getResponseJson();ce(an,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),d(w);break;case af.TIMEOUT:ce(an,`RPC '${e}' ${c} timed out`),p(new ue(te.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const b=g.getStatus();if(ce(an,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A?.error;if(N&&N.status&&N.message){const k=(function(H){const $=H.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf($)>=0?$:te.UNKNOWN})(N.status);p(new ue(k,N.message))}else p(new ue(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ue(te.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(an,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ce(an,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=sg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kb(),d=Ob(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ce(an,`Creating RPC '${e}' stream ${a}: ${_}`,p);const w=c.createWebChannel(_,p);this.I_(w);let b=!1,A=!1;const N=new F2({Yo:P=>{A?ce(an,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(b||(ce(an,`Opening RPC '${e}' stream ${a} transport.`),w.open(),b=!0),ce(an,`RPC '${e}' stream ${a} sending:`,P),w.send(P))},Zo:()=>w.close()}),k=(P,H,$)=>{P.listen(H,(G=>{try{$(G)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return k(w,Eu.EventType.OPEN,(()=>{A||(ce(an,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),k(w,Eu.EventType.CLOSE,(()=>{A||(A=!0,ce(an,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(w))})),k(w,Eu.EventType.ERROR,(P=>{A||(A=!0,Fo(an,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),N.a_(new ue(te.UNAVAILABLE,"The operation could not be completed")))})),k(w,Eu.EventType.MESSAGE,(P=>{if(!A){const H=P.data[0];We(!!H,16349);const $=H,G=$?.error||$[0]?.error;if(G){ce(an,`RPC '${e}' stream ${a} received error:`,G);const ie=G.status;let pe=(function(C){const O=Nt[C];if(O!==void 0)return hS(O)})(ie),le=G.message;pe===void 0&&(pe=te.INTERNAL,le="Unknown error status: "+ie+" with message "+G.message),A=!0,N.a_(new ue(pe,le)),w.close()}else ce(an,`RPC '${e}' stream ${a} received:`,H),N.u_(H)}})),k(d,Ib.STAT_EVENT,(P=>{P.stat===Gm.PROXY?ce(an,`RPC '${e}' stream ${a} detected buffering proxy`):P.stat===Gm.NOPROXY&&ce(an,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function bm(){return typeof document<"u"?document:null}function Wf(n){return new WN(n,!0)}class AS{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const E0="PersistentStream";class RS{constructor(e,t,i,a,l,c,d,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ue(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(E0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(E0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K2 extends RS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZN(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?$r(c.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=rg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Xm(p)?{documents:n2(l,p)}:{query:r2(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=pS(l,c.resumeToken);const g=eg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=Rf(l,c.snapshotVersion.toTimestamp());const g=eg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=s2(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=rg(this.serializer),t.removeTarget=e,this.q_(t)}}class Q2 extends RS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=t2(e.writeResults,e.commitTime),i=$r(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=rg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>e2(this.serializer,i)))};this.q_(t)}}class Y2{}class W2 extends Y2{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,tg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(te.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,tg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class X2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bi(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ra="RemoteStore";class J2{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{ka(this)&&(ce(Ra,"Restarting streams for network reachability change."),await(async function(p){const g=Ie(p);g.Ea.add(4),await oc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Xf(g)})(this))}))})),this.Ra=new X2(i,a)}}async function Xf(n){if(ka(n))for(const e of n.da)await e(!0)}async function oc(n){for(const e of n.da)await e(!1)}function CS(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ay(t)?sy(t):ll(t).O_()&&iy(t,e))}function ry(n,e){const t=Ie(n),i=ll(t);t.Ia.delete(e),i.O_()&&IS(t,e),t.Ia.size===0&&(i.O_()?i.L_():ka(t)&&t.Ra.set("Unknown"))}function iy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(n).Y_(e)}function IS(n,e){n.Va.Ue(e),ll(n).Z_(e)}function sy(n){n.Va=new GN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.Ra.ua()}function ay(n){return ka(n)&&!ll(n).x_()&&n.Ia.size>0}function ka(n){return Ie(n).Ea.size===0}function OS(n){n.Va=void 0}async function Z2(n){n.Ra.set("Online")}async function eP(n){n.Ia.forEach(((e,t)=>{iy(n,e)}))}async function tP(n,e){OS(n),ay(n)?(n.Ra.ha(e),sy(n)):n.Ra.set("Unknown")}async function nP(n,e,t){if(n.Ra.set("Online"),e instanceof dS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(i){ce(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await If(n,i)}else if(e instanceof cf?n.Va.Ze(e):e instanceof fS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const i=await SS(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),IS(l,p);const w=new ds(_.target,p,g,_.sequenceNumber);iy(l,w)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ce(Ra,"Failed to raise snapshot:",i),await If(n,i)}}async function If(n,e,t){if(!al(e))throw e;n.Ea.add(1),await oc(n),n.Ra.set("Offline"),t||(t=()=>SS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(Ra,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xf(n)}))}function kS(n,e){return e().catch((t=>If(n,t,e)))}async function Jf(n){const e=Ie(n),t=As(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$g;for(;rP(e);)try{const a=await L2(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,iP(e,a)}catch(a){await If(e,a)}DS(e)&&NS(e)}function rP(n){return ka(n)&&n.Ta.length<10}function iP(n,e){n.Ta.push(e);const t=As(n);t.O_()&&t.X_&&t.ea(e.mutations)}function DS(n){return ka(n)&&!As(n).x_()&&n.Ta.length>0}function NS(n){As(n).start()}async function sP(n){As(n).ra()}async function aP(n){const e=As(n);for(const t of n.Ta)e.ea(t.mutations)}async function oP(n,e,t){const i=n.Ta.shift(),a=Wg.from(i,e,t);await kS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Jf(n)}async function lP(n,e){e&&As(n).X_&&await(async function(i,a){if((function(c){return $N(c)&&c!==te.ABORTED})(a.code)){const l=i.Ta.shift();As(i).B_(),await kS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Jf(i)}})(n,e),DS(n)&&NS(n)}async function w0(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ce(Ra,"RemoteStore received new credentials");const i=ka(t);t.Ea.add(3),await oc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xf(t)}async function uP(n,e){const t=Ie(n);e?(t.Ea.delete(2),await Xf(t)):e||(t.Ea.add(2),await oc(t),t.Ra.set("Unknown"))}function ll(n){return n.ma||(n.ma=(function(t,i,a){const l=Ie(t);return l.sa(),new K2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:Z2.bind(null,n),t_:eP.bind(null,n),r_:tP.bind(null,n),H_:nP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ay(n)?sy(n):n.Ra.set("Unknown")):(await n.ma.stop(),OS(n))}))),n.ma}function As(n){return n.fa||(n.fa=(function(t,i,a){const l=Ie(t);return l.sa(),new Q2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:sP.bind(null,n),r_:lP.bind(null,n),ta:aP.bind(null,n),na:oP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Jf(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(Ra,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class oy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new oy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(n,e){if(bi("AsyncQueue",`${e}: ${n}`),al(n))return new ue(te.UNAVAILABLE,`${e}: ${n}`);throw n}class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=wu(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class T0{constructor(){this.ga=new pt(_e.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wo{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Wo(e,t,zo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class cP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hP{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ie(t),l=a.queries;a.queries=b0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new ue(te.ABORTED,"Firestore shutting down"))}}function b0(){return new Ia((n=>Jb(n)),Ff)}async function PS(n,e){const t=Ie(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new cP,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ly(c,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&uy(t)}async function xS(n,e){const t=Ie(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function fP(n,e){const t=Ie(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&uy(t)}function dP(n,e,t){const i=Ie(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function uy(n){n.Ca.forEach((e=>{e.next()}))}var ag,S0;(S0=ag||(ag={})).Ma="default",S0.Cache="cache";class US{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ag.Cache}}class MS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class pP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Zb(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new T0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,w)=>{const b=a.get(_),A=Gf(this.query,w)?w:null,N=!!b&&this.mutatedKeys.has(b.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let P=!1;b&&A?b.data.isEqual(A.data)?N!==k&&(i.track({type:3,doc:A}),P=!0):this.su(b,A)||(i.track({type:2,doc:A}),P=!0,(p&&this.eu(A,p)>0||g&&this.eu(A,g)<0)&&(d=!0)):!b&&A?(i.track({type:0,doc:A}),P=!0):b&&!A&&(i.track({type:1,doc:b}),P=!0,(p||g)&&(d=!0)),P&&(A?(c=c.add(A),l=k?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,w)=>(function(A,N){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:P})}};return k(A)-k(N)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Wo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new VS(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new MS(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cy="SyncEngine";class mP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class gP{constructor(e){this.key=e,this.hu=!1}}class yP{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ia((d=>Jb(d)),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new pt(_e.comparator),this.Au=new Map,this.Ru=new Zg,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _P(n,e,t=!0){const i=$S(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await LS(i,e,t,!0),a}async function vP(n,e){const t=$S(n);await LS(t,e,!0,!1)}async function LS(n,e,t,i){const a=await j2(n.localStore,zr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await EP(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&CS(n.remoteStore,a),d}async function EP(n,e,t,i,a){n.pu=(w,b,A)=>(async function(k,P,H,$){let G=P.view.ru(H);G.Cs&&(G=await g0(k.localStore,P.query,!1).then((({documents:I})=>P.view.ru(I,G))));const ie=$&&$.targetChanges.get(P.targetId),pe=$&&$.targetMismatches.get(P.targetId)!=null,le=P.view.applyChanges(G,k.isPrimaryClient,ie,pe);return R0(k,P.targetId,le.au),le.snapshot})(n,w,b,A);const l=await g0(n.localStore,e,!0),c=new pP(e,l.Qs),d=c.ru(l.documents),p=ac.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);R0(n,t,g.au);const _=new mP(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function wP(n,e,t){const i=Ie(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Ff(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await ig(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&ry(i.remoteStore,a.targetId),og(i,a.targetId)})).catch(sl)):(og(i,a.targetId),await ig(i.localStore,a.targetId,!0))}async function TP(n,e){const t=Ie(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ry(t.remoteStore,i.targetId))}async function bP(n,e,t){const i=kP(n);try{const a=await(function(c,d){const p=Ie(c),g=ut.now(),_=d.reduce(((A,N)=>A.add(N.key)),Be());let w,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let N=Si(),k=Be();return p.Ns.getEntries(A,_).next((P=>{N=P,N.forEach(((H,$)=>{$.isValidDocument()||(k=k.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,N))).next((P=>{w=P;const H=[];for(const $ of d){const G=LN($,w.get($.key).overlayedDocument);G!=null&&H.push(new Oa($.key,G,Hb(G.value.mapValue),qr.exists(!0)))}return p.mutationQueue.addMutationBatch(A,g,H,d)})).next((P=>{b=P;const H=P.applyToLocalDocumentSet(w,k);return p.documentOverlayCache.saveOverlays(A,P.batchId,H)}))})).then((()=>({batchId:b.batchId,changes:tS(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new pt(je)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await lc(i,a.changes),await Jf(i.remoteStore)}catch(a){const l=ly(a,"Failed to persist write");t.reject(l)}}async function jS(n,e){const t=Ie(n);try{const i=await M2(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?We(c.hu,14607):a.removedDocuments.size>0&&(We(c.hu,42227),c.hu=!1))})),await lc(t,i,e)}catch(i){await sl(i)}}function A0(n,e,t){const i=Ie(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Ie(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,w)=>{for(const b of w.Sa)b.va(d)&&(g=!0)})),g&&uy(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function SP(n,e,t){const i=Ie(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new pt(_e.comparator);c=c.insert(l,ln.newNoDocument(l,Re.min()));const d=Be().add(l),p=new Yf(Re.min(),new Map,new pt(je),c,d);await jS(i,p),i.du=i.du.remove(l),i.Au.delete(e),hy(i)}else await ig(i.localStore,e,!1).then((()=>og(i,e,t))).catch(sl)}async function AP(n,e){const t=Ie(n),i=e.batch.batchId;try{const a=await U2(t.localStore,e);zS(t,i,null),BS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await lc(t,a)}catch(a){await sl(a)}}async function RP(n,e,t){const i=Ie(n);try{const a=await(function(c,d){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((w=>(We(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);zS(i,e,t),BS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await lc(i,a)}catch(a){await sl(a)}}function BS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zS(n,e,t){const i=Ie(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||qS(n,i)}))}function qS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ry(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),hy(n))}function R0(n,e,t){for(const i of t)i instanceof MS?(n.Ru.addReference(i.key,e),CP(n,i)):i instanceof VS?(ce(cy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||qS(n,i.key)):Se(19791,{wu:i})}function CP(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ce(cy,"New document in limbo: "+t),n.Eu.add(i),hy(n))}function hy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(at.fromString(e)),i=n.fu.next();n.Au.set(i,new gP(t)),n.du=n.du.insert(t,i),CS(n.remoteStore,new ds(zr(Qg(t.path)),i,"TargetPurposeLimboResolution",qf.ce))}}async function lc(n,e,t){const i=Ie(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){a.push(g);const _=ty.As(p.targetId,g);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(p,g){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(g,(b=>ne.forEach(b.Es,(A=>_.persistence.referenceDelegate.addReference(w,b.targetId,A))).next((()=>ne.forEach(b.ds,(A=>_.persistence.referenceDelegate.removeReference(w,b.targetId,A)))))))))}catch(w){if(!al(w))throw w;ce(ny,"Failed to update sequence numbers: "+w)}for(const w of g){const b=w.targetId;if(!w.fromCache){const A=_.Ms.get(b),N=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(N);_.Ms=_.Ms.insert(b,k)}}})(i.localStore,l))}async function IP(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){ce(cy,"User change. New user:",e.toKey());const i=await bS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ue(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lc(t,i.Ls)}}function OP(n,e){const t=Ie(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let a=Be();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function $S(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SP.bind(null,e),e.Pu.H_=fP.bind(null,e.eventManager),e.Pu.yu=dP.bind(null,e.eventManager),e}function kP(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RP.bind(null,e),e}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return x2(this.persistence,new D2,e.initialUser,this.serializer)}Cu(e){return new TS(ey.mi,this.serializer)}Du(e){return new z2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class DP extends Of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof Cf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new g2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new TS((i=>Cf.mi(i,t)),this.serializer)}}class lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>A0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IP.bind(null,this.syncEngine),await uP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hP})()}createDatastore(e){const t=Wf(e.databaseInfo.databaseId),i=(function(l){return new G2(l)})(e.databaseInfo);return(function(l,c,d,p){return new W2(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new J2(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>A0(this.syncEngine,t,0)),(function(){return v0.v()?new v0:new q2})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,_){const w=new yP(a,l,c,d,p,g);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ie(t);ce(Ra,"RemoteStore shutting down."),i.Ea.add(5),await oc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lg.provider={build:()=>new lg};class HS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Rs="FirestoreClient";class NP{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ce(Rs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ce(Rs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ly(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sm(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Rs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await bS(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function C0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PP(n);ce(Rs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>w0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>w0(e.remoteStore,a))),n._onlineComponents=e}async function PP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Rs,"Using user provided OfflineComponentProvider");try{await Sm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Fo("Error using user provided cache. Falling back to memory cache: "+t),await Sm(n,new Of)}}else ce(Rs,"Using default OfflineComponentProvider"),await Sm(n,new DP(void 0));return n._offlineComponents}async function FS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Rs,"Using user provided OnlineComponentProvider"),await C0(n,n._uninitializedComponentsProvider._online)):(ce(Rs,"Using default OnlineComponentProvider"),await C0(n,new lg))),n._onlineComponents}function xP(n){return FS(n).then((e=>e.syncEngine))}async function ug(n){const e=await FS(n),t=e.eventManager;return t.onListen=_P.bind(null,e.syncEngine),t.onUnlisten=wP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TP.bind(null,e.syncEngine),t}function UP(n,e,t={}){const i=new vs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new HS({next:b=>{_.Nu(),c.enqueueAndForget((()=>xS(l,w))),b.fromCache&&p.source==="server"?g.reject(new ue(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),w=new US(d,_,{includeMetadataChanges:!0,qa:!0});return PS(l,w)})(await ug(n),n.asyncQueue,e,t,i))),i.promise}function GS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const I0=new Map;const KS="firestore.googleapis.com",O0=!0;class k0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KS,this.ssl=O0}else this.host=e.host,this.ssl=e.ssl??O0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p2)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new zD;switch(i.type){case"firstParty":return new FD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=I0.get(t);i&&(ce("ComponentProvider","Removing Datastore"),I0.delete(t),i.terminate())})(this),Promise.resolve()}}function MP(n,e,t,i={}){n=vi(n,Zf);const a=tl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(MT(`https://${d}`),VT("Firestore",!0)),l.host!==KS&&l.host!==d&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!wa(p,c)&&(n._setSettings(p),i.mockUserToken)){let g,_;if(typeof i.mockUserToken=="string")g=i.mockUserToken,_=on.MOCK_USER;else{g=WI(i.mockUserToken,n._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ue(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new on(w)}n._authCredentials=new qD(new Nb(g,_))}}class ks{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class Mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ic(t,Mt._jsonSchema))return new Mt(e,i||null,new _e(at.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Ut("string",Mt._jsonSchemaVersion),referencePath:Ut("string")};class Es extends ks{constructor(e,t,i){super(e,t,Qg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new _e(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function To(n,e,...t){if(n=nn(n),Pb("collection","path",e),n instanceof Zf){const i=at.fromString(e,...t);return $w(i),new Es(n,null,i)}{if(!(n instanceof Mt||n instanceof Es))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return $w(i),new Es(n.firestore,null,i)}}function ps(n,e,...t){if(n=nn(n),arguments.length===1&&(e=qg.newId()),Pb("doc","path",e),n instanceof Zf){const i=at.fromString(e,...t);return qw(i),new Mt(n,null,new _e(i))}{if(!(n instanceof Mt||n instanceof Es))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return qw(i),new Mt(n.firestore,n instanceof Es?n.converter:null,new _e(i))}}const D0="AsyncQueue";class N0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AS(this,"async_queue_retry"),this._c=()=>{const i=bm();i&&ce(D0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;ce(D0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,bi("INTERNAL UNHANDLED ERROR: ",P0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=oy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Se(47125,{Pc:P0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function x0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Xo extends Zf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new N0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N0(e),this._firestoreClient=void 0,await e}}}function VP(n,e){const t=typeof n=="object"?n:zT(),i=typeof n=="string"?n:Tf,a=kg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=QI("firestore");l&&MP(a,...l)}return a}function fy(n){if(n._terminated)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LP(n),n._firestoreClient}function LP(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new lN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(rn.fromBase64String(e))}catch(t){throw new ue(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ut("string",Yn._jsonSchemaVersion),bytes:Ut("string")};class dy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class py{constructor(e){this._methodName=e}}class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(ic(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:Ut("string",Hr._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new ue(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Ut("string",Fr._jsonSchemaVersion),vectorValues:Ut("object")};const jP=/^__.*__$/;class BP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new sc(e,this.data,t,this.fieldTransforms)}}function QS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class my{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QS(this.Ac)&&jP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Wf(e)}Cc(e,t,i,a=!1){return new my({Ac:e,methodName:t,Dc:i,path:tn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gy(n){const e=n._freezeSettings(),t=Wf(n._databaseId);return new zP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YS(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);JS("Data must be an object, but it was:",c,i);const d=WS(i,c);let p,g;if(l.merge)p=new pr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const b=$P(e,w,t);if(!c.contains(b))throw new ue(te.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);FP(_,b)||_.push(b)}p=new pr(_),g=c.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,g=c.fieldTransforms;return new BP(new Qn(d),p,g)}class yy extends py{_toFieldTransform(e){return new xN(e.path,new zu)}isEqual(e){return e instanceof yy}}function qP(n,e,t,i=!1){return _y(t,n.Cc(i?4:3,e))}function _y(n,e){if(XS(n=nn(n)))return JS("Unsupported field value:",e,n),WS(n,e);if(n instanceof py)return(function(i,a){if(!QS(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=_y(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DN(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ut.fromDate(i);return{timestampValue:Rf(a.serializer,l)}}if(i instanceof ut){const l=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rf(a.serializer,l)}}if(i instanceof Hr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:pS(a.serializer,i._byteString)};if(i instanceof Mt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Fr)return(function(c,d){return{mapValue:{fields:{[qb]:{stringValue:$b},[bf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Yg(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${zf(i)}`)})(n,e)}function WS(n,e){const t={};return Mb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(n,((i,a)=>{const l=_y(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function XS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Hr||n instanceof Yn||n instanceof Mt||n instanceof py||n instanceof Fr)}function JS(n,e,t){if(!XS(t)||!xb(t)){const i=zf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function $P(n,e,t){if((e=nn(e))instanceof dy)return e._internalPath;if(typeof e=="string")return ZS(n,e);throw kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const HP=new RegExp("[~\\*/\\[\\]]");function ZS(n,e,t){if(e.search(HP)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dy(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kf(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ue(te.INVALID_ARGUMENT,d+n+p)}function FP(n,e){return n.some((t=>t.isEqual(e)))}class eA{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ed("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GP extends eA{data(){return super.data()}}function ed(n,e){return typeof e=="string"?ZS(n,e):e instanceof dy?e._internalPath:e._delegate._internalPath}function tA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class nA extends vy{}function Am(n,e,...t){let i=[];e instanceof vy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof Ey)).length,d=l.filter((p=>p instanceof td)).length;if(c>1||c>0&&d>0)throw new ue(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class td extends nA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new td(e,t,i)}_apply(e){const t=this._parse(e);return rA(e._query,t),new ks(e.firestore,e.converter,Jm(e._query,t))}_parse(e){const t=gy(e.firestore);return(function(l,c,d,p,g,_,w){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ue(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){M0(w,_);const N=[];for(const k of w)N.push(U0(p,l,k));b={arrayValue:{values:N}}}else b=U0(p,l,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||M0(w,_),b=qP(d,c,w,_==="in"||_==="not-in");return xt.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rm(n,e,t){const i=e,a=ed("where",n);return td._create(a,i,t)}class Ey extends vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ey(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)rA(c,p),c=Jm(c,p)})(e._query,t),new ks(e.firestore,e.converter,Jm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends nA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wy(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(l,c)})(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new ol(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function KP(n,e="asc"){const t=e,i=ed("orderBy",n);return wy._create(i,t)}function U0(n,e,t){if(typeof(t=nn(t))=="string"){if(t==="")throw new ue(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xb(e)&&t.indexOf("/")!==-1)throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(at.fromString(t));if(!_e.isDocumentKey(i))throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xw(n,new _e(i))}if(t instanceof Mt)return Xw(n,t._key);throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function M0(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rA(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QP{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ca(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[bf].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new Hr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const t=Ts(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=at.fromString(e);We(ES(i),9688,{name:e});const a=new Lu(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return a.isEqual(t)||bi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function iA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends eA{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ed("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:Ut("string",va._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class hf extends va{data(e={}){return super.data(e)}}class Ea{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new bu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new hf(this._firestore,this._userDataWriter,i.key,i,new bu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new hf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new bu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new hf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new bu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:YP(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:Ut("string",Ea._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ty extends QP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function V0(n){n=vi(n,ks);const e=vi(n.firestore,Xo),t=fy(e),i=new Ty(e);return tA(n._query),UP(t,n._query).then((a=>new Ea(e,i,n,a)))}function ya(n,e,t){n=vi(n,Mt);const i=vi(n.firestore,Xo),a=iA(n.converter,e,t);return sA(i,[YS(gy(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,qr.none())])}function L0(n,e){const t=vi(n.firestore,Xo),i=ps(n),a=iA(n.converter,e);return sA(t,[YS(gy(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,qr.exists(!1))]).then((()=>i))}function j0(n,...e){n=nn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||x0(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(x0(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let l,c,d;if(n instanceof Mt)c=vi(n.firestore,Xo),d=Qg(n._key.path),l={next:p=>{e[i]&&e[i](WP(c,n,p))},error:e[i+1],complete:e[i+2]};else{const p=vi(n,ks);c=vi(p.firestore,Xo),d=p._query;const g=new Ty(c);l={next:_=>{e[i]&&e[i](new Ea(c,g,p,_))},error:e[i+1],complete:e[i+2]},tA(n._query)}return(function(g,_,w,b){const A=new HS(b),N=new US(_,A,w);return g.asyncQueue.enqueueAndForget((async()=>PS(await ug(g),N))),()=>{A.Nu(),g.asyncQueue.enqueueAndForget((async()=>xS(await ug(g),N)))}})(fy(c),d,a,l)}function sA(n,e){return(function(i,a){const l=new vs;return i.asyncQueue.enqueueAndForget((async()=>bP(await xP(i),a,l))),l.promise})(fy(n),e)}function WP(n,e,t){const i=t.docs.get(e._key),a=new Ty(n);return new va(n,a,e._key,i,new bu(t.hasPendingWrites,t.fromCache),e.converter)}function Cm(){return new yy("serverTimestamp")}(function(e,t=!0){(function(a){il=a})(nl),$o(new Ta("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Xo(new $D(i.getProvider("auth-internal")),new GD(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ue(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ys(Lw,jw,e),ys(Lw,jw,"esm2020")})();const XP={apiKey:"AIzaSyCYCBzG6ZzRuBNgV6cTYiQ73y5m4t1e5gc",authDomain:"test-c1a50.firebaseapp.com",projectId:"test-c1a50",storageBucket:"test-c1a50.firebasestorage.app",messagingSenderId:"906897260332",appId:"1:906897260332:web:6212eb0e30c4c314b6f689",measurementId:"G-5XT1BH38VT"},aA=BT(XP),JP=new pi,fa=VD(aA),Dn=VP(aA);function B0(){const[n,e]=W.useState(null),[t,i]=W.useState(""),[a,l]=W.useState(""),[c,d]=W.useState(""),[p,g]=W.useState(""),_=Uf();W.useEffect(()=>{const k=fb(fa,async P=>{P?(e(P),await ya(ps(Dn,"users",P.uid),{uid:P.uid,email:P.email,displayName:P.displayName||"",photoURL:P.photoURL||""}),_("/")):e(null)});return()=>k()},[_]);const w=async()=>{if(!c.trim()){g("Please enter a user name.");return}try{const k=await wk(fa,t,a);await Sk(k.user,{displayName:c}),e(k.user),g(""),await ya(ps(Dn,"users",k.user.uid),{uid:k.user.uid,email:k.user.email,displayName:c||"",photoURL:k.user.photoURL||""}),_("/")}catch(k){g(k.message)}},b=async()=>{if(!t.trim()||!a.trim()){g("Please enter both email and password.");return}try{const k=await Tk(fa,t,a);e(k.user),g(""),await ya(ps(Dn,"users",k.user.uid),{uid:k.user.uid,email:k.user.email,displayName:c||"",photoURL:k.user.photoURL||""}),_("/")}catch(k){g(k.message)}},A=async()=>{try{const k=await Gk(fa,JP);e(k.user),g(""),await ya(ps(Dn,"users",k.user.uid),{uid:k.user.uid,email:k.user.email,displayName:k.user.displayName||"",photoURL:k.user.photoURL||""}),_("/")}catch(k){g(k.message)}},N=async()=>{try{await db(fa),e(null)}catch(k){g(k.message)}};return oe.jsx("div",{className:"auth-container",children:n?oe.jsxs(oe.Fragment,{children:[oe.jsxs("h3",{children:["Welcome, ",n.displayName||n.email]}),n.photoURL&&oe.jsx("img",{src:n.photoURL,alt:"profile",width:"60"}),oe.jsxs("p",{children:["User ID: ",n.uid]}),oe.jsx("button",{onClick:N,children:"Logout"})]}):oe.jsxs(oe.Fragment,{children:[oe.jsx("input",{type:"text",placeholder:"Email",value:t,onChange:k=>i(k.target.value)}),oe.jsx("input",{type:"password",placeholder:"Password",value:a,onChange:k=>l(k.target.value)}),oe.jsx("input",{type:"text",placeholder:"User name",value:c,onChange:k=>d(k.target.value)}),oe.jsx("button",{onClick:w,children:"Sign Up"}),oe.jsx("button",{onClick:b,children:"Login"}),oe.jsx("button",{onClick:A,children:"Sign in with Google"}),p&&oe.jsx("p",{style:{color:"red"},children:p})]})})}function nd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function ZP(n,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(_){try{g(i.next(_))}catch(w){c(w)}}function p(_){try{g(i.throw(_))}catch(w){c(w)}}function g(_){_.done?l(_.value):a(_.value).then(d,p)}g((i=i.apply(n,e||[])).next())})}const ex=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class by extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class tx extends by{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class z0 extends by{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class q0 extends by{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(cg||(cg={}));class nx{constructor(e,{headers:t={},customFetch:i,region:a=cg.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=ex(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ZP(this,arguments,void 0,function*(t,i={}){var a;let l,c;try{const{headers:d,method:p,body:g,signal:_,timeout:w}=i;let b={},{region:A}=i;A||(A=this.region);const N=new URL(`${this.url}/${t}`);A&&A!=="any"&&(b["x-region"]=A,N.searchParams.set("forceFunctionRegion",A));let k;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",k=g):typeof g=="string"?(b["Content-Type"]="text/plain",k=g):typeof FormData<"u"&&g instanceof FormData?k=g:(b["Content-Type"]="application/json",k=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?k=JSON.stringify(g):k=g;let P=_;w&&(c=new AbortController,l=setTimeout(()=>c.abort(),w),_?(P=c.signal,_.addEventListener("abort",()=>c.abort())):P=c.signal);const H=yield this.fetch(N.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:k,signal:P}).catch(pe=>{throw new tx(pe)}),$=H.headers.get("x-relay-error");if($&&$==="true")throw new z0(H);if(!H.ok)throw new q0(H);let G=((a=H.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),ie;return G==="application/json"?ie=yield H.json():G==="application/octet-stream"||G==="application/pdf"?ie=yield H.blob():G==="text/event-stream"?ie=H:G==="multipart/form-data"?ie=yield H.formData():ie=yield H.text(),{data:ie,error:null,response:H}}catch(d){return{data:null,error:d,response:d instanceof q0||d instanceof z0?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var rx=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},ix=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,d=null,p=null,g=l.status,_=l.statusText;if(l.ok){var w,b;if(t.method!=="HEAD"){var A;const H=await l.text();H===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((A=t.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?d=H:d=JSON.parse(H))}const k=(w=t.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),P=(b=l.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");k&&P&&P.length>1&&(p=parseInt(P[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,g=406,_="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var N;const k=await l.text();try{c=JSON.parse(k),Array.isArray(c)&&l.status===404&&(d=[],c=null,g=200,_="OK")}catch{l.status===404&&k===""?(g=204,_="No Content"):c={message:k}}if(c&&t.isMaybeSingle&&(!(c==null||(N=c.details)===null||N===void 0)&&N.includes("0 rows"))&&(c=null,g=200,_="OK"),c&&t.shouldThrowOnError)throw new rx(c)}return{error:c,data:d,count:p,status:g,statusText:_}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let d="";const p=l?.cause;if(p){var g,_,w,b;const N=(g=p?.message)!==null&&g!==void 0?g:"",k=(_=p?.code)!==null&&_!==void 0?_:"";d=`${(w=l?.name)!==null&&w!==void 0?w:"FetchError"}: ${l?.message}`,d+=`

Caused by: ${(b=p?.name)!==null&&b!==void 0?b:"Error"}: ${N}`,k&&(d+=` (${k})`),p?.stack&&(d+=`
${p.stack}`)}else{var A;d=(A=l?.stack)!==null&&A!==void 0?A:""}return{error:{message:`${(c=l?.name)!==null&&c!==void 0?c:"FetchError"}: ${l?.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(n,e)}returns(){return this}overrideTypes(){return this}},sx=class extends ix{select(n){let e=!1;const t=(n??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:i=t}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${n}`),this.url.searchParams.set(l,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var c;const d=[n?"analyze":null,e?"verbose":null,t?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const $0=new RegExp("[,()]");var xo=class extends sx{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&$0.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&$0.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${a}fts${l}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},ax=class{constructor(n,{headers:e={},schema:t,fetch:i}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:i}=e??{},a=t?"HEAD":"GET";let l=!1;const c=(n??"*").split("").map(g=>/\s/.test(g)&&!l?"":(g==='"'&&(l=!l),g)).join(""),{url:d,headers:p}=this.cloneRequestState();return d.searchParams.set("select",c),i&&p.append("Prefer",`count=${i}`),new xo({method:a,url:d,headers:p,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var i;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),t||c.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);l.searchParams.set("columns",p.join(","))}}return new xo({method:a,url:l,headers:c,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:i,defaultToNull:a=!0}={}){var l;const c="POST",{url:d,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&d.searchParams.set("on_conflict",e),i&&p.append("Prefer",`count=${i}`),a||p.append("Prefer","missing=default"),Array.isArray(n)){const g=n.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(g.length>0){const _=[...new Set(g)].map(w=>`"${w}"`);d.searchParams.set("columns",_.join(","))}}return new xo({method:c,url:d,headers:p,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(n,{count:e}={}){var t;const i="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new xo({method:i,url:a,headers:l,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE",{url:i,headers:a}=this.cloneRequestState();return n&&a.append("Prefer",`count=${n}`),new xo({method:t,url:i,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ox=class oA{constructor(e,{headers:t={},schema:i,fetch:a}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ax(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new oA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:a=!1,count:l}={}){var c;let d;const p=new URL(`${this.url}/rpc/${e}`);let g;const _=A=>A!==null&&typeof A=="object"&&(!Array.isArray(A)||A.some(_)),w=i&&Object.values(t).some(_);w?(d="POST",g=t):i||a?(d=i?"HEAD":"GET",Object.entries(t).filter(([A,N])=>N!==void 0).map(([A,N])=>[A,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([A,N])=>{p.searchParams.append(A,N)})):(d="POST",g=t);const b=new Headers(this.headers);return w?b.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&b.set("Prefer",`count=${l}`),new xo({method:d,url:p,headers:b,schema:this.schemaName,body:g,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class lx{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const i=t.versions;if(i&&i.node){const a=i.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ux="2.93.3",cx=`realtime-js/${ux}`,hx="1.0.0",lA="2.0.0",H0=lA,hg=1e4,fx=1e3,dx=100;var ls;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ls||(ls={}));var Bt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bt||(Bt={}));var fr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(fr||(fr={}));var fg;(function(n){n.websocket="websocket"})(fg||(fg={}));var da;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(da||(da={}));class px{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const a=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,i;const a=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,i){var a,l;const c=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,_=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(_).length===0?"":JSON.stringify(_);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+d.length+c.length+g.length+w.length,A=new ArrayBuffer(this.HEADER_LENGTH+b);let N=new DataView(A),k=0;N.setUint8(k++,this.KINDS.userBroadcastPush),N.setUint8(k++,p.length),N.setUint8(k++,d.length),N.setUint8(k++,c.length),N.setUint8(k++,g.length),N.setUint8(k++,w.length),N.setUint8(k++,t),Array.from(p,H=>N.setUint8(k++,H.charCodeAt(0))),Array.from(d,H=>N.setUint8(k++,H.charCodeAt(0))),Array.from(c,H=>N.setUint8(k++,H.charCodeAt(0))),Array.from(g,H=>N.setUint8(k++,H.charCodeAt(0))),Array.from(w,H=>N.setUint8(k++,H.charCodeAt(0)));var P=new Uint8Array(A.byteLength+i.byteLength);return P.set(new Uint8Array(A),0),P.set(new Uint8Array(i),A.byteLength),P.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,l,c,d,p]=i;return t({join_ref:a,ref:l,topic:c,event:d,payload:p})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),a=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,a)}_decodeUserBroadcast(e,t,i){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),d=t.getUint8(4);let p=this.HEADER_LENGTH+4;const g=i.decode(e.slice(p,p+a));p=p+a;const _=i.decode(e.slice(p,p+l));p=p+l;const w=i.decode(e.slice(p,p+c));p=p+c;const b=e.slice(p,e.byteLength),A=d===this.JSON_ENCODING?JSON.parse(i.decode(b)):b,N={type:this.BROADCAST_EVENT,event:_,payload:A};return c>0&&(N.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class uA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(st||(st={}));const F0=(n,e,t={})=>{var i;const a=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=mx(c,n,e,a),l),{}):{}},mx=(n,e,t,i)=>{const a=e.find(d=>d.name===n),l=a?.type,c=t[n];return l&&!i.includes(l)?cA(l,c):dg(c)},cA=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return vx(e,t)}switch(n){case st.bool:return gx(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return yx(e);case st.json:case st.jsonb:return _x(e);case st.timestamp:return Ex(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return dg(e);default:return dg(e)}},dg=n=>n,gx=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},yx=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},_x=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},vx=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let l;const c=n.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>cA(e,d))}return n},Ex=n=>typeof n=="string"?n.replace(" ","T"):n,hA=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Im{constructor(e,t,i={},a=hg){this.channel=e,this.event=t,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var G0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(G0||(G0={}));class Du{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Du.syncState(this.state,a,l,c),this.pendingDiffs.forEach(p=>{this.state=Du.syncDiff(this.state,p,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Du.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,a){const l=this.cloneDeep(e),c=this.transformState(t),d={},p={};return this.map(l,(g,_)=>{c[g]||(p[g]=_)}),this.map(c,(g,_)=>{const w=l[g];if(w){const b=_.map(P=>P.presence_ref),A=w.map(P=>P.presence_ref),N=_.filter(P=>A.indexOf(P.presence_ref)<0),k=w.filter(P=>b.indexOf(P.presence_ref)<0);N.length>0&&(d[g]=N),k.length>0&&(p[g]=k)}else d[g]=_}),this.syncDiff(l,{joins:d,leaves:p},i,a)}static syncDiff(e,t,i,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(d,p)=>{var g;const _=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(p),_.length>0){const w=e[d].map(A=>A.presence_ref),b=_.filter(A=>w.indexOf(A.presence_ref)<0);e[d].unshift(...b)}i(d,_,p)}),this.map(c,(d,p)=>{let g=e[d];if(!g)return;const _=p.map(w=>w.presence_ref);g=g.filter(w=>_.indexOf(w.presence_ref)<0),e[d]=g,a(d,g,p),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const a=e[i];return"metas"in a?t[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[i]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var K0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(K0||(K0={}));var Nu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Nu||(Nu={}));var di;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(di||(di={}));class Vo{constructor(e,t={config:{}},i){var a,l;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Im(this,fr.join,this.params,this.timeout),this.rejoinTimer=new uA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fr.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Du(this),this.broadcastEndpointURL=hA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:c,presence:d,private:p}}=this.params,g=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(A=>A.filter))!==null&&a!==void 0?a:[],_=!!this.bindings[Nu.PRESENCE]&&this.bindings[Nu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},b={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:_}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(A=>e?.(di.CHANNEL_ERROR,A)),this._onClose(()=>e?.(di.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:A})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){e?.(di.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,P=(N=k?.length)!==null&&N!==void 0?N:0,H=[];for(let $=0;$<P;$++){const G=k[$],{filter:{event:ie,schema:pe,table:le,filter:I}}=G,C=A&&A[$];if(C&&C.event===ie&&Vo.isFilterValueEqual(C.schema,pe)&&Vo.isFilterValueEqual(C.table,le)&&Vo.isFilterValueEqual(C.filter,I))H.push(Object.assign(Object.assign({},G),{id:C.id}));else{this.unsubscribe(),this.state=Bt.errored,e?.(di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,e&&e(di.SUBSCRIBED);return}}).receive("error",A=>{this.state=Bt.errored,e?.(di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e?.(di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===Bt.joined&&e===Nu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let p=d.statusText;try{const g=await d.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,t={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,p;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Im(this,fr.leave,{},e),i.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Im(this,e,t,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>dx){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:p,leave:g,join:_}=fr;if(i&&[d,p,g,_].indexOf(c)>=0&&i!==this._joinRef())return;let b=this._onMessage(c,t,i);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(A=>{var N,k,P;return((N=A.filter)===null||N===void 0?void 0:N.event)==="*"||((P=(k=A.filter)===null||k===void 0?void 0:k.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(A=>A.callback(b,i)):(l=this.bindings[c])===null||l===void 0||l.filter(A=>{var N,k,P,H,$,G;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const ie=A.id,pe=(N=A.filter)===null||N===void 0?void 0:N.event;return ie&&((k=t.ids)===null||k===void 0?void 0:k.includes(ie))&&(pe==="*"||pe?.toLocaleLowerCase()===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const ie=($=(H=A?.filter)===null||H===void 0?void 0:H.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return ie==="*"||ie===((G=t?.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:k,table:P,commit_timestamp:H,type:$,errors:G}=N;b=Object.assign(Object.assign({},{schema:k,table:P,commit_timestamp:H,eventType:$,new:{},old:{},errors:G}),this._getPayloadRecords(N))}A.callback(b,i)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Vo.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fr.close,{},e)}_onError(e){this._on(fr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=F0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=F0(e.columns,e.old_record)),t}}const Om=()=>{},Gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wx=[1e3,2e3,5e3,1e4],Tx=1e4,bx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sx{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hg,this.transport=null,this.heartbeatIntervalMs=Gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Om,this.ref=0,this.reconnectTimer=null,this.vsn=H0,this.logger=Om,this.conn=null,this.sendBuffer=[],this.serializer=new px,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((i=t?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${fg.websocket}`,this.httpEndpoint=hA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return da.Connecting;case ls.open:return da.Open;case ls.closing:return da.Closing;default:return da.Closed}}isConnected(){return this.connectionState()===da.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new Vo(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:i,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var p;(p=this.conn)===null||p===void 0||p.send(d)})};this.log("push",`${t} ${i} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",g)}catch(_){this.log("error","error in heartbeat callback",_)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:l,ref:c}=t,d=c?`(${c})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${a} ${d}`.trim(),l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ls.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ls.open||this.conn.readyState===ls.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(fr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${i}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([bx],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const l={access_token:t,version:cx};t&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(fr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new uA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,a,l,c,d,p,g,_,w,b,A;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:hg,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Gh.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Om,this.vsn=(p=e?.vsn)!==null&&p!==void 0?p:H0,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:(N=>wx[N-1]||Tx),this.vsn){case hx:this.encode=(_=e?.encode)!==null&&_!==void 0?_:((N,k)=>k(JSON.stringify(N))),this.decode=(w=e?.decode)!==null&&w!==void 0?w:((N,k)=>k(JSON.parse(N)));break;case lA:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(A=e?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Hu=class extends Error{constructor(n,e){super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ax(n,e,t){const i=new URL(e,n);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&i.searchParams.set(a,l);return i.toString()}async function Rx(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Cx(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:a,body:l,headers:c}){const d=Ax(n.baseUrl,i,a),p=await Rx(n.auth),g=await e(d,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...p,...c},body:l?JSON.stringify(l):void 0}),_=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),b=w&&_?JSON.parse(_):_;if(!g.ok){const A=w?b:void 0,N=A?.error;throw new Hu(N?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:N?.type,icebergCode:N?.code,details:A})}return{status:g.status,headers:g.headers,data:b}}}}function Kh(n){return n.join("")}var Ix=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Kh(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kh(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kh(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kh(n.namespace)}`}),!0}catch(e){if(e instanceof Hu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Hu&&t.status===409)return;throw t}}};function bo(n){return n.join("")}var Ox=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bo(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Hu&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Hu&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},kx=class{constructor(n){let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Cx({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new Ix(this.client,e),this.tableOps=new Ox(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},rd=class extends Error{constructor(n,e="storage",t,i){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=i}};function id(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Qh=class extends rd{constructor(n,e,t,i="storage"){super(n,i,e,t),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},fA=class extends rd{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Dx=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Nx=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},pg=n=>{if(Array.isArray(n))return n.map(t=>pg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=pg(i)}),e},Px=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Fu(n){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(n)}function xx(n,e){if(Fu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Fu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ux(n){var e=xx(n,"string");return Fu(e)=="symbol"?e:e+""}function Mx(n,e,t){return(e=Ux(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function Te(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q0(Object(t),!0).forEach(function(i){Mx(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Q0(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Y0=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Vx=async(n,e,t,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const a=n,l=a.status||500;if(typeof a.json=="function")a.json().then(c=>{const d=c?.statusCode||c?.code||l+"";e(new Qh(Y0(c),l,d,i))}).catch(()=>{if(i==="vectors"){const c=l+"";e(new Qh(a.statusText||`HTTP ${l} error`,l,c,i))}else{const c=l+"";e(new Qh(a.statusText||`HTTP ${l} error`,l,c,i))}});else{const c=l+"";e(new Qh(a.statusText||`HTTP ${l} error`,l,c,i))}}else e(new fA(Y0(n),n,i))},Lx=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||n==="HEAD"||!i?Te(Te({},a),t):(Nx(i)?(a.headers=Te({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Te(Te({},a),t))};async function yu(n,e,t,i,a,l,c){return new Promise((d,p)=>{n(t,Lx(e,i,a,l)).then(g=>{if(!g.ok)throw g;if(i?.noResolveJson)return g;if(c==="vectors"){const _=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!_||!_.includes("application/json"))return{}}return g.json()}).then(g=>d(g)).catch(g=>Vx(g,p,i,c))})}function dA(n="storage"){return{get:async(e,t,i,a)=>yu(e,"GET",t,i,a,void 0,n),post:async(e,t,i,a,l)=>yu(e,"POST",t,a,l,i,n),put:async(e,t,i,a,l)=>yu(e,"PUT",t,a,l,i,n),head:async(e,t,i,a)=>yu(e,"HEAD",t,Te(Te({},i),{},{noResolveJson:!0}),a,void 0,n),remove:async(e,t,i,a,l)=>yu(e,"DELETE",t,a,l,i,n)}}const jx=dA("storage"),{get:Gu,post:hr,put:mg,head:Bx,remove:Sy}=jx,Pn=dA("vectors");var ul=class{constructor(n,e={},t,i="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=Dx(t),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(id(t))return{data:null,error:t};throw t}}},zx=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(id(e))return{data:null,error:e};throw e}}};let pA;pA=Symbol.toStringTag;var qx=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[pA]="BlobDownloadBuilder",this.promise=null}asStream(){return new zx(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(id(e))return{data:null,error:e};throw e}}};const $x={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Hx=class extends ul{constructor(n,e={},t,i){super(n,e,i,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,i){var a=this;return a.handleOperation(async()=>{let l;const c=Te(Te({},W0),i);let d=Te(Te({},a.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),p&&l.append("metadata",a.encodeMetadata(p)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),p&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(p))):(l=t,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,p&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),i?.headers&&(d=Te(Te({},d),i.headers));const g=a._removeEmptyFolders(e),_=a._getFinalPath(g),w=await(n=="PUT"?mg:hr)(a.fetch,`${a.url}/object/${_}`,l,Te({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{path:g,id:w.Id,fullPath:w.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,i){var a=this;const l=a._removeEmptyFolders(n),c=a._getFinalPath(l),d=new URL(a.url+`/object/upload/sign/${c}`);return d.searchParams.set("token",e),a.handleOperation(async()=>{let p;const g=Te({upsert:W0.upsert},i),_=Te(Te({},a.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&t instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",t)):typeof FormData<"u"&&t instanceof FormData?(p=t,p.append("cacheControl",g.cacheControl)):(p=t,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType),{path:l,fullPath:(await mg(a.fetch,d.toString(),p,{headers:_})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let i=t._getFinalPath(n);const a=Te({},t.headers);e?.upsert&&(a["x-upsert"]="true");const l=await hr(t.fetch,`${t.url}/object/upload/sign/${i}`,{},{headers:a}),c=new URL(t.url+l.url),d=c.searchParams.get("token");if(!d)throw new rd("No token returned by API");return{signedUrl:c.toString(),path:n,token:d}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var i=this;return i.handleOperation(async()=>await hr(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:i.headers}))}async copy(n,e,t){var i=this;return i.handleOperation(async()=>({path:(await hr(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(n,e,t){var i=this;return i.handleOperation(async()=>{let a=i._getFinalPath(n),l=await hr(i.fetch,`${i.url}/object/sign/${a}`,Te({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:i.headers});const c=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${i.url}${l.signedURL}${c}`)}})}async createSignedUrls(n,e,t){var i=this;return i.handleOperation(async()=>{const a=await hr(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:n},{headers:i.headers}),l=t?.download?`&download=${t.download===!0?"":t.download}`:"";return a.map(c=>Te(Te({},c),{},{signedUrl:c.signedURL?encodeURI(`${i.url}${c.signedURL}${l}`):null}))})}download(n,e){const t=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),a=i?`?${i}`:"",l=this._getFinalPath(n),c=()=>Gu(this.fetch,`${this.url}/${t}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new qx(c,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>pg(await Gu(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await Bx(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(id(i)&&i instanceof fA){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,e){const t=this._getFinalPath(n),i=[],a=e?.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&i.push(a);const l=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${d}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await Sy(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var i=this;return i.handleOperation(async()=>{const a=Te(Te(Te({},$x),e),{},{prefix:n||""});return await hr(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const i=Te({},n);return await hr(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,i,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Fx="2.93.3",uc={"X-Client-Info":`storage-js/${Fx}`};var Gx=class extends ul{constructor(n,e={},t,i){const a=new URL(n);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const l=a.href.replace(/\/$/,""),c=Te(Te({},uc),e);super(l,c,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await Gu(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Gu(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await hr(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await mg(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await hr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Sy(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Kx=class extends ul{constructor(n,e={},t){const i=n.replace(/\/$/,""),a=Te(Te({},uc),e);super(i,a,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await hr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;n?.limit!==void 0&&t.set("limit",n.limit.toString()),n?.offset!==void 0&&t.set("offset",n.offset.toString()),n?.sortColumn&&t.set("sortColumn",n.sortColumn),n?.sortOrder&&t.set("sortOrder",n.sortOrder),n?.search&&t.set("search",n.search);const i=t.toString(),a=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Gu(e.fetch,a,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Sy(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!Px(n))throw new rd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new kx({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...d)=>{try{return{data:await c.apply(a,d),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}}}})}},Qx=class extends ul{constructor(n,e={},t){const i=n.replace(/\/$/,""),a=Te(Te({},uc),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await Pn.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},Yx=class extends ul{constructor(n,e={},t){const i=n.replace(/\/$/,""),a=Te(Te({},uc),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},Wx=class extends ul{constructor(n,e={},t){const i=n.replace(/\/$/,""),a=Te(Te({},uc),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Pn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},Xx=class extends Wx{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new Jx(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},Jx=class extends Qx{constructor(n,e,t,i){super(n,e,i),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new Zx(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Zx=class extends Yx{constructor(n,e,t,i,a){super(n,e,a),this.vectorBucketName=t,this.indexName=i}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},eU=class extends Gx{constructor(n,e={},t,i){super(n,e,t,i)}from(n){return new Hx(this.url,this.headers,n,this.fetch)}get vectors(){return new Xx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Kx(this.url+"/iceberg",this.headers,this.fetch)}};const mA="2.93.3",Uo=30*1e3,gg=3,km=gg*Uo,tU="http://localhost:9999",nU="supabase.auth.token",rU={"X-Client-Info":`gotrue-js/${mA}`},yg="X-Supabase-Api-Version",gA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sU=600*1e3;class Ku extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function ge(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class aU extends Ku{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function oU(n){return ge(n)&&n.name==="AuthApiError"}class pa extends Ku{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ci extends Ku{constructor(e,t,i,a){super(e,i,a),this.name=t,this.status=i}}class kn extends Ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dm(n){return ge(n)&&n.name==="AuthSessionMissingError"}class So extends Ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yh extends Ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wh extends Ci{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lU(n){return ge(n)&&n.name==="AuthImplicitGrantRedirectError"}class X0 extends Ci{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uU extends Ci{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _g extends Ci{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Nm(n){return ge(n)&&n.name==="AuthRetryableFetchError"}class J0 extends Ci{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class vg extends Ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z0=` 	
\r=`.split(""),cU=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Z0.length;e+=1)n[Z0[e].charCodeAt(0)]=-2;for(let e=0;e<Df.length;e+=1)n[Df[e].charCodeAt(0)]=e;return n})();function eT(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Df[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Df[i]),e.queuedBits-=6}}function yA(n,e,t){const i=cU[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function tT(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{dU(c,i,t)};for(let c=0;c<n.length;c+=1)yA(n.charCodeAt(c),a,l);return e.join("")}function hU(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function fU(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}hU(i,e)}}function dU(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function qo(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)yA(n.charCodeAt(a),t,i);return new Uint8Array(e)}function pU(n){const e=[];return fU(n,t=>e.push(t)),new Uint8Array(e)}function _a(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};return n.forEach(a=>eT(a,t,i)),eT(null,t,i),e.join("")}function mU(n){return Math.round(Date.now()/1e3)+n}function gU(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",la={tested:!1,writable:!1},_A=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(la.tested)return la.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),la.tested=!0,la.writable=!0}catch{la.tested=!0,la.writable=!1}return la.writable};function yU(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((i,a)=>{e[a]=i}),e}const vA=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),_U=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Mo=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ua=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Jt=async(n,e)=>{await n.removeItem(e)};class sd{constructor(){this.promise=new sd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}sd.promiseConstructor=Promise;function Xh(n){const e=n.split(".");if(e.length!==3)throw new vg("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!iU.test(e[i]))throw new vg("JWT not in base64url format");return{header:JSON.parse(tT(e[0])),payload:JSON.parse(tT(e[1])),signature:qo(e[2]),raw:{header:e[0],payload:e[1]}}}async function vU(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function EU(n,e){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function wU(n){return("0"+n.toString(16)).substr(-2)}function TU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,wU).join("")}async function bU(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function SU(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await bU(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ao(n,e,t=!1){const i=TU();let a=i;t&&(a+="/PASSWORD_RECOVERY"),await Mo(n,`${e}-code-verifier`,a);const l=await SU(i);return[l,i===l?"plain":"s256"]}const AU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RU(n){const e=n.headers.get(yg);if(!e||!e.match(AU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function CU(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function IU(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ro(n){if(!OU.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pm(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kU(n,e){return new Proxy(n,{get:(t,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,a)}})}function nT(n){return JSON.parse(JSON.stringify(n))}const ha=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),DU=[502,503,504];async function rT(n){var e;if(!_U(n))throw new _g(ha(n),0);if(DU.includes(n.status))throw new _g(ha(n),n.status);let t;try{t=await n.json()}catch(l){throw new pa(ha(l),l)}let i;const a=RU(n);if(a&&a.getTime()>=gA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new J0(ha(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new kn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new J0(ha(t),n.status,t.weak_password.reasons);throw new aU(ha(t),n.status||500,i)}const NU=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),t))};async function we(n,e,t,i){var a;const l=Object.assign({},i?.headers);l[yg]||(l[yg]=gA["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await PU(n,e,t+d,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function PU(n,e,t,i,a,l){const c=NU(e,i,a,l);let d;try{d=await n(t,Object.assign({},c))}catch(p){throw console.error(p),new _g(ha(p),0)}if(d.ok||await rT(d),i?.noResolveJson)return d;try{return await d.json()}catch(p){await rT(p)}}function cr(n){var e;let t=null;MU(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=mU(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function iT(n){const e=cr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function fs(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function xU(n){return{data:n,error:null}}function UU(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l}=n,c=nd(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l},p=Object.assign({},c);return{data:{properties:d,user:p},error:null}}function sT(n){return n}function MU(n){return n.access_token&&n.refresh_token&&n.expires_in}const xm=["global","local","others"];class VU{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=vA(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=xm[0]){if(xm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xm.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:fs})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=nd(e,["options"]),a=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:UU,redirectTo:t?.redirectTo})}catch(t){if(ge(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fs})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,a,l,c,d,p;try{const g={nextPage:null,lastPage:0,total:0},_=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:sT});if(_.error)throw _.error;const w=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(p=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(N.split(";")[1].split("=")[1]);g[`${P}Page`]=k}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(ge(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Ro(e);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fs})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ro(e);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:fs})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Ro(e);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:fs})}catch(i){if(ge(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Ro(e.userId);try{const{data:t,error:i}=await we(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:i}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ro(e.userId),Ro(e.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,a,l,c,d,p;try{const g={nextPage:null,lastPage:0,total:0},_=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:sT});if(_.error)throw _.error;const w=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(p=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(N.split(";")[1].split("=")[1]);g[`${P}Page`]=k}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(ge(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}}function aT(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Co={debug:!!(globalThis&&_A()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class EA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class LU extends EA{}async function jU(n,e,t){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new LU(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Co.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function BU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wA(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function zU(n){return parseInt(n,16)}function qU(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function $U(n){var e;const{chainId:t,domain:i,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:p,resources:g,scheme:_,uri:w,version:b}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const A=wA(n.address),N=_?`${_}://${i}`:i,k=n.statement?`${n.statement}
`:"",P=`${N} wants you to sign in with your Ethereum account:
${A}

${k}`;let H=`URI: ${w}
Version: ${b}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(H+=`
Expiration Time: ${a.toISOString()}`),d&&(H+=`
Not Before: ${d.toISOString()}`),p&&(H+=`
Request ID: ${p}`),g){let $=`
Resources:`;for(const G of g){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);$+=`
- ${G}`}H+=$}return`${P}
${H}`}class Pt extends Error{constructor({message:e,code:t,cause:i,name:a}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=a??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Nf extends Pt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function HU({error:n,options:e}){var t,i,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Pt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(TA(c)){if(l.rp.id!==c)return new Pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function FU({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Pt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(TA(i)){if(t.rpId!==i)return new Pt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class GU{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const KU=new GU;function QU(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,a=nd(n,["challenge","user","excludeCredentials"]),l=qo(e).buffer,c=Object.assign(Object.assign({},t),{id:qo(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];d.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:qo(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function YU(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=nd(n,["challenge","allowCredentials"]),a=qo(e).buffer,l=Object.assign(Object.assign({},i),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const d=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:qo(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function WU(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:_a(new Uint8Array(n.response.attestationObject)),clientDataJSON:_a(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function XU(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:_a(new Uint8Array(a.authenticatorData)),clientDataJSON:_a(new Uint8Array(a.clientDataJSON)),signature:_a(new Uint8Array(a.signature)),userHandle:a.userHandle?_a(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function TA(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function oT(){var n,e;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function JU(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nf("Browser returned unexpected credential type",e)}:{data:null,error:new Nf("Empty credential response",e)}}catch(e){return{data:null,error:HU({error:e,options:n})}}}async function ZU(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nf("Browser returned unexpected credential type",e)}:{data:null,error:new Nf("Empty credential response",e)}}catch(e){return{data:null,error:FU({error:e,options:n})}}}const eM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},tM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pf(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of n)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))i[l]=c;else if(t(c))i[l]=c;else if(e(c)){const d=i[l];e(d)?i[l]=Pf(d,c):i[l]=Pf(c)}else i[l]=c}return i}function nM(n,e){return Pf(eM,n,e||{})}function rM(n,e){return Pf(tM,n,e||{})}class iM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:a},l){var c;try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!d)return{data:null,error:p};const g=a??KU.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:_}=d.webauthn.credential_options.publicKey;if(!_.name){const w=i;if(w)_.name=`${_.id}:${w}`;else{const A=(await this.client.getUser()).data.user,N=((c=A?.user_metadata)===null||c===void 0?void 0:c.name)||A?.email||A?.id||"User";_.name=`${_.id}:${N}`}}_.displayName||(_.displayName=_.name)}switch(d.webauthn.type){case"create":{const _=nM(d.webauthn.credential_options.publicKey,l?.create),{data:w,error:b}=await JU({publicKey:_,signal:g});return w?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}case"request":{const _=rM(d.webauthn.credential_options.publicKey,l?.request),{data:w,error:b}=await ZU(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:_,signal:g}));return w?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}}}catch(d){return ge(d)?{data:null,error:d}:{data:null,error:new pa("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new Ku("rpId is required for WebAuthn authentication")};try{if(!oT())return{data:null,error:new pa("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:p}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:i,credential_response:p.credential_response}})}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new pa("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new Ku("rpId is required for WebAuthn registration")};try{if(!oT())return{data:null,error:new pa("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(_=>{var w;return(w=_.data)===null||w===void 0?void 0:w.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:d};const{data:p,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:a},{create:l});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new pa("Unexpected error in register",c)}}}}BU();const sM={url:tU,storageKey:nU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lT(n,e,t){return await t()}const Io={};class Qu{get jwks(){var e,t;return(t=(e=Io[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Io[this.storageKey]=Object.assign(Object.assign({},Io[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Io[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Io[this.storageKey]=Object.assign(Object.assign({},Io[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},sM),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Qu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Qu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Zt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new VU({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=vA(l.fetch),this.lock=l.lock||lT,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Zt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=jU:this.lock=lT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:_A()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=aT(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=aT(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(Zt()&&(t=yU(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),Zt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),lU(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ge(t)?this._returnResult({error:t}):this._returnResult({error:new pa("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,a;try{const l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:cr}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,i,a;try{let l;if("email"in e){const{email:_,password:w,options:b}=e;let A=null,N=null;this.flowType==="pkce"&&([A,N]=await Ao(this.storage,this.storageKey)),l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:_,password:w,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:A,code_challenge_method:N},xform:cr})}else if("phone"in e){const{phone:_,password:w,options:b}=e;l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:w,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:cr})}else throw new Yh("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return await Jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:d}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:iT})}else if("phone"in e){const{phone:l,password:c,options:d}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:iT})}else throw new Yh("You must provide either an email or phone number and a password");const{data:i,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const l=new So;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,a,l,c,d,p,g,_,w,b;let A,N;if("message"in e)A=e.message,N=e.signature;else{const{chain:k,wallet:P,statement:H,options:$}=e;let G;if(Zt())if(typeof P=="object")G=P;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")G=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=P}const ie=new URL((t=$?.url)!==null&&t!==void 0?t:window.location.href),pe=await G.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!pe||pe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=wA(pe[0]);let I=(i=$?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!I){const O=await G.request({method:"eth_chainId"});I=zU(O)}const C={domain:ie.host,address:le,statement:H,uri:ie.href,version:"1",chainId:I,nonce:(a=$?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=$?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=$?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(p=$?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=$?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(_=$?.signInWithEthereum)===null||_===void 0?void 0:_.resources};A=$U(C),N=await G.request({method:"personal_sign",params:[qU(A),le]})}try{const{data:k,error:P}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:N},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:cr});if(P)throw P;if(!k||!k.session||!k.user){const H=new So;return this._returnResult({data:{user:null,session:null},error:H})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:P})}catch(k){if(ge(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var t,i,a,l,c,d,p,g,_,w,b,A;let N,k;if("message"in e)N=e.message,k=e.signature;else{const{chain:P,wallet:H,statement:$,options:G}=e;let ie;if(Zt())if(typeof H=="object")ie=H;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))ie=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!G?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=H}const pe=new URL((t=G?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ie&&ie.signIn){const le=await ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G?.signInWithSolana),{version:"1",domain:pe.host,uri:pe.href}),$?{statement:$}:null));let I;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")I=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)I=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)N=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),k=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ie)||typeof ie.signMessage!="function"||!("publicKey"in ie)||typeof ie!="object"||!ie.publicKey||!("toBase58"in ie.publicKey)||typeof ie.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${pe.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${pe.href}`,`Issued At: ${(a=(i=G?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=G?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((c=G?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((d=G?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((p=G?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((g=G?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((w=(_=G?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||w===void 0)&&w.length?["Resources",...G.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const le=await ie.signMessage(new TextEncoder().encode(N),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=le}}try{const{data:P,error:H}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:_a(k)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:cr});if(H)throw H;if(!P||!P.session||!P.user){const $=new So;return this._returnResult({data:{user:null,session:null},error:$})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:H})}catch(P){if(ge(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const t=await ua(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new uU;const{data:l,error:c}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:cr});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new So;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:i,token:a,access_token:l,nonce:c}=e,d=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:cr}),{data:p,error:g}=d;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const _=new So;return this._returnResult({data:{user:null,session:null},error:_})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,a,l,c;try{if("email"in e){const{email:d,options:p}=e;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await Ao(this.storage,this.storageKey));const{error:w}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=p?.data)!==null&&t!==void 0?t:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:_},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:d,options:p}=e,{data:g,error:_}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(c=p?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:_})}throw new Yh("You must provide either an email or phone number.")}catch(d){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,i;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:d}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:cr});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,g=c.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,i,a,l,c;try{let d=null,p=null;this.flowType==="pkce"&&([d,p]=await Ao(this.storage,this.storageKey));const g=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:p}),headers:this.headers,xform:xU});return!((l=g.data)===null||l===void 0)&&l.url&&Zt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(d){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new kn;const{error:a}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ge(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:l}=e,{error:c}=await we(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:i,type:a,options:l}=e,{data:c,error:d}=await we(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Yh("You must provide either an email or phone number and a type")}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<km:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await ua(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Pm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=kU(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fs}):await this._useSession(async t=>{var i,a,l;const{data:c,error:d}=t;if(d)throw d;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:fs})})}catch(t){if(ge(t))return Dm(t)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new kn;const c=a.session;let d=null,p=null;this.flowType==="pkce"&&e.email!=null&&([d,p]=await Ao(this.storage,this.storageKey));const{data:g,error:_}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:p}),jwt:c.access_token,xform:fs});if(_)throw _;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kn;const t=Date.now()/1e3;let i=t,a=!0,l=null;const{payload:c}=Xh(e.access_token);if(c.exp&&(i=c.exp,a=i<=t),a){const{data:d,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:p}=await this._getUser(e.access_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(ge(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:c,error:d}=t;if(d)throw d;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new kn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Zt())throw new Wh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new X0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new X0("No code detected.");const{data:$,error:G}=await this._exchangeCodeForSession(e.code);if(G)throw G;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:p,token_type:g}=e;if(!l||!d||!c||!g)throw new Wh("No session defined in URL");const _=Math.round(Date.now()/1e3),w=parseInt(d);let b=_+w;p&&(b=parseInt(p));const A=b-_;A*1e3<=Uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${w}s`);const N=b-w;_-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,_):_-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,_);const{data:k,error:P}=await this._getUser(l);if(P)throw P;const H={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:w,expires_at:b,refresh_token:c,token_type:g,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:e.type},error:null})}catch(i){if(ge(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l&&!Dm(l))return this._returnResult({error:l});const c=(i=a.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(oU(d)&&(d.status===404||d.status===401||d.status===403)||Dm(d)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=gU(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await Ao(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:a}=await this._useSession(async l=>{var c,d,p,g,_;const{data:w,error:b}=l;if(b)throw b;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",A,{headers:this.headers,jwt:(_=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return Zt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(ge(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:d,token:p,access_token:g,nonce:_}=e,w=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:p,access_token:g,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:cr}),{data:b,error:A}=w;return A?this._returnResult({data:{user:null,session:null},error:A}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new So}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:A}))}catch(a){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:c}=t;if(c)throw c;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await EU(async a=>(a>0&&await vU(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Nm(l)&&Date.now()+c-i<Uo})}catch(i){if(this._debug(t,"error",i),ge(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Zt()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await ua(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ua(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Mo(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Pm()}else if(a&&!a.user&&!a.user){const c=await ua(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Jt(this.storage,this.storageKey+"-user"),await Mo(this.storage,this.storageKey,a)):a.user=Pm()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<km;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${km}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Nm(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new sd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new kn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),ge(l)){const c={data:null,error:l};return Nm(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(p){l.push(p)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Jt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await Mo(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=nT(a);await Mo(this.storage,this.storageKey,l)}else{const a=nT(t);await Mo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Uo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Uo}ms, refresh threshold is ${gg} ticks`),a<=gg&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof EA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const a=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ao(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await we(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await we(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((a=p?.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?WU(e.webauthn.credential_response):XU(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:p}=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:p}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:QU(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:YU(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,i,a,l;if(e)try{const{payload:A}=Xh(e);let N=null;A.aal&&(N=A.aal);let k=N;const{data:{user:P},error:H}=await this.getUser(e);if(H)return this._returnResult({data:null,error:H});((i=(t=P?.factors)===null||t===void 0?void 0:t.filter(ie=>ie.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(k="aal2");const G=A.amr||[];return{data:{currentLevel:N,nextLevel:k,currentAuthenticationMethods:G},error:null}}catch(A){if(ge(A))return this._returnResult({data:null,error:A});throw A}const{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:p}=Xh(c.access_token);let g=null;p.aal&&(g=p.aal);let _=g;((l=(a=c.user.factors)===null||a===void 0?void 0:a.filter(A=>A.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(_="aal2");const b=p.amr||[];return{data:{currentLevel:g,nextLevel:_,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new kn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new kn});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(i){if(ge(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new kn});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(i){if(ge(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new kn})})}catch(e){if(ge(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(d=>d.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+sU>a)return i;const{data:l,error:c}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:A,error:N}=await this.getSession();if(N||!A.session)return this._returnResult({data:null,error:N});i=A.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:p}}=Xh(i);t?.allowExpired||CU(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){const{error:A}=await this.getUser(i);if(A)throw A;return{data:{claims:l,header:a,signature:c},error:null}}const _=IU(a.alg),w=await crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!await crypto.subtle.verify(_,w,c,pU(`${d}.${p}`)))throw new vg("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(i){if(ge(i))return this._returnResult({data:null,error:i});throw i}}}Qu.nextInstanceID={};const aM=Qu,oM="2.93.3";let Su="";typeof Deno<"u"?Su="deno":typeof document<"u"?Su="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Su="react-native":Su="node";const lM={"X-Client-Info":`supabase-js-${Su}/${oM}`},uM={headers:lM},cM={schema:"public"},hM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fM={};function Yu(n){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(n)}function dM(n,e){if(Yu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Yu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pM(n){var e=dM(n,"string");return Yu(e)=="symbol"?e:e+""}function mM(n,e,t){return(e=pM(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function yt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uT(Object(t),!0).forEach(function(i){mM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uT(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const gM=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),yM=()=>Headers,_M=(n,e,t)=>{const i=gM(t),a=yM();return async(l,c)=>{var d;const p=(d=await e())!==null&&d!==void 0?d:n;let g=new a(c?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),i(l,yt(yt({},c),{},{headers:g}))}};function vM(n){return n.endsWith("/")?n:n+"/"}function EM(n,e){var t,i;const{db:a,auth:l,realtime:c,global:d}=n,{db:p,auth:g,realtime:_,global:w}=e,b={db:yt(yt({},p),a),auth:yt(yt({},g),l),realtime:yt(yt({},_),c),storage:{},global:yt(yt(yt({},w),d),{},{headers:yt(yt({},(t=w?.headers)!==null&&t!==void 0?t:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function wM(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vM(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var TM=class extends aM{constructor(n){super(n)}},bM=class{constructor(n,e,t){var i,a;this.supabaseUrl=n,this.supabaseKey=e;const l=wM(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:cM,realtime:fM,auth:yt(yt({},hM),{},{storageKey:c}),global:uM},p=EM(t??{},d);if(this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(_,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=p.auth)!==null&&g!==void 0?g:{},this.headers,p.global.fetch)}this.fetch=_M(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(yt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new ox(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new eU(this.storageUrl.href,this.headers,this.fetch,t?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new nx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:a,storageKey:l,flowType:c,lock:d,debug:p,throwOnError:g},_,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new TM({url:this.authUrl.href,headers:yt(yt({},b),_),storageKey:l,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:a,flowType:c,lock:d,debug:p,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Sx(this.realtimeUrl.href,yt(yt({},n),{},{params:yt(yt({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e?.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const SM=(n,e,t)=>new bM(n,e,t);function AM(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}AM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jh=SM("https://nttlpvtfykvndxyhgvhx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50dGxwdnRmeWt2bmR4eWhndmh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3NzE2MDAsImV4cCI6MjA4NTM0NzYwMH0.UG12Fo1sxsYf4NgLmKMuAELDi0DkxYkrRMQACMCAVbo");function cT(){const[n,e]=W.useState(null),[t,i]=W.useState(""),[a,l]=W.useState(""),[c,d]=W.useState([]),[p,g]=W.useState(null),[_,w]=W.useState([]),[b,A]=W.useState(""),[N,k]=W.useState([]),[P,H]=W.useState(!1),[$,G]=W.useState(!1),ie=Uf(),pe=W.useRef(null);W.useEffect(()=>{pe.current?.scrollIntoView({behavior:"smooth"})},[_]),W.useEffect(()=>{const R=fb(fa,async ve=>{if(!ve){ie("/login");return}e(ve),await ya(ps(Dn,"users",ve.uid),{uid:ve.uid,displayName:ve.displayName||"",email:ve.email||"",photoURL:ve.photoURL||""})});return()=>R()},[ie]),W.useEffect(()=>{if(!n)return;const R=To(Dn,"chats"),ve=j0(R,async Ke=>{const Q=new Set;if(Ke.docs.forEach(He=>{const M=He.data();if(M?.users?.includes(n.uid)){const Z=M.users.find(ae=>ae!==n.uid);Z&&Q.add(Z)}}),Q.size===0){k([]);return}const re=To(Dn,"users"),he=Am(re,Rm("uid","in",[...Q])),Pe=await V0(he);k(Pe.docs.map(He=>He.data()))});return()=>ve()},[n]),W.useEffect(()=>{if(!n||!p)return;const R=C(n.uid,p.uid),ve=To(Dn,"chats",R,"messages"),Ke=Am(ve,KP("timestamp","asc")),Q=j0(Ke,re=>{w(re.docs.map(he=>({id:he.id,...he.data()})))});return()=>Q()},[n,p]);const le=async()=>{if(!t.trim())return;const R=To(Dn,"users"),ve=Am(R,Rm("displayName",">=",t.trim()),Rm("displayName","<=",t.trim()+"")),Ke=await V0(ve);d(Ke.docs.map(Q=>Q.data()).filter(Q=>Q.uid!==n.uid))},I=async()=>{if(!b.trim()||!p)return;const R=C(n.uid,p.uid);await ya(ps(Dn,"chats",R),{users:[n.uid,p.uid],lastUpdated:Cm()},{merge:!0});const ve=Ke=>{const Q=/(https?:\/\/[^\s]+)/g;return Ke.replace(Q,function(re){return`<a href="${re}" target="_blank" rel="noopener noreferrer">${re}</a>`})};await L0(To(Dn,"chats",R,"messages"),{sender:n.uid,receiver:p.uid,text:ve(b),timestamp:Cm()}),A("")},C=(R,ve)=>[R,ve].sort().join("_"),O=async()=>{await db(fa),e(null)},V=async R=>{const ve=R.target.files[0];if(!ve||!n)return;const Ke=ve.name.split(".").pop(),Q=`${n.uid}-${Date.now()}.${Ke}`,{error:re}=await Jh.storage.from("profile-pictures").upload(Q,ve,{upsert:!0});if(re){console.error("Upload error:",re);return}const{data:he}=Jh.storage.from("profile-pictures").getPublicUrl(Q);if(!he?.publicUrl){console.error("Error getting public URL");return}await ya(ps(Dn,"users",n.uid),{photoURL:he.publicUrl},{merge:!0}),e(Pe=>({...Pe,photoURL:he.publicUrl})),console.log("Profile image updated:",he.publicUrl)},U=async R=>{const ve=R.target.files[0];if(!ve||!p)return;const Ke=C(n.uid,p.uid),Q=`${n.uid}-${Date.now()}-${ve.name}`,{error:re}=await Jh.storage.from("chat-images").upload(Q,ve,{upsert:!0});if(re){console.error("Image upload error:",re);return}const{data:he}=Jh.storage.from("chat-images").getPublicUrl(Q);if(!he?.publicUrl){console.error("Error getting image URL");return}await L0(To(Dn,"chats",Ke,"messages"),{sender:n.uid,receiver:p.uid,text:`<img src='${he.publicUrl}' alt='sent image' style='max-width: 100%;' />`,timestamp:Cm()}),console.log("Image sent:",he.publicUrl)};if(!n)return null;let j=n.photoURL;return n.photoURL?j=n.photoURL:j="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y",oe.jsxs("div",{className:`chat-app-root ${p?"chat-active":""}`,children:[P&&oe.jsx("div",{className:"profile-overlay",onClick:()=>H(!1)}),oe.jsxs("div",{className:"chat-sidebar",children:[oe.jsxs("div",{className:"chat-sidebar-header",onClick:()=>H(!0),children:[oe.jsx("img",{style:{borderRadius:"50%",width:"40px",height:"40px",marginRight:"8px"},src:j,className:"user-avatar"}),oe.jsx("span",{children:n.displayName})]}),oe.jsxs("div",{className:`chat-profile-section ${P?"visible":""}`,children:[oe.jsx("h3",{children:"User Profile"}),n.photoURL&&oe.jsx("img",{src:n.photoURL,alt:"profile"}),oe.jsxs("p",{children:[oe.jsx("strong",{children:"Name:"})," ",n.displayName]}),oe.jsxs("p",{children:[oe.jsx("strong",{children:"Email:"})," ",n.email]}),oe.jsx("input",{type:"file",accept:"image/*",onChange:V}),oe.jsx("button",{onClick:O,children:"Logout"}),oe.jsx("button",{onClick:()=>H(!1),children:"Close"})]}),oe.jsx("div",{className:"chat-sidebar-search",children:oe.jsx("input",{type:"text",className:"chat-search-input",placeholder:"Search users...",value:t,onChange:R=>i(R.target.value),onKeyDown:R=>R.key==="Enter"&&le(),name:"user-search",id:"su"})}),oe.jsxs("ul",{className:"chat-user-list",children:[(t.trim()?c:N).map(R=>oe.jsx("li",{className:`chat-user-item ${p?.uid===R.uid?"selected":""}`,onClick:()=>{g(R),i("")},children:oe.jsxs("span",{className:"chat-user-name",children:[oe.jsx("img",{style:{borderRadius:"50%",width:"35px",height:"35px",marginRight:"8px"},src:R.photoURL,className:"chat-user-avatar"}),R.displayName||R.email]})},R.uid)),!t&&N.length===0&&oe.jsx("div",{className:"chat-empty-list",children:"No chats yet"})]})]}),oe.jsx("div",{className:"chat-main",children:p?oe.jsxs(oe.Fragment,{children:[oe.jsxs("div",{className:"chat-header",children:[p&&oe.jsx("button",{className:"chat-back-btn",onClick:()=>g(null),children:"Back"}),p.photoURL&&oe.jsx("img",{src:p.photoURL,style:{width:"30px",height:"30px",borderRadius:"50%",marginRight:"8px"}}),p?.displayName||p?.email,oe.jsx("span",{className:"message-search-icon",onClick:()=>G(!$),children:""}),oe.jsx("div",{className:`message-search-wrapper${$?"":"show"}`,children:oe.jsx("input",{type:"search",placeholder:"Search messages...",className:"message-search-input",value:a,id:"sm",name:"search",onChange:R=>l(R.target.value)})})]}),oe.jsxs("div",{className:"chat-messages",children:[oe.jsx("ul",{children:_.filter(R=>(typeof R.text=="string"?R.text:"").toLowerCase().includes(a.toLowerCase())).map(R=>oe.jsx("li",{children:oe.jsx("div",{className:`chat-message-row ${R.sender===n.uid?"sent":"received"}`,children:oe.jsxs("div",{className:"chat-message-bubble",children:[oe.jsx("span",{dangerouslySetInnerHTML:{__html:R.text}}),oe.jsx("div",{className:"chat-message-timestamp",children:R.timestamp?new Date(R.timestamp.toDate()).toLocaleTimeString([],{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]})})},R.id))}),oe.jsx("div",{ref:pe})]}),oe.jsxs("div",{className:"chat-input-row",children:[oe.jsx("input",{type:"text",className:"chat-input",placeholder:"Type a message",value:b,onChange:R=>A(R.target.value),onKeyDown:R=>R.key==="Enter"&&I()}),oe.jsx("input",{type:"file",accept:"image/*",className:"chat-image-upload",onChange:U}),oe.jsx("button",{className:"chat-send-btn",onClick:I,children:"Send"})]})]}):oe.jsx("div",{className:"chat-select-user",children:"Select a user to start chatting"})})]})}function RM(){return oe.jsx(oe.Fragment,{children:oe.jsx(kI,{children:oe.jsxs(aI,{children:[oe.jsx(Oo,{path:"/login",element:oe.jsx(B0,{})}),oe.jsx(Oo,{path:"/",element:oe.jsx(cT,{})}),oe.jsx(Oo,{path:"*",element:oe.jsx(iI,{to:"/login"})}),oe.jsx(Oo,{path:"Zeep-chat/",element:oe.jsx(B0,{})}),oe.jsx(Oo,{path:"Zeep-chat/chat",element:oe.jsx(cT,{})})]})})})}lC.createRoot(document.getElementById("root")).render(oe.jsx(W.StrictMode,{children:oe.jsx(RM,{})}));
